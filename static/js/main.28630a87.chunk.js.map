{"version":3,"sources":["Components/SearchList/index.js","store/actions/addFilteredTickers.js","store/actions/addTicker.js","services/firebase.js","Functions/functions.js","Components/SearchForm/index.js","store/actions/delTicker.js","Components/Ticker/index.js","Components/Tickers/index.js","Components/WeeklyResult/index.js","store/actions/initUserData.js","utils/constants.js","store/selectors/tickersSelectors.js","store/actions/autoComplete.js","store/actions/calculateYearProfit.js","store/actions/calculateWeeklyPortfolioProfitAndCost.js","store/selectors/profileSelectors.js","Components/Main/index.js","hocs/PrivateRoute.js","hocs/PublicRoute.js","Components/SignUp/index.js","Components/LogIn/index.js","Components/MyTickers/index.js","store/actions/calculatePortfolioCost.js","Components/Profile/index.js","Components/Router/index.js","store/initialState.js","store/sagas/profileSaga.js","store/sagas/tickersSaga.js","store/sagas/userDataSaga.js","store/sagas.js","store/reducers/userDataReducer.js","store/reducers/currentUserDataReducer.js","store/reducers/filteredTickersReducer.js","store/store.js","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","theme","searchListContainer","maxWidth","searchList","listStyle","padding","margin","addButton","border","color","backgroundColor","SearchList","props","classes","className","searchResult","map","item","onClick","event","submitTicker","ticker","descr","classcode","ADD_FILTERED_TICKERS","ADD_TICKER_WITH_SAGA","addTickerWithSaga","description","date","quantity","usdCost","usdTotal","rubCost","rubTotal","eurCost","eurTotal","profitUsdAbs","profitUsdRel","profitRubAbs","profitRubRel","profitEurAbs","profitEurRel","currency","tickerType","isManual","bondNominal","couponOrDividendUsd","couponOrDividendRub","couponOrDividendEur","type","auth","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","getAuth","db","getDatabase","getInfoUrl","getHistoryUrl","startDate","finishDate","Math","round","Date","addTicker","prevData","isAutoComplete","manualCourse","manualInfo","a","couponOrDividend","friday","getDay","bondNominalForTicker","undefined","usdCoef","rubCoef","eurCoef","prevDateData","usdUrl","fetch","usdResponse","json","usdData","usdCurrency","c","eurUrl","eurResponse","uerData","eurCurrency","infoUrl","infoResponse","infoData","tickerUrl","tickerResponse","tickerData","s","isNaN","Error","tickerCurrent","ref","currentUser","uid","toISOString","slice","get","snapshot","exists","data","val","console","log","message","calculatePortfolio","rubGrandTotal","usdGrandTotal","eurGrandTotal","args","forEach","list","Object","values","filterData","year","month","filteredData","keys","tickerItems","tickerItem","dates","filter","getMonth","getFullYear","filteredTickers","filterWeeklyResult","getYearProfit","allTickers","yearProfit","i","tickerNames","j","sumProfitUsdAbsTemp","sumProfitUsdRelTemp","sumProfitRubAbsTemp","sumProfitRubRelTemp","sumProfitEurAbsTemp","sumProfitEurRelTemp","sumProfitUsdAbs","sumProfitUsdRel","sumProfitRubAbs","sumProfitRubRel","sumProfitEurAbs","sumProfitEurRel","getWekklyPortfolioProfitAndCost","wekklyPortfolioProfitAndCost","no_data","prevPortfolioUsdTotal","prevPortfolioRubTotal","prevPortfolioEurTotal","portfolioUsdTotal","portfolioUsdProfitAbs","portfolioUsdProfitRel","portfolioRubTotal","portfolioRubProfitAbs","portfolioRubProfitRel","portfolioEurTotal","portfolioEurProfitAbs","portfolioEurProfitRel","getLastTickers","tickers","tickerTable","length","form","borderRadius","display","flexDirection","formSubmit","searchItem","marginBottom","hidden","SearchForm","useState","setTicker","setQuantity","setDate","search","setSearch","setSearchResult","setCurrency","setManualCourse","setIsManual","manualType","setManualType","manualDescription","setManualDescription","manualHidden","setManualHidden","setBondNominal","setCouponOrDividend","dispatch","useDispatch","buyTicker","preventDefault","addAction","action","onSubmit","label","disabled","value","onChange","target","required","query","then","result","temp","push","symbol","catch","error","searchedTicker","DEL_TICKER_WITH_SAGA","delTickerWithSaga","marketType","table","overflow","tickerName","width","alignItems","justifyContent","flexShrink","tickerDate","borderLeft","borderRight","tickerHeader","tickerDateCell","borderBottom","green","red","Ticker","setSumProfitUsdAbs","setSumProfitUsdRel","setSumProfitRubAbs","setSumProfitRubRel","setSumProfitEurAbs","setSumProfitEurRel","useEffect","toFixed","TickerPure","React","memo","Tickers","filteredTickersNames","delTicker","TickersPure","WeeklyResult","setPortfolioUsdTotal","setPortfolioRubTotal","setPortfolioEurTotal","portfolioUsdTotalTemp","portfolioRubTotalTemp","portfolioEurTotalTemp","weeklyResult","WeeklyResultPure","INIT_USER_DATA","initUserData","userData","INIT_INIT_USER_DATA_WITH_SAGA","HOMEPAGE","EMPTY_OBJECT","getAlltickers","state","getFilteredStocks","stock","getFilteredPif","pif","getFilteredEtf","etf","getFilteredBonds","bonds","getFilteredForex","forex","getDates","AUTOCOMPLETE_TICKER_WITH_SAGA","autoCompleteTickerWithSaga","CALCULATE_YEAR_PROFIT","calculateYearProfit","CALCULATE_YEAR_PROFIT_WITH_SAGA","CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST","CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST_WITH_SAGA","getPortfolio","portfolio","getMyProfileCost","currentUserData","portfolioCost","getMyYearProfit","getWeeklyPortfolioProfitAndCost","weeklyPortfolioProfitAndCost","getLastStock","getLastPif","getLastEtf","getLastBonds","getLastForex","App","mainContainer","position","top","Main","filteredForex","useSelector","filteredStocks","filteredPif","filteredEtf","filteredBonds","weeklyResults","filteredWeeklyResult","setFilteredWeeklyResult","calculateYearProfitWithSaga","calculateWeeklyPortfolioProfitAndCostWithSaga","MainPure","PrivateRoute","authenticated","children","to","pathname","PublicRoute","SignUp","email","setEmail","password","setPassword","setError","handlePassChange","useCallback","e","handleEmailChange","handleSubmit","createUserWithEmailAndPassword","placeholder","name","LogIn","signInWithEmailAndPassword","flexGrow","tickerDataCell","tickerHeaders","MyTickers","myProfit","MyTickersPure","CALCULATE_PORTFOLIO_COST","calculatePortfolioCost","CALCULATE_PORTFOLIO_COST_WITH_SAGA","Profile","yearPortfolioProfit","setYearPortfolioProfit","myPortfolioCost","myYearProfit","myCurrentStock","myCurrentPif","myCurrentEtf","myCurrentBonds","myCurrentForex","yearResult","yearProfitUsdAbs","yearProfitUsdRel","yearProfitRubAbs","yearProfitRubRel","yearProfitEurAbs","yearProfitEurRel","calculateYearPortfolioProfit","ProfilePure","Router","authed","setAuthed","onAuthStateChanged","user","signOutUser","signOut","exact","path","element","initialState","onCalculatePortfolioCostWithSaga","call","put","onCalculateYearProfitWithSaga","onCalculateWeeklyPortfolioProfitAndCostWithSaga","onAddTickerWithSaga","newTicker","set","onDelTickerWithSaga","remove","onAutoCompleteTickersWithSaga","autoCompleteAction","onInitUserDataWithSaga","onValue","store","mySaga","takeLatest","takeEvery","userDataReducer","currentUserDataReducer","filteredTickersReducer","combine","combineReducers","options","onError","stack","sagaMiddleware","createSagaMiddleware","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","persistConfig","key","storage","persistedReducer","persistReducer","createStore","applyMiddleware","run","persistor","persistStore","mainTheme","createTheme","palette","primary","main","secondary","ThemeProvider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.28630a87.chunk.js","sourcesContent":["import React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n\tsearchListContainer: {\n\t\tmaxWidth: '500px',\n\t},\n\tsearchList: {\n\t\tlistStyle: 'none',\n\t\tpadding: '0',\n\t\tmargin: '0',\n\t},\n\taddButton: {\n\t\tborder: 'none',\n\t\t'&:hover': {\n\t\t\tcolor: '#fff',\n\t\t\tbackgroundColor: '#222',\n\t\t}\n\t},\n}));\n\nfunction SearchList(props) {\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<div className={classes.searchListContainer}>\n\t\t\t<ul className={classes.searchList}>\n\t\t\t\t{props.searchResult.map((item) =>\n\t\t\t\t\t<li key={item.ticker + item.classcode}><button onClick={(event) => props.submitTicker(event, item.ticker)} className={classes.addButton}>{item.descr}</button></li>\n\t\t\t\t)}\n\t\t\t</ul>\n\t\t</div>\n\t);\n}\n\nexport default SearchList;\n","export const ADD_FILTERED_TICKERS = 'TICKERS::ADD_FILTERED_TICKERS';\r\n\r\nexport const addFilteredTickers = (filteredTickers) => {\r\n    return {\r\n        type: ADD_FILTERED_TICKERS,\r\n        filteredTickers\r\n    };\r\n};","export const ADD_TICKER_WITH_SAGA = 'TICKERS::ADD_TICKER_WITH_SAGA';\n\nexport const addTickerWithSaga = (\n    ticker,\n    description,\n    date,\n    quantity,\n    usdCost,\n    usdTotal,\n    rubCost,\n    rubTotal,\n    eurCost,\n    eurTotal,\n    profitUsdAbs,\n    profitUsdRel,\n    profitRubAbs,\n    profitRubRel,\n    profitEurAbs,\n    profitEurRel,\n    currency,\n    tickerType,\n    isManual,\n    bondNominal,\n    couponOrDividendUsd,\n    couponOrDividendRub,\n    couponOrDividendEur\n) => {\n    return {\n        type: ADD_TICKER_WITH_SAGA,\n        ticker,\n        description,\n        date,\n        quantity,\n        usdCost,\n        usdTotal,\n        rubCost,\n        rubTotal,\n        eurCost,\n        eurTotal,\n        profitUsdAbs,\n        profitUsdRel,\n        profitRubAbs,\n        profitRubRel,\n        profitEurAbs,\n        profitEurRel,\n        currency,\n        tickerType,\n        isManual,\n        bondNominal,\n        couponOrDividendUsd,\n        couponOrDividendRub,\n        couponOrDividendEur\n    };\n};","import { getAuth } from \"@firebase/auth\";\nimport { getDatabase } from \"@firebase/database\";\nimport { initializeApp } from \"firebase/app\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAS0Sazo-Bbg-TouSxSrenj5hTYa5bnjN8\",\n  authDomain: \"investor-8a0c2.firebaseapp.com\",\n  projectId: \"investor-8a0c2\",\n  storageBucket: \"investor-8a0c2.appspot.com\",\n  messagingSenderId: \"949350207446\",\n  appId: \"1:949350207446:web:c6cf85c9033c3ed2491e77\"\n};\n\nexport const firebaseInitialize = initializeApp(firebaseConfig);\nexport const auth = getAuth();\nexport const db = getDatabase();","import { addFilteredTickers } from \"../store/actions/addFilteredTickers\";\r\nimport { addTickerWithSaga } from \"../store/actions/addTicker\";\r\nimport { auth, db } from '../services/firebase';\r\nimport { ref, get } from '@firebase/database';\r\n\r\nexport const getSearchUrl = (query) => {\r\n    return `https://api.bcs.ru/udfdatafeed/v1/search?query=${query}&limit=10&fulldescription=on`;\r\n};\r\n\r\nexport const getInfoUrl = (ticker) => {\r\n    return `https://api.bcs.ru/udfdatafeed/v1/symbols?symbol=${ticker}`;\r\n};\r\n\r\nexport const getHistoryUrl = (ticker, startDate, finishDate) => {\r\n    if (+startDate && +finishDate) {\r\n        return `https://api.bcs.ru/udfdatafeed/v1/history?symbol=${ticker}&resolution=d&from=${Math.round((+(new Date(startDate))) / 1000)}&to=${Math.round((+(new Date(finishDate))) / 1000)}`;\r\n    } else {\r\n        return `https://api.bcs.ru/udfdatafeed/v1/history?symbol=${ticker}&resolution=d&from=${Math.round((+(new Date())) / 1000)}&to=${Math.round((+(new Date())) / 1000)}`;\r\n    }\r\n};\r\n\r\nexport const addTicker = async (ticker, date, quantity, currency, prevData, isAutoComplete, isManual, manualCourse, manualInfo, bondNominal, couponOrDividend = 0) => {\r\n    let friday = +(new Date(date));\r\n    while ((new Date(friday)).getDay() !== 5) {\r\n        friday += 86400000;\r\n    }\r\n\r\n    let bondNominalForTicker = bondNominal;\r\n\r\n    if (bondNominal === undefined) { bondNominalForTicker = 0 };\r\n\r\n    try {\r\n        let usdCost;\r\n        let usdTotal;\r\n        let rubCost;\r\n        let rubTotal;\r\n        let eurCost;\r\n        let eurTotal;\r\n        let infoData;\r\n        let tickerData;\r\n        let usdCoef = 1;\r\n        let rubCoef = 1;\r\n        let eurCoef = 1;\r\n        let prevDateData = prevData;\r\n        let profitUsdAbs = 0;\r\n        let profitUsdRel = 0;\r\n        let profitRubAbs = 0;\r\n        let profitRubRel = 0;\r\n        let profitEurAbs = 0;\r\n        let profitEurRel = 0;\r\n        let couponOrDividendUsd = 0;\r\n        let couponOrDividendRub = 0;\r\n        let couponOrDividendEur = 0;\r\n\r\n        const usdUrl = getHistoryUrl('RUR', friday, friday + 82800000);\r\n        const usdResponse = await fetch(usdUrl);\r\n        const usdData = await usdResponse.json();\r\n        const usdCurrency = usdData.c[0];\r\n\r\n        const eurUrl = getHistoryUrl('EUR_RUB', friday, friday + 82800000);\r\n        const eurResponse = await fetch(eurUrl);\r\n        const uerData = await eurResponse.json();\r\n        const eurCurrency = uerData.c[0];\r\n\r\n        if (currency === 'rur') { usdCoef = 1 / usdCurrency } else if (currency === 'usd') { usdCoef = 1 } else if (currency === 'eur') { usdCoef = eurCurrency / usdCurrency };\r\n        if (currency === 'rur') { rubCoef = 1 } else if (currency === 'usd') { rubCoef = usdCurrency } else if (currency === 'eur') { rubCoef = eurCurrency };\r\n        if (currency === 'rur') { eurCoef = 1 / eurCurrency } else if (currency === 'usd') { eurCoef = usdCurrency / eurCurrency } else if (currency === 'eur') { eurCoef = 1 };\r\n\r\n        couponOrDividendUsd = couponOrDividend * usdCoef;\r\n        couponOrDividendRub = couponOrDividend * rubCoef;\r\n        couponOrDividendEur = couponOrDividend * eurCoef;\r\n\r\n        if (!isManual) {\r\n            const infoUrl = getInfoUrl(ticker);\r\n            const infoResponse = await fetch(infoUrl);\r\n            infoData = await infoResponse.json();\r\n\r\n            const tickerUrl = getHistoryUrl(ticker, friday, friday + 82800000);\r\n            const tickerResponse = await fetch(tickerUrl);\r\n            tickerData = await tickerResponse.json();\r\n\r\n            if (tickerData.s === 'no_data' || isNaN(tickerData.c[0])) { throw new Error('Нет данных') }\r\n\r\n            usdCost = (infoData.type !== 'bonds') ? tickerData.c[0] * usdCoef : tickerData.c[0] * usdCoef * bondNominalForTicker / 100;\r\n            usdTotal = (infoData.type !== 'bonds') ? tickerData.c[0] * usdCoef * quantity : tickerData.c[0] * usdCoef * quantity * bondNominalForTicker / 100;\r\n            rubCost = (infoData.type !== 'bonds') ? tickerData.c[0] * rubCoef : tickerData.c[0] * rubCoef * bondNominalForTicker / 100;\r\n            rubTotal = (infoData.type !== 'bonds') ? tickerData.c[0] * rubCoef * quantity : tickerData.c[0] * rubCoef * quantity * bondNominalForTicker / 100;\r\n            eurCost = (infoData.type !== 'bonds') ? tickerData.c[0] * eurCoef : tickerData.c[0] * eurCoef * bondNominalForTicker / 100;\r\n            eurTotal = (infoData.type !== 'bonds') ? tickerData.c[0] * eurCoef * quantity : tickerData.c[0] * eurCoef * quantity * bondNominalForTicker / 100;\r\n        } else {\r\n            usdCost = manualCourse * usdCoef;\r\n            usdTotal = manualCourse * usdCoef * quantity;\r\n            rubCost = manualCourse * rubCoef;\r\n            rubTotal = manualCourse * rubCoef * quantity;\r\n            eurCost = manualCourse * eurCoef;\r\n            eurTotal = manualCourse * eurCoef * quantity;\r\n            infoData = manualInfo;\r\n        };\r\n\r\n        if (!isAutoComplete) {\r\n            const tickerCurrent = ref(db, `${auth.currentUser.uid}/tickers/${infoData.type}/${ticker}/data/${(new Date(friday - 604800000)).toISOString().slice(0, 10)}`);\r\n            const snapshot = await get(tickerCurrent);\r\n            if (snapshot.exists()) {\r\n                const data = snapshot.val();\r\n                prevDateData.ticker = data.ticker;\r\n                prevDateData.rubCost = data.rubCost;\r\n                prevDateData.usdCost = data.usdCost;\r\n                prevDateData.eurCost = data.eurCost;\r\n                prevDateData.quantity = data.quantity;\r\n            };\r\n        }\r\n\r\n        if (prevDateData.ticker === undefined) {\r\n            profitUsdAbs = 0\r\n            profitUsdRel = 0;\r\n            profitRubAbs = 0\r\n            profitRubRel = 0;\r\n            profitEurAbs = 0\r\n            profitEurRel = 0;\r\n        } else {\r\n            profitUsdAbs = (usdCost - prevDateData.usdCost) * prevDateData.quantity + couponOrDividendUsd;\r\n            profitUsdRel = (usdCost - prevDateData.usdCost + couponOrDividendUsd/prevDateData.quantity) / prevDateData.usdCost * 100;\r\n            profitRubAbs = (rubCost - prevDateData.rubCost) * prevDateData.quantity + couponOrDividendRub;\r\n            profitRubRel = (rubCost - prevDateData.rubCost + couponOrDividendRub/prevDateData.quantity) / prevDateData.rubCost * 100;\r\n            profitEurAbs = (eurCost - prevDateData.eurCost) * prevDateData.quantity + couponOrDividendEur;\r\n            profitEurRel = (eurCost - prevDateData.eurCost + couponOrDividendEur/prevDateData.quantity) / prevDateData.eurCost * 100;\r\n        }\r\n\r\n        return addTickerWithSaga(ticker,\r\n            infoData.description,\r\n            (new Date(friday)).toISOString().slice(0, 10),\r\n            quantity,\r\n            usdCost,\r\n            usdTotal,\r\n            rubCost,\r\n            rubTotal,\r\n            eurCost,\r\n            eurTotal,\r\n            profitUsdAbs,\r\n            profitUsdRel,\r\n            profitRubAbs,\r\n            profitRubRel,\r\n            profitEurAbs,\r\n            profitEurRel,\r\n            currency,\r\n            infoData.type,\r\n            isManual,\r\n            bondNominalForTicker,\r\n            couponOrDividendUsd,\r\n            couponOrDividendRub,\r\n            couponOrDividendEur\r\n        );\r\n    }\r\n    catch (err) {\r\n        console.log(err.message + date);\r\n    }\r\n};\r\n\r\nexport const calculatePortfolio = (...args) => {\r\n    let rubGrandTotal = 0;\r\n    let usdGrandTotal = 0;\r\n    let eurGrandTotal = 0;\r\n    args.forEach((list) => {\r\n        Object.values(list).forEach((item) => {\r\n            rubGrandTotal += +item.rubTotal;\r\n            usdGrandTotal += +item.usdTotal;\r\n            eurGrandTotal += +item.eurTotal;\r\n        })\r\n    });\r\n    return ({ rubGrandTotal: rubGrandTotal, usdGrandTotal: usdGrandTotal, eurGrandTotal: eurGrandTotal });\r\n};\r\n\r\nexport const filterData = (data, year, month) => {\r\n\r\n    let filteredData = {};\r\n    const tickerTypes = Object.keys(data);\r\n    tickerTypes.forEach((tickerType) => {\r\n        const tickerItems = Object.keys(data[tickerType]);\r\n        filteredData = {\r\n            ...filteredData,\r\n            [tickerType]: {}\r\n        };\r\n        tickerItems.forEach((tickerItem) => {\r\n            const dates = Object.keys(data[tickerType][tickerItem].data);\r\n            filteredData = {\r\n                ...filteredData,\r\n                [tickerType]: {\r\n                    ...filteredData[tickerType],\r\n                    [tickerItem]: { data: {} }\r\n                }\r\n            };\r\n            const filteredDates = dates.filter(date => ((new Date(date).getMonth() === month) && (new Date(date).getFullYear() === year)));\r\n            filteredDates.forEach((date) => {\r\n                filteredData = {\r\n                    ...filteredData,\r\n                    [tickerType]: {\r\n                        ...filteredData[tickerType],\r\n                        [tickerItem]: {\r\n                            data: {\r\n                                ...filteredData[tickerType][tickerItem].data,\r\n                                [date]: data[tickerType][tickerItem].data[date]\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n            });\r\n        });\r\n    });\r\n    return addFilteredTickers(filteredData);\r\n};\r\n\r\nexport const filterWeeklyResult = (data, year, month) => {\r\n    let filteredData = {};\r\n    const dates = Object.keys(data);\r\n    let filteredDates = [];\r\n\r\n    if (month !== undefined) {\r\n        filteredDates = dates.filter(date => ((new Date(date).getMonth() === month) && (new Date(date).getFullYear() === year)));\r\n    } else {\r\n        filteredDates = dates.filter(date => ((new Date(date).getFullYear() === year)));\r\n    }\r\n\r\n    filteredDates.forEach((date) => {\r\n        filteredData = {\r\n            ...filteredData,\r\n            [date]: data[date]\r\n        }\r\n    });\r\n\r\n    return filteredData;\r\n};\r\n\r\n\r\nexport const getYearProfit = (allTickers) => {\r\n\r\n    let yearProfit = {};\r\n\r\n    Object.values(allTickers).forEach((type, i) => {\r\n        const tickerNames = Object.keys(type);\r\n        yearProfit = {\r\n            ...yearProfit,\r\n            [Object.keys(allTickers)[i]]: {}\r\n        };\r\n        Object.values(type).forEach((ticker, j) => {\r\n            let sumProfitUsdAbsTemp = 0;\r\n            let sumProfitUsdRelTemp = 1;\r\n            let sumProfitRubAbsTemp = 0;\r\n            let sumProfitRubRelTemp = 1;\r\n            let sumProfitEurAbsTemp = 0;\r\n            let sumProfitEurRelTemp = 1;\r\n            Object.values(ticker.data).forEach((date) => {\r\n                sumProfitUsdAbsTemp += +date.profitUsdAbs;\r\n                sumProfitUsdRelTemp *= 1 + +date.profitUsdRel / 100;\r\n                sumProfitRubAbsTemp += +date.profitRubAbs;\r\n                sumProfitRubRelTemp *= 1 + +date.profitRubRel / 100;\r\n                sumProfitEurAbsTemp += +date.profitEurAbs;\r\n                sumProfitEurRelTemp *= 1 + +date.profitEurRel / 100;\r\n            });\r\n\r\n            sumProfitUsdRelTemp = (sumProfitUsdRelTemp - 1) * 100;\r\n            sumProfitRubRelTemp = (sumProfitRubRelTemp - 1) * 100;\r\n            sumProfitEurRelTemp = (sumProfitEurRelTemp - 1) * 100;\r\n\r\n            yearProfit = {\r\n                ...yearProfit,\r\n                [Object.keys(allTickers)[i]]: {\r\n                    ...yearProfit[Object.keys(allTickers)[i]],\r\n                    [tickerNames[j]]: {\r\n                        sumProfitUsdAbs: sumProfitUsdAbsTemp,\r\n                        sumProfitUsdRel: sumProfitUsdRelTemp,\r\n                        sumProfitRubAbs: sumProfitRubAbsTemp,\r\n                        sumProfitRubRel: sumProfitRubRelTemp,\r\n                        sumProfitEurAbs: sumProfitEurAbsTemp,\r\n                        sumProfitEurRel: sumProfitEurRelTemp\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    return yearProfit;\r\n};\r\n\r\nexport const getWekklyPortfolioProfitAndCost = (allTickers, dates) => {\r\n    let wekklyPortfolioProfitAndCost = {};\r\n    if (dates.no_data) { return wekklyPortfolioProfitAndCost };\r\n    let prevPortfolioUsdTotal = undefined;\r\n    let prevPortfolioRubTotal = undefined;\r\n    let prevPortfolioEurTotal = undefined;\r\n\r\n    Object.keys(dates).forEach((date) => {\r\n        let portfolioUsdTotal = 0;\r\n        let portfolioUsdProfitAbs = 0;\r\n        let portfolioUsdProfitRel = 0;\r\n        let portfolioRubTotal = 0;\r\n        let portfolioRubProfitAbs = 0;\r\n        let portfolioRubProfitRel = 0;\r\n        let portfolioEurTotal = 0;\r\n        let portfolioEurProfitAbs = 0;\r\n        let portfolioEurProfitRel = 0;\r\n\r\n\r\n\r\n        Object.values(allTickers).forEach((type, i) => {\r\n\r\n            Object.values(type).forEach((ticker, j) => {\r\n                if (ticker.data[date] !== undefined) {\r\n                    portfolioUsdTotal += +ticker.data[date].usdTotal;\r\n                    portfolioUsdProfitAbs += +ticker.data[date].profitUsdAbs;\r\n                    portfolioRubTotal += +ticker.data[date].rubTotal;\r\n                    portfolioRubProfitAbs += +ticker.data[date].profitRubAbs;\r\n                    portfolioEurTotal += +ticker.data[date].eurTotal;\r\n                    portfolioEurProfitAbs += +ticker.data[date].profitEurAbs;\r\n\r\n                }\r\n            });\r\n        });\r\n\r\n        if (prevPortfolioUsdTotal !== undefined && prevPortfolioUsdTotal !== 0) {\r\n            portfolioUsdProfitRel = portfolioUsdProfitAbs / prevPortfolioUsdTotal * 100;\r\n            portfolioRubProfitRel = portfolioRubProfitAbs / prevPortfolioRubTotal * 100;\r\n            portfolioEurProfitRel = portfolioEurProfitAbs / prevPortfolioEurTotal * 100;\r\n        }\r\n\r\n        prevPortfolioUsdTotal = portfolioUsdTotal;\r\n        prevPortfolioRubTotal = portfolioRubTotal;\r\n        prevPortfolioEurTotal = portfolioEurTotal;\r\n\r\n        wekklyPortfolioProfitAndCost = {\r\n            ...wekklyPortfolioProfitAndCost,\r\n            [date]: {\r\n                portfolioUsdTotal: portfolioUsdTotal,\r\n                portfolioUsdProfitAbs: portfolioUsdProfitAbs,\r\n                portfolioUsdProfitRel: portfolioUsdProfitRel,\r\n                portfolioRubTotal: portfolioRubTotal,\r\n                portfolioRubProfitAbs: portfolioRubProfitAbs,\r\n                portfolioRubProfitRel: portfolioRubProfitRel,\r\n                portfolioEurTotal: portfolioEurTotal,\r\n                portfolioEurProfitAbs: portfolioEurProfitAbs,\r\n                portfolioEurProfitRel: portfolioEurProfitRel,\r\n            }\r\n        }\r\n    });\r\n\r\n    return wekklyPortfolioProfitAndCost;\r\n};\r\n\r\nexport const calculateYearPortfolioProfit = (wekklyPortfolioProfitAndCost, year) => {\r\n    let yearPortfolioProfit = {};\r\n\r\n    const yearResult = filterWeeklyResult(wekklyPortfolioProfitAndCost, year);\r\n    let yearProfitUsdAbs = 0;\r\n    let yearProfitUsdRel = 1;\r\n    let yearProfitRubAbs = 0;\r\n    let yearProfitRubRel = 1;\r\n    let yearProfitEurAbs = 0;\r\n    let yearProfitEurRel = 1;\r\n\r\n    Object.values(yearResult).forEach((date) => {\r\n        yearProfitUsdAbs += +date.portfolioUsdProfitAbs;\r\n        yearProfitUsdRel *= 1 + +date.portfolioUsdProfitRel / 100;\r\n        yearProfitRubAbs += +date.portfolioRubProfitAbs;\r\n        yearProfitRubRel *= 1 + +date.portfolioRubProfitRel / 100;\r\n        yearProfitEurAbs += +date.portfolioEurProfitAbs;\r\n        yearProfitEurRel *= 1 + +date.portfolioEurProfitRel / 100;\r\n    });\r\n\r\n    yearProfitUsdRel = (yearProfitUsdRel - 1) * 100;\r\n    yearProfitRubRel = (yearProfitRubRel - 1) * 100;\r\n    yearProfitEurRel = (yearProfitEurRel - 1) * 100;\r\n\r\n    yearPortfolioProfit = {\r\n        yearProfitUsdAbs: yearProfitUsdAbs,\r\n        yearProfitUsdRel: yearProfitUsdRel,\r\n        yearProfitRubAbs: yearProfitRubAbs,\r\n        yearProfitRubRel: yearProfitRubRel,\r\n        yearProfitEurAbs: yearProfitEurAbs,\r\n        yearProfitEurRel: yearProfitEurRel\r\n    }\r\n\r\n    return yearPortfolioProfit;\r\n};\r\n\r\nexport const getLastTickers = (tickers) => {\r\n    let tickerTable = {};\r\n\r\n    Object.keys(tickers).forEach((ticker) => {\r\n        const date = Object.keys(tickers[ticker].data)[Object.keys(tickers[ticker].data).length - 1];\r\n        tickerTable = {\r\n            ...tickerTable,\r\n            [ticker]: {\r\n                quantity: tickers[ticker].data[date].quantity,\r\n                rubCost: tickers[ticker].data[date].rubCost,\r\n                rubTotal: tickers[ticker].data[date].rubTotal,\r\n                usdCost: tickers[ticker].data[date].usdCost,\r\n                usdTotal: tickers[ticker].data[date].usdTotal,\r\n                eurCost: tickers[ticker].data[date].eurCost,\r\n                eurTotal: tickers[ticker].data[date].eurTotal,\r\n                currency: tickers[ticker].data[date].currency,\r\n                description: tickers[ticker].data[date].description\r\n            },\r\n        }\r\n    });\r\n\r\n    return tickerTable;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\nexport const addTicker = (ticker, date, quantity, currency, prevData) => {\r\n    let friday = +(new Date(date));\r\n    while ((new Date(friday)).getDay() !== 5){\r\n        friday += 86400000;\r\n    }\r\n    const tickerUrl = getHistoryUrl(ticker, friday, friday + 82800000);\r\n    const infoUrl = getInfoUrl(ticker);\r\n    let currencyTicker = '';\r\n    if (currency === 'rur') {currencyTicker = ''} else if (currency === 'usd') {currencyTicker = 'RUR'} else if (currency === 'eur') {currencyTicker = 'EUR_RUB'};\r\n    const currencyUrl = getHistoryUrl(currencyTicker, friday, friday + 82800000);\r\n    let currencyCourse = 1;\r\n\r\n        return fetch(currencyUrl)\r\n            .then(result => result.json())\r\n            .then(course =>{\r\n                if (course.errmsg === 'unknown_symbol'){\r\n                    currencyCourse = 1;\r\n                } else {\r\n                    currencyCourse = course.c[0];\r\n                }\r\n                return fetch(tickerUrl)\r\n                .then(result => result.json())\r\n                .then(data => {\r\n                    if(data.s === 'no_data'){ throw new Error ('Нет данных')}\r\n                    return fetch(infoUrl)\r\n                        .then(result => result.json())\r\n                        .then((info) => {\r\n                            if(prevData.ticker === undefined){\r\n                                const cost = (info.type !== 'bonds') ? data.c[0] : data.c[0] * 10;\r\n                                const total = (info.type !== 'bonds') ? data.c[0] * quantity : data.c[0] * quantity * 10;\r\n                                const roubleCost = (info.type !== 'bonds') ? data.c[0] * currencyCourse : data.c[0] * currencyCourse * 10;\r\n                                const roubleTotal = (info.type !== 'bonds') ? data.c[0] * currencyCourse * quantity : data.c[0] * currencyCourse * quantity * 10;\r\n                                if (isNaN(data.c[0])) {throw new Error('Нет данных')};\r\n                                return addTickerWithSaga(ticker,\r\n                                    info.description,\r\n                                    (new Date(friday)).toISOString().slice(0, 10),\r\n                                    quantity,\r\n                                    cost.toFixed(2),\r\n                                    total.toFixed(2),\r\n                                    roubleCost.toFixed(2),\r\n                                    roubleTotal.toFixed(2),\r\n                                    currency,\r\n                                    info.type,\r\n                                    0,\r\n                                    0,\r\n                                    0,\r\n                                    0);\r\n                            } else {\r\n                                const cost = (info.type !== 'bonds') ? data.c[0] : data.c[0] * 10;\r\n                                const total = (info.type !== 'bonds') ? data.c[0] * quantity : data.c[0] * quantity * 10;\r\n                                const roubleCost = (info.type !== 'bonds') ? data.c[0] * currencyCourse : data.c[0] * currencyCourse * 10;\r\n                                const roubleTotal = (info.type !== 'bonds') ? data.c[0] * currencyCourse * quantity : data.c[0] * currencyCourse * quantity * 10;\r\n                                const profitCurrencyAbs = (cost - prevData.cost) * prevData.quantity;\r\n                                const profitCurrencyRel = (cost - prevData.cost) / prevData.cost * 100;\r\n                                const profitRubAbs = (roubleCost - prevData.roubleCost) * prevData.quantity;\r\n                                const profitRubRel = (roubleCost - prevData.roubleCost) / prevData.roubleCost * 100;\r\n                                if (isNaN(data.c[0])) {throw new Error('Нет данных')};\r\n                                return addTickerWithSaga(ticker,\r\n                                    info.description,\r\n                                    (new Date(friday)).toISOString().slice(0, 10),\r\n                                    quantity, cost.toFixed(2),\r\n                                    total.toFixed(2),\r\n                                    roubleCost.toFixed(2),\r\n                                    roubleTotal.toFixed(2),\r\n                                    currency,\r\n                                    info.type,\r\n                                    profitCurrencyAbs.toFixed(2),\r\n                                    profitCurrencyRel.toFixed(2),\r\n                                    profitRubAbs.toFixed(2),\r\n                                    profitRubRel.toFixed(2));\r\n                            }\r\n\r\n\r\n                        })\r\n                        .catch(error => {\r\n                            console.log(error);\r\n                        })\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                })\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            })\r\n};\r\n*/\r\n\r\n\r\n/*\r\nexport const getTickerInfo = async (tickers, type) => {\r\n    const usdUrl = getHistoryUrl('RUR',null,null);\r\n    const eurUrl = getHistoryUrl('EUR_RUB',null,null);\r\n    const usdResult = await fetch(usdUrl);\r\n    const usdData = await usdResult.json();\r\n    const usdCurrency = usdData.c[0];\r\n    const eurResult = await fetch(eurUrl);\r\n    const eurData = await eurResult.json();\r\n    const eurCurrency = eurData.c[0];\r\n    let rubCost;\r\n    let rubTotal;\r\n    let usdCost;\r\n    let usdTotal;\r\n    let eurCost;\r\n    let eurTotal;\r\n\r\n    let tickerTable = {};\r\n    for (let ticker in tickers) {\r\n        const tickerUrl = getHistoryUrl(ticker,null,null);\r\n        const result = await fetch(tickerUrl);\r\n        const data = await result.json();\r\n\r\n        if (tickers[ticker].currency === 'rur'){\r\n            rubCost = data.c[0];\r\n            rubTotal = rubCost * tickers[ticker].quantity;\r\n            usdCost = rubCost / usdCurrency;\r\n            usdTotal = usdCost * tickers[ticker].quantity;\r\n            eurCost = rubCost / eurCurrency;\r\n            eurTotal = eurCost  * tickers[ticker].quantity;\r\n        } else if (tickers[ticker].currency === 'usd') {\r\n            usdCost = data.c[0];\r\n            usdTotal = usdCost * tickers[ticker].quantity;\r\n            rubCost = usdCost * usdCurrency;\r\n            rubTotal = rubCost * tickers[ticker].quantity;\r\n            eurCost = rubCost / eurCurrency;\r\n            eurTotal = eurCost  * tickers[ticker].quantity;\r\n        } else if (tickers[ticker].currency === 'eur') {\r\n            eurCost = data.c[0];\r\n            eurTotal = eurCost * tickers[ticker].quantity;\r\n            rubCost = eurCost * eurCurrency;\r\n            rubTotal = rubCost * tickers[ticker].quantity;\r\n            usdCost = rubCost / usdCurrency;\r\n            usdTotal = usdCost  * tickers[ticker].quantity;\r\n        }\r\n        if (type === 'bonds'){\r\n            rubCost *= 10;\r\n            rubTotal *= 10;\r\n            usdCost *= 10;\r\n            usdTotal *= 10;\r\n            eurCost *= 10;\r\n            eurTotal *= 10;\r\n        }\r\n\r\n        tickerTable = {...tickerTable,\r\n            [ticker]: {\r\n                quantity: tickers[ticker].quantity,\r\n                rubCost: rubCost,\r\n                rubTotal: rubTotal,\r\n                usdCost: usdCost,\r\n                usdTotal: usdTotal,\r\n                eurCost: eurCost,\r\n                eurTotal: eurTotal,\r\n                currency: tickers[ticker].currency,\r\n                description: tickers[ticker].description\r\n            },\r\n                }\r\n    }\r\n    return tickerTable;\r\n};\r\n*/\r\n","import React, { useState } from 'react';\n\nimport { useDispatch } from 'react-redux';\nimport { makeStyles } from '@material-ui/core';\nimport SearchList from '../SearchList'\nimport { addTicker, getSearchUrl } from '../../Functions/functions.js';\n\nconst useStyles = makeStyles((theme) => ({\n    form: {\n        maxWidth: '400px',\n        border: '1px solid black',\n        borderRadius: '10px',\n        display: 'flex',\n        flexDirection: 'column',\n        margin: '10px',\n    },\n    formSubmit: {\n        display: 'block',\n    },\n    searchItem: {\n        margin: '5px 10px',\n        marginBottom: '5px'\n    },\n    hidden: {\n        display: 'none',\n    },\n}));\n\nfunction SearchForm() {\n\n\n\n    const [ticker, setTicker] = useState('');\n    const [quantity, setQuantity] = useState('');\n    const [date, setDate] = useState('');\n    const [search, setSearch] = useState('');\n    const [searchResult, setSearchResult] = useState([]);\n    const [currency, setCurrency] = useState('rur');\n    const [manualCourse, setManualCourse] = useState(0);\n    const [isManual, setIsManual] = useState(false);\n    const [manualType, setManualType] = useState('bonds');\n    const [manualDescription, setManualDescription] = useState('');\n    const [manualHidden, setManualHidden] = useState(true);\n    const [bondNominal, setBondNominal] = useState(0);\n    const [couponOrDividend, setCouponOrDividend] = useState(0);\n\n    const handleTicker = (event) => {\n        setTicker(event.target.value);\n    };\n\n    const handleQuantity = (event) => {\n        setQuantity(event.target.value);\n    };\n\n    const handleDate = (event) => {\n        setDate(event.target.value);\n    };\n\n    const submitTicker = (event, searchedTicker) => {\n        event.preventDefault();\n        setTicker(searchedTicker);\n    }\n\n    const handleCurrency = (event) => {\n        setCurrency(event.target.value);\n    };\n\n    const handleManualCourse = (event) => {\n        setManualCourse(event.target.value);\n    };\n\n    const handleManualType = (event) => {\n        setManualType(event.target.value);\n    };\n\n    const handleManualDescription = (event) => {\n        setManualDescription(event.target.value);\n    };\n\n    const handleBondNominal = (event) => {\n        setBondNominal(event.target.value);\n    };\n\n    const handleCouponOrDividend = (event) => {\n        setCouponOrDividend(event.target.value);\n    };\n\n    const dispatch = useDispatch();\n\n    const handleSearch = (event) => {\n        setSearch(event.target.value);\n        const search = getSearchUrl(event.target.value);\n        fetch(search)\n            .then(result => result.json())\n            .then(data => {\n                let temp = [];\n                data.forEach((item, i) => {\n                    temp.push({\n                        ticker: item.symbol,\n                        descr: item.description,\n                        classcode: item.classcode\n                    });\n                });\n                setSearchResult(temp);\n            })\n            .catch(error => {\n                console.log(error);\n            })\n\n    };\n\n    const switchToManual = () => {\n        setIsManual(true);\n        setManualHidden(false);\n    };\n\n    const switchToAuto = () => {\n        setIsManual(false);\n        setManualHidden(true);\n    };\n\n\n    const buyTicker = async (event) => {\n        event.preventDefault();\n        setSearchResult([]);\n        const addAction = await addTicker(ticker, date, quantity, currency, {}, false, isManual, manualCourse, { type: manualType, description: manualDescription }, bondNominal, couponOrDividend);\n        addAction && dispatch(addAction);\n    };\n\n    const classes = useStyles();\n\n    return (\n        <form action=\"\" onSubmit={buyTicker} className={classes.form} label=\"Ticker\">\n            Ticker: <input type=\"text\" disabled={manualHidden} className={classes.searchItem} value={ticker} onChange={handleTicker} required></input>\n            <select required onChange={handleCurrency} className={classes.searchItem}>\n                <option value='rur'>rur</option>\n                <option value='usd'>usd</option>\n                <option value='eur'>eur</option>\n            </select>\n            Quantity: <input type=\"number\" className={classes.searchItem} value={quantity} onChange={handleQuantity} required></input>\n            Bond nominal: <input type=\"number\" className={classes.searchItem} value={bondNominal} onChange={handleBondNominal} required></input>\n            Coupon or dividend: <input type=\"number\" className={classes.searchItem} value={couponOrDividend} onChange={handleCouponOrDividend}></input>\n            <div className={classes.form + ' ' + (manualHidden ? classes.hidden : '')}>\n                Manual course: <input type=\"number\" className={classes.searchItem} value={manualCourse} onChange={handleManualCourse}></input>\n                \n                Manual description: <input type=\"text\" className={classes.searchItem} value={manualDescription} onChange={handleManualDescription}></input>\n                Manual type:\n                <select required onChange={handleManualType} className={classes.searchItem}>\n                    <option value='bonds'>bonds</option>\n                    <option value='stock'>stock</option>\n                    <option value='pif'>pif</option>\n                    <option value='etf'>etf</option>\n                    <option value='forex'>forex</option>\n                </select>\n                \n            </div>\n            Date: <input type=\"date\" className={classes.searchItem} value={date} onChange={handleDate} required></input>\n            <input type=\"submit\" className={classes.formSubmit + ' ' + classes.searchItem} value=\"Add\"></input>\n            <input type=\"button\" className={classes.formSubmit + ' ' + classes.searchItem + ' ' + (manualHidden ? '' : classes.hidden)} value=\"Manual\" onClick={switchToManual}></input>\n            <input type=\"button\" className={classes.formSubmit + ' ' + classes.searchItem + ' ' + (manualHidden ? classes.hidden : '')} value=\"Auto\" onClick={switchToAuto}></input>\n            Search: <input type=\"text\" disabled={!manualHidden} className={classes.searchItem} value={search} onChange={handleSearch}></input>\n            <SearchList className={classes.searchItem} searchResult={searchResult} submitTicker={submitTicker} />\n        </form>\n\n    );\n}\n\nexport default SearchForm;\n","export const DEL_TICKER_WITH_SAGA = 'TICKERS::DEL_TICKER_WITH_SAGA';\r\n\r\nexport const delTickerWithSaga = (ticker, marketType) => {\r\n    return {\r\n        type: DEL_TICKER_WITH_SAGA,\r\n        ticker, marketType\r\n    };\r\n};","import React, { useEffect, useState } from 'react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ttable: {\r\n\t\tmaxWidth: '100%'\r\n\t},\r\n\tticker: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tborder: '1px solid black',\r\n\t\tmargin: '10px',\r\n\t\toverflow: 'auto'\r\n\t},\r\n\ttickerName: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\twidth: '110px',\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'space-around',\r\n\t\tpadding: '5px',\r\n\t\tflexShrink: '0'\r\n\t},\r\n\ttickerTable: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row'\r\n\t},\r\n\ttickerDate: {\r\n\t\twidth: '100px',\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\tborderLeft: '1px solid black',\r\n\t\t'&:last-child': {\r\n\t\t\tborderRight: '1px solid black'\r\n\t\t}\r\n\t},\r\n\ttickerHeader: {\r\n\t\twidth: '200px',\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\tborderLeft: '1px solid black',\r\n\t\t'&:last-child': {\r\n\t\t\tborderRight: '1px solid black'\r\n\t\t}\r\n\t},\r\n\ttickerDateCell: {\r\n\t\tborderBottom: '1px solid black',\r\n\t\tmargin: '0',\r\n\t\tpadding: '5px',\r\n\t\t'&:last-child': {\r\n\t\t\tborderBottom: 'none'\r\n\t\t}\r\n\t},\r\n\tgreen: {\r\n\t\tbackgroundColor: '\t#66CC66',\r\n\t},\r\n\tred: {\r\n\t\tbackgroundColor: '#FF6666',\r\n\t},\r\n}));\r\n\r\n\r\n\r\nfunction Ticker(props) {\r\n\r\n\tconst [sumProfitUsdAbs, setSumProfitUsdAbs] = useState(0);\r\n\tconst [sumProfitUsdRel, setSumProfitUsdRel] = useState(1);\r\n\tconst [sumProfitRubAbs, setSumProfitRubAbs] = useState(0);\r\n\tconst [sumProfitRubRel, setSumProfitRubRel] = useState(1);\r\n\tconst [sumProfitEurAbs, setSumProfitEurAbs] = useState(0);\r\n\tconst [sumProfitEurRel, setSumProfitEurRel] = useState(1);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet sumProfitUsdAbsTemp = 0;\r\n\t\tlet sumProfitUsdRelTemp = 1;\r\n\t\tlet sumProfitRubAbsTemp = 0;\r\n\t\tlet sumProfitRubRelTemp = 1;\r\n\t\tlet sumProfitEurAbsTemp = 0;\r\n\t\tlet sumProfitEurRelTemp = 1;\r\n\t\tObject.values(props.ticker.data).forEach((date) => {\r\n\t\t\tsumProfitUsdAbsTemp += +date.profitUsdAbs;\r\n\t\t\tsumProfitUsdRelTemp *= 1 + date.profitUsdRel / 100;\r\n\t\t\tsumProfitRubAbsTemp += +date.profitRubAbs;\r\n\t\t\tsumProfitRubRelTemp *= 1 + date.profitRubRel / 100;\r\n\t\t\tsumProfitEurAbsTemp += +date.profitEurAbs;\r\n\t\t\tsumProfitEurRelTemp *= 1 + date.profitEurRel / 100;\r\n\t\t});\r\n\t\tsumProfitUsdRelTemp = (sumProfitUsdRelTemp - 1) * 100;\r\n\t\tsumProfitRubRelTemp = (sumProfitRubRelTemp - 1) * 100;\r\n\t\tsumProfitEurRelTemp = (sumProfitEurRelTemp - 1) * 100;\r\n\r\n\t\tsetSumProfitUsdAbs(sumProfitUsdAbsTemp);\r\n\t\tsetSumProfitUsdRel(sumProfitUsdRelTemp);\r\n\t\tsetSumProfitRubAbs(sumProfitRubAbsTemp);\r\n\t\tsetSumProfitRubRel(sumProfitRubRelTemp);\r\n\t\tsetSumProfitEurAbs(sumProfitEurAbsTemp);\r\n\t\tsetSumProfitEurRel(sumProfitEurRelTemp);\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [props]);\r\n\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<div className={classes.tickerTable}>\r\n\t\t\t<div className={classes.tickerHeader}>\r\n\t\t\t\t<p className={classes.tickerDateCell}>Дата</p>\r\n\t\t\t\t<p className={classes.tickerDateCell}>Количество</p>\r\n\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell}>Стоимость в $</p> : '')}\r\n\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell}>Общая стоимость в $</p> : '')}\r\n\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell}>Стоимость в ₽</p> : '')}\r\n\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell}>Общая стоимость в ₽</p> : '')}\r\n\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell}>Стоимость в €</p> : '')}\r\n\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell}>Общая стоимость в €</p> : '')}\r\n\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell}>Доходность в $, абс</p> : '')}\r\n\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell}>Доходность в $, %</p> : '')}\r\n\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell}>Доходность в ₽, абс</p> : '')}\r\n\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell}>Доходность в ₽, %</p> : '')}\r\n\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell}>Доходность в €, абс</p> : '')}\r\n\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell}>Доходность в €, %</p> : '')}\r\n\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell}>Дивиденды/Купоны в $, абс</p> : '')}\r\n\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell}>Дивиденды/Купоны в ₽, абс</p> : '')}\r\n\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell}>Дивиденды/Купоны в €, абс</p> : '')}\r\n\r\n\t\t\t</div>\r\n\t\t\t{Object.values(props.ticker.data).map((date, i) =>\r\n\t\t\t\t<div key={date.ticker + Object.keys(props.ticker.data)[i]} className={classes.tickerDate}>\r\n\t\t\t\t\t<p className={classes.tickerDateCell}>{Object.keys(props.ticker.data)[i]}</p>\r\n\t\t\t\t\t<p className={classes.tickerDateCell}>{date.quantity}</p>\r\n\t\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell}>{(+date.usdCost).toFixed(4)}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell}>{(+date.usdTotal).toFixed(2)}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell}>{(+date.rubCost).toFixed(4)}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell}>{(+date.rubTotal).toFixed(2)}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell}>{(+date.eurCost).toFixed(4)}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell}>{(+date.eurTotal).toFixed(2)}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell + ' ' + (date.profitUsdAbs >= 0 ? classes.green : classes.red)}>{(+date.profitUsdAbs).toFixed(2) + ' $'}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell + ' ' + (date.profitUsdAbs >= 0 ? classes.green : classes.red)}>{(+date.profitUsdRel).toFixed(2) + ' %'}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell + ' ' + (date.profitRubAbs >= 0 ? classes.green : classes.red)}>{(+date.profitRubAbs).toFixed(2) + ' ₽'}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell + ' ' + (date.profitRubAbs >= 0 ? classes.green : classes.red)}>{(+date.profitRubRel).toFixed(2) + ' %'}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell + ' ' + (date.profitEurAbs >= 0 ? classes.green : classes.red)}>{(+date.profitEurAbs).toFixed(2) + ' €'}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell + ' ' + (date.profitEurAbs >= 0 ? classes.green : classes.red)}>{(+date.profitEurRel).toFixed(2) + ' %'}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell}>{(+date.couponOrDividendUsd).toFixed(2)}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell}>{(+date.couponOrDividendRub).toFixed(2)}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell}>{(+date.couponOrDividendEur).toFixed(2)}</p> : '')}\r\n\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<div className={classes.tickerDate}>\r\n\t\t\t\t<p className={classes.tickerDateCell}>-</p>\r\n\t\t\t\t<p className={classes.tickerDateCell}>-</p>\r\n\t\t\t\t<p className={classes.tickerDateCell}>-</p>\r\n\t\t\t\t<p className={classes.tickerDateCell}>-</p>\r\n\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell + ' ' + (sumProfitUsdAbs >= 0 ? classes.green : classes.red)}>{sumProfitUsdAbs.toFixed(2) + ' $'}</p> : '')}\r\n\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell + ' ' + (sumProfitUsdAbs >= 0 ? classes.green : classes.red)}>{sumProfitUsdRel.toFixed(2) + ' %'}</p> : '')}\r\n\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell + ' ' + (sumProfitRubAbs >= 0 ? classes.green : classes.red)}>{sumProfitRubAbs.toFixed(2) + ' ₽'}</p> : '')}\r\n\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell + ' ' + (sumProfitRubAbs >= 0 ? classes.green : classes.red)}>{sumProfitRubRel.toFixed(2) + ' %'}</p> : '')}\r\n\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell + ' ' + (sumProfitEurAbs >= 0 ? classes.green : classes.red)}>{sumProfitEurAbs.toFixed(2) + ' €'}</p> : '')}\r\n\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell + ' ' + (sumProfitEurAbs >= 0 ? classes.green : classes.red)}>{sumProfitEurRel.toFixed(2) + ' %'}</p> : '')}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\nconst TickerPure = React.memo(Ticker);\r\nexport default TickerPure;","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useDispatch } from 'react-redux';\nimport { delTickerWithSaga } from '../../store/actions/delTicker';\nimport Ticker from '../Ticker';\n\nconst useStyles = makeStyles((theme) => ({\n\ttable: {\n\t\tmaxWidth: '100%'\n\t},\n\tticker: {\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'row',\n\t\tborder: '1px solid black',\n\t\tmargin: '10px',\n\t\toverflow: 'auto'\n\t},\n\tdescription:{\n\t\tmargin: '5px'\n\t},\n\ttickerName: {\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\twidth: '110px',\n\t\talignItems: 'center',\n\t\tjustifyContent: 'space-around',\n\t\tpadding: '5px',\n\t\tflexShrink: '0'\n\t},\n}));\n\nfunction Tickers(props) {\n\tconst dispatch = useDispatch();\n\n\tconst delTicker = (ticker, marketType) => {\n\t\tdispatch(delTickerWithSaga(ticker, marketType));\n\t};\n\n\tconst classes = useStyles();\n\n\tconst filteredTickers = Object.values(props.filteredTickers || {});\n\tconst filteredTickersNames = Object.keys(props.filteredTickers || {});\n\n\treturn (\n\t\t<div>\n\t\t\t<div className={classes.table}>\n\t\t\t\t{filteredTickers.map((ticker, i) =>\n\t\t\t\t\t(Object.keys(ticker.data).length !== 0)&&(<div key={filteredTickersNames[i]} className={classes.ticker}>\n\t\t\t\t\t\t<div className={classes.tickerName}>\n\t\t\t\t\t\t\t<p className={classes.description}>{filteredTickersNames[i]}</p>\n\t\t\t\t\t\t\t<p className={classes.description}>{ticker.data[Object.keys(ticker.data)[Object.keys(ticker.data).length - 1]].description}</p>\n\t\t\t\t\t\t\t<p className={classes.description}>{ticker.data[Object.keys(ticker.data)[Object.keys(ticker.data).length - 1]].currency}</p>\n\t\t\t\t\t\t\t<button onClick={() => delTicker(filteredTickersNames[i], props.type)}>del</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Ticker ticker={ticker}  currency={props.currency}/>\n\n\t\t\t\t\t</div>)\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\nconst TickersPure = React.memo(Tickers);\nexport default TickersPure;","import React, { useEffect, useState } from 'react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ttable: {\r\n\t\tmaxWidth: '100%'\r\n\t},\r\n\tticker: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tborder: '1px solid black',\r\n\t\tmargin: '10px',\r\n\t\toverflow: 'auto'\r\n\t},\r\n\ttickerName: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\twidth: '110px',\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'space-around',\r\n\t\tpadding: '5px',\r\n\t\tflexShrink: '0'\r\n\t},\r\n\ttickerTable: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n        margin: '10px',\r\n\t},\r\n\ttickerDate: {\r\n\t\twidth: '100px',\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\tborderLeft: '1px solid black',\r\n\t\t'&:last-child': {\r\n\t\t\tborderRight: '1px solid black'\r\n\t\t}\r\n\t},\r\n    tickerHeader: {\r\n        width:'321px',\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\tborderLeft: '1px solid black',\r\n\t\t'&:last-child': {\r\n\t\t\tborderRight: '1px solid black'\r\n\t\t}\r\n\t},\r\n\ttickerDateCell: {\r\n\t\tborderBottom: '1px solid black',\r\n\t\tmargin: '0',\r\n\t\tpadding: '5px',\r\n\t\t'&:last-child': {\r\n\t\t\tborderBottom: 'none'\r\n\t\t}\r\n\t},\r\n\tgreen: {\r\n\t\tbackgroundColor: '\t#66CC66',\r\n\t},\r\n\tred: {\r\n\t\tbackgroundColor: '#FF6666',\r\n\t},\r\n}));\r\n\r\n\r\n\r\nfunction WeeklyResult(props) {\r\n\r\n\tconst classes = useStyles();\r\n\r\n    const [portfolioUsdTotal, setPortfolioUsdTotal] = useState(0);\r\n    const [sumProfitUsdAbs, setSumProfitUsdAbs] = useState(0);\r\n\tconst [sumProfitUsdRel, setSumProfitUsdRel] = useState(1);\r\n    const [portfolioRubTotal, setPortfolioRubTotal] = useState(0);\r\n\tconst [sumProfitRubAbs, setSumProfitRubAbs] = useState(0);\r\n\tconst [sumProfitRubRel, setSumProfitRubRel] = useState(1);\r\n    const [portfolioEurTotal, setPortfolioEurTotal] = useState(0);\r\n\tconst [sumProfitEurAbs, setSumProfitEurAbs] = useState(0);\r\n\tconst [sumProfitEurRel, setSumProfitEurRel] = useState(1);\r\n\r\n\tuseEffect(() => {\r\n        let portfolioUsdTotalTemp = 0;\r\n\t\tlet sumProfitUsdAbsTemp = 0;\r\n\t\tlet sumProfitUsdRelTemp = 1;\r\n        let portfolioRubTotalTemp = 0;\r\n\t\tlet sumProfitRubAbsTemp = 0;\r\n\t\tlet sumProfitRubRelTemp = 1;\r\n        let portfolioEurTotalTemp = 0;\r\n\t\tlet sumProfitEurAbsTemp = 0;\r\n\t\tlet sumProfitEurRelTemp = 1;\r\n\t\tObject.values(props.weeklyResult).forEach((date) => {\r\n            portfolioUsdTotalTemp = +date.portfolioUsdTotal;\r\n\t\t\tsumProfitUsdAbsTemp += +date.portfolioUsdProfitAbs;\r\n\t\t\tsumProfitUsdRelTemp *= 1 + date.portfolioUsdProfitRel/100;\r\n            portfolioRubTotalTemp = +date.portfolioRubTotal;\r\n\t\t\tsumProfitRubAbsTemp += +date.portfolioRubProfitAbs;\r\n\t\t\tsumProfitRubRelTemp *= 1 + date.portfolioRubProfitRel/100;\r\n            portfolioEurTotalTemp = +date.portfolioEurTotal;\r\n\t\t\tsumProfitEurAbsTemp += +date.portfolioEurProfitAbs;\r\n\t\t\tsumProfitEurRelTemp *= 1 + date.portfolioEurProfitRel/100;\r\n\t\t});\r\n\t\tsumProfitUsdRelTemp = (sumProfitUsdRelTemp - 1) * 100;\r\n\t\tsumProfitRubRelTemp = (sumProfitRubRelTemp - 1) * 100;\r\n\t\tsumProfitEurRelTemp = (sumProfitEurRelTemp - 1) * 100;\r\n\r\n        setPortfolioUsdTotal(portfolioUsdTotalTemp);\r\n\t\tsetSumProfitUsdAbs(sumProfitUsdAbsTemp);\r\n\t\tsetSumProfitUsdRel(sumProfitUsdRelTemp);\r\n        setPortfolioRubTotal(portfolioRubTotalTemp);\r\n\t\tsetSumProfitRubAbs(sumProfitRubAbsTemp);\r\n\t\tsetSumProfitRubRel(sumProfitRubRelTemp);\r\n        setPortfolioEurTotal(portfolioEurTotalTemp);\r\n\t\tsetSumProfitEurAbs(sumProfitEurAbsTemp);\r\n\t\tsetSumProfitEurRel(sumProfitEurRelTemp);\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [props]);\r\n\r\n\treturn (\r\n\t\t<div className={classes.tickerTable}>\r\n            <div className={classes.tickerHeader}>\r\n                <p className={classes.tickerDateCell}>Дата</p>\r\n\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell}>Стоимость в $</p> : '')}\r\n\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell}>Доходность абс в $ </p> : '')}\r\n                {(props.currency === 'usd' ? <p className={classes.tickerDateCell}>Доходность % в $ </p> : '')}\r\n\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell}>Стоимость в ₽</p> : '')}\r\n\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell}>Доходность абс в ₽</p> : '')}\r\n                {(props.currency === 'rur' ? <p className={classes.tickerDateCell}>Доходность % в ₽</p> : '')}\r\n\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell}>Стоимость в €</p> : '')}\r\n\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell}>Доходность абс в €</p> : '')}\r\n                {(props.currency === 'eur' ? <p className={classes.tickerDateCell}>Доходность % в €</p> : '')}\r\n            </div>\r\n\t\t\t{Object.values(props.weeklyResult).map((date, i) =>\r\n\t\t\t\t<div key={Object.keys(props.weeklyResult)[i]} className={classes.tickerDate}>\r\n\t\t\t\t\t<p className={classes.tickerDateCell}>{Object.keys(props.weeklyResult)[i]}</p>\r\n\t\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell}>{date.portfolioUsdTotal.toFixed(2) + ' $'}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell + ' ' + (date.portfolioUsdProfitAbs >= 0 ? classes.green : classes.red)}>{date.portfolioUsdProfitAbs.toFixed(2) + ' $'}</p> : '')}\r\n                    {(props.currency === 'usd' ? <p className={classes.tickerDateCell + ' ' + (date.portfolioUsdProfitAbs >= 0 ? classes.green : classes.red)}>{date.portfolioUsdProfitRel.toFixed(2) + ' %'}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell}>{date.portfolioRubTotal.toFixed(2) + ' ₽'}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell + ' ' + (date.portfolioRubProfitAbs >= 0 ? classes.green : classes.red)}>{date.portfolioRubProfitAbs.toFixed(2) + ' ₽'}</p> : '')}\r\n                    {(props.currency === 'rur' ? <p className={classes.tickerDateCell + ' ' + (date.portfolioRubProfitAbs >= 0 ? classes.green : classes.red)}>{date.portfolioRubProfitRel.toFixed(2) + ' %'}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell}>{date.portfolioEurTotal.toFixed(2) + ' €'}</p> : '')}\r\n\t\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell + ' ' + (date.portfolioEurProfitAbs >= 0 ? classes.green : classes.red)}>{date.portfolioEurProfitAbs.toFixed(2) + ' €'}</p> : '')}\r\n                    {(props.currency === 'eur' ? <p className={classes.tickerDateCell + ' ' + (date.portfolioEurProfitAbs >= 0 ? classes.green : classes.red)}>{date.portfolioEurProfitRel.toFixed(2) + ' %'}</p> : '')}\r\n\t\t\t\t</div>\r\n\t    \t)}\r\n            <div className={classes.tickerDate}>\r\n\t\t\t\t<p className={classes.tickerDateCell}>-</p>\r\n                {(props.currency === 'usd' ? <p className={classes.tickerDateCell}>{portfolioUsdTotal.toFixed(2) + ' $'}</p> : '')}\r\n\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell + ' ' + (sumProfitUsdAbs >= 0 ? classes.green : classes.red)}>{sumProfitUsdAbs.toFixed(2) + ' $'}</p> : '')}\r\n\t\t\t\t{(props.currency === 'usd' ? <p className={classes.tickerDateCell + ' ' + (sumProfitUsdAbs >= 0 ? classes.green : classes.red)}>{sumProfitUsdRel.toFixed(2) + ' %'}</p> : '')}\r\n                {(props.currency === 'rur' ? <p className={classes.tickerDateCell}>{portfolioRubTotal.toFixed(2) + ' ₽'}</p> : '')}\r\n\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell + ' ' + (sumProfitRubAbs >= 0 ? classes.green : classes.red)}>{sumProfitRubAbs.toFixed(2) + ' ₽'}</p> : '')}\r\n\t\t\t\t{(props.currency === 'rur' ? <p className={classes.tickerDateCell + ' ' + (sumProfitRubAbs >= 0 ? classes.green : classes.red)}>{sumProfitRubRel.toFixed(2) + ' %'}</p> : '')}\r\n                {(props.currency === 'eur' ? <p className={classes.tickerDateCell}>{portfolioEurTotal.toFixed(2) + ' €'}</p> : '')}\r\n\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell + ' ' + (sumProfitEurAbs >= 0 ? classes.green : classes.red)}>{sumProfitEurAbs.toFixed(2) + ' €'}</p> : '')}\r\n\t\t\t\t{(props.currency === 'eur' ? <p className={classes.tickerDateCell + ' ' + (sumProfitEurAbs >= 0 ? classes.green : classes.red)}>{sumProfitEurRel.toFixed(2) + ' %'}</p> : '')}\r\n            </div>\r\n    \t</div>\r\n\t);\r\n}\r\nconst WeeklyResultPure = React.memo(WeeklyResult);\r\nexport default WeeklyResultPure;","export const INIT_USER_DATA = 'USER::INIT_USER_DATA';\n\nexport const initUserData = (userData) => {\n    return {\n        type: INIT_USER_DATA,\n        userData\n    };\n};\n\nexport const INIT_INIT_USER_DATA_WITH_SAGA = 'USER::INIT_USER_DATA_WITH_SAGA';\n\nexport const initUserDataWithSaga = () => {\n    return {\n        type: INIT_INIT_USER_DATA_WITH_SAGA,\n    };\n};","export const URL_NEWS = \"https://api.currentsapi.services/v1/latest-news?language=ru&apiKey=6qmiCnF5XcC6Zt8s4fj5gRg9kBKB58XFqw8Rw6QqsYOtD1M8\";\r\nexport const URL_WEATHER = 'https://api.openweathermap.org/data/2.5/weather?id=498817&appid=f0694cc740867c7440b3be0552c0bf8f';\r\n\r\nexport const HOMEPAGE = \"\";\r\n\r\nexport const MKRKETSTACK_APIKEY ='880bb985b6ee8c60422ef715002a485b';\r\n\r\nexport const EMPTY_OBJECT = {};","import { EMPTY_OBJECT } from \"../../utils/constants\"\r\n\r\n\r\nexport function getStocks(state) { if (state.userData.stock) { return state.userData.tickers.stock} else { return EMPTY_OBJECT } };\r\nexport function getPif(state) { if (state.userData.pif) {return state.userData.tickers.pif}  else {return EMPTY_OBJECT} };\r\nexport function getEtf(state) { if (state.userData.etf) {return state.userData.tickers.etf}  else {return EMPTY_OBJECT} };\r\nexport function getBonds(state) { if (state.userData.bonds) {return state.userData.tickers.bonds} else {return EMPTY_OBJECT} };\r\nexport function getForex(state) { if (state.userData.forex) {return state.userData.tickers.forex} else { return EMPTY_OBJECT} };\r\nexport function getAlltickers(state) { if (state.userData.tickers) {return state.userData.tickers} else { return EMPTY_OBJECT} };\r\n\r\nexport function getFilteredStocks(state) { if (state.filteredTickers.stock) { return state.filteredTickers.stock} else { return EMPTY_OBJECT } };\r\nexport function getFilteredPif(state) { if (state.filteredTickers.pif) {return state.filteredTickers.pif}  else {return EMPTY_OBJECT} };\r\nexport function getFilteredEtf(state) { if (state.filteredTickers.etf) {return state.filteredTickers.etf}  else {return EMPTY_OBJECT} };\r\nexport function getFilteredBonds(state) { if (state.filteredTickers.bonds) {return state.filteredTickers.bonds} else {return EMPTY_OBJECT} };\r\nexport function getFilteredForex(state) { if (state.filteredTickers.forex) {return state.filteredTickers.forex} else { return EMPTY_OBJECT} };\r\n\r\nexport function getDates(state) { if (state.userData.dates) {return state.userData.dates} else { return EMPTY_OBJECT} };","export const AUTOCOMPLETE_TICKER_WITH_SAGA = 'TICKERS::AUTOCOMPLETE_TICKER_WITH_SAGA';\r\n\r\nexport const autoCompleteTickerWithSaga = (ticker, date, quantity, currency, prevData, bondNominal) => {\r\n    return {\r\n        type: AUTOCOMPLETE_TICKER_WITH_SAGA,\r\n        ticker, date, quantity, currency, prevData, bondNominal\r\n    };\r\n};","export const CALCULATE_YEAR_PROFIT = 'PROFILE::CALCULATE_YEAR_PROFIT';\r\n\r\nexport const calculateYearProfit = ( yearProfit ) => {\r\n    return {\r\n        type: CALCULATE_YEAR_PROFIT,\r\n        yearProfit\r\n    };\r\n};\r\n\r\nexport const CALCULATE_YEAR_PROFIT_WITH_SAGA = 'PROFILE::CALCULATE_YEAR_PROFIT_WITH_SAGA';\r\n\r\nexport const calculateYearProfitWithSaga = (allTickers ) => {\r\n    return {\r\n        type: CALCULATE_YEAR_PROFIT_WITH_SAGA,\r\n        allTickers  \r\n    };\r\n};","export const CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST = 'PROFILE::CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST';\r\n\r\nexport const calculateWeeklyPortfolioProfitAndCost = ( weeklyPortfolioProfitAndCost ) => {\r\n    return {\r\n        type: CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST,\r\n        weeklyPortfolioProfitAndCost\r\n    };\r\n};\r\n\r\nexport const CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST_WITH_SAGA = 'PROFILE::CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST_WITH_SAGA';\r\n\r\nexport const calculateWeeklyPortfolioProfitAndCostWithSaga = (allTickers, dates ) => {\r\n    return {\r\n        type: CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST_WITH_SAGA,\r\n        allTickers,\r\n        dates  \r\n    };\r\n};","import { getLastTickers } from \"../../Functions/functions\"\r\nimport { EMPTY_OBJECT } from \"../../utils/constants\"\r\n\r\nexport function getPortfolio(state) { if (state.userData.portfolio) { return state.userData.portfolio} else { return EMPTY_OBJECT } };\r\n\r\nexport function getMyProfileCost(state) { if (state.currentUserData.portfolioCost) { return state.currentUserData.portfolioCost} else { return EMPTY_OBJECT } };\r\n\r\nexport function getMyYearProfit(state) { if (state.currentUserData.yearProfit) { return state.currentUserData.yearProfit} else { return EMPTY_OBJECT } }\r\n\r\nexport function getWeeklyPortfolioProfitAndCost(state) { if (state.currentUserData.weeklyPortfolioProfitAndCost) { return state.currentUserData.weeklyPortfolioProfitAndCost} else { return EMPTY_OBJECT } }\r\n\r\nexport function getLastStock(state) { if (state.userData.tickers.stock) { return getLastTickers(state.userData.tickers.stock)} else { return EMPTY_OBJECT } };\r\nexport function getLastPif(state) { if (state.userData.tickers.pif) { return getLastTickers(state.userData.tickers.pif)} else { return EMPTY_OBJECT } };\r\nexport function getLastEtf(state) { if (state.userData.tickers.etf) { return getLastTickers(state.userData.tickers.etf)} else { return EMPTY_OBJECT } };\r\nexport function getLastBonds(state) { if (state.userData.tickers.bonds) { return getLastTickers(state.userData.tickers.bonds)} else { return EMPTY_OBJECT } };\r\nexport function getLastForex(state) { if (state.userData.tickers.forex) { return getLastTickers(state.userData.tickers.forex)} else { return EMPTY_OBJECT } };","import React, { useEffect, useState } from 'react';\nimport SearchForm from '../SearchForm';\n\nimport Tickers from '../Tickers';\nimport WeeklyResult from '../WeeklyResult';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { initUserDataWithSaga } from '../../store/actions/initUserData';\nimport { getAlltickers, getDates, getFilteredBonds, getFilteredEtf, getFilteredForex, getFilteredPif, getFilteredStocks } from '../../store/selectors/tickersSelectors';\nimport { makeStyles } from '@material-ui/core';\nimport { filterData, filterWeeklyResult } from '../../Functions/functions';\nimport { autoCompleteTickerWithSaga } from '../../store/actions/autoComplete';\nimport { calculateYearProfitWithSaga } from '../../store/actions/calculateYearProfit';\nimport { calculateWeeklyPortfolioProfitAndCostWithSaga } from '../../store/actions/calculateWeeklyPortfolioProfitAndCost';\nimport { getWeeklyPortfolioProfitAndCost } from '../../store/selectors/profileSelectors';\n\nconst useStyles = makeStyles((theme) => ({\n    App: {\n        margin: '0 auto'\n    },\n    mainContainer: {\n        position: 'relative',\n        display: 'flex',\n        flexDirection: 'column',\n        backgroundColor: '#EEE'\n    },\n    searchItem: {\n        position: 'sticky',\n        top: '0',\n        maxWidth: '400px',\n        margin: '5px 10px',\n        marginBottom: '5px'\n    },\n    date: {\n        top: '20px',\n    }\n}));\n\nfunction Main() {\n\n    const dispatch = useDispatch();\n\n    const filteredForex = useSelector(getFilteredForex);\n    const filteredStocks = useSelector(getFilteredStocks);\n    const filteredPif = useSelector(getFilteredPif);\n    const filteredEtf = useSelector(getFilteredEtf);\n    const filteredBonds = useSelector(getFilteredBonds);\n    const allTickers = useSelector(getAlltickers);\n    const dates = useSelector(getDates);\n    const weeklyResults = useSelector(getWeeklyPortfolioProfitAndCost);\n\n    const [currency, setCurrency] = useState('rur');\n    const [date, setDate] = useState((new Date()).toISOString().slice(0, 7));\n    const [filteredWeeklyResult, setFilteredWeeklyResult] = useState({});\n\n    const handleDate = (event) => {\n        setDate(event.target.value);\n    };\n\n    const handleCurrency = (event) => {\n        setCurrency(event.target.value);\n    };\n\n    useEffect(() => {\n        dispatch(initUserDataWithSaga());\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n\n        Object.values(allTickers).forEach((type) => {\n            Object.values(type).forEach((ticker, i) => {\n                const prevData = {\n                    ticker: Object.keys(type)[i],\n                    quantity: Object.values(ticker.data)[Object.keys(ticker.data).length - 1].quantity,\n                    usdCost: Object.values(ticker.data)[Object.keys(ticker.data).length - 1].usdCost,\n                    usdTotal: Object.values(ticker.data)[Object.keys(ticker.data).length - 1].usdTotal,\n                    rubCost: Object.values(ticker.data)[Object.keys(ticker.data).length - 1].rubCost,\n                    rubTotal: Object.values(ticker.data)[Object.keys(ticker.data).length - 1].rubTotal,\n                    eurCost: Object.values(ticker.data)[Object.keys(ticker.data).length - 1].eurCost,\n                    eurTotal: Object.values(ticker.data)[Object.keys(ticker.data).length - 1].eurTotal,\n                };\n                dispatch(\n                    autoCompleteTickerWithSaga(\n                        Object.keys(type)[i],\n                        Object.keys(ticker.data)[Object.keys(ticker.data).length - 1],\n                        Object.values(ticker.data)[Object.keys(ticker.data).length - 1].quantity,\n                        Object.values(ticker.data)[Object.keys(ticker.data).length - 1].currency,\n                        prevData,\n                        Object.values(ticker.data)[Object.keys(ticker.data).length - 1].bondNominal\n                    )\n                );\n            });\n        });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        dispatch(\n            filterData(\n                allTickers,\n                new Date(date).getFullYear(),\n                new Date(date).getMonth()\n            )\n        );\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [date, allTickers]);\n\n    useEffect(() => {\n        setFilteredWeeklyResult(\n            filterWeeklyResult(\n                weeklyResults,\n                new Date(date).getFullYear(),\n                new Date(date).getMonth()\n            )\n        );\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [date]);\n\n    useEffect(() => {\n        dispatch(calculateYearProfitWithSaga(allTickers));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [dispatch]);\n\n    useEffect(() => {\n        dispatch(calculateWeeklyPortfolioProfitAndCostWithSaga(allTickers, dates));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [dates]);\n\n\n    const classes = useStyles();\n\n    return (\n        <div className={classes.App + ' ' + classes.mainContainer}>\n            <select required onChange={handleCurrency} className={classes.searchItem}>\n                <option value='rur'>rur</option>\n                <option value='usd'>usd</option>\n                <option value='eur'>eur</option>\n            </select>\n            <input type='month' onChange={handleDate} value={date} className={classes.searchItem + ' ' + classes.date} />\n            <SearchForm />\n            <div>Валюта</div>\n            <Tickers filteredTickers={filteredForex} type='forex' currency={currency} date={date} />\n            <div>Акции</div>\n            <Tickers filteredTickers={filteredStocks} type='stock' currency={currency} date={date} />\n            <div>Фонды</div>\n            <Tickers filteredTickers={filteredPif} type='pif' currency={currency} date={date} />\n            <Tickers filteredTickers={filteredEtf} type='etf' currency={currency} date={date} />\n            <div>Облигации</div>\n            <Tickers filteredTickers={filteredBonds} type='bonds' currency={currency} date={date} />\n            <div>Сумма</div>\n            <WeeklyResult weeklyResult={filteredWeeklyResult} currency={currency} date={date} />\n        </div>\n    );\n}\nconst MainPure = React.memo(Main);\nexport default MainPure;","import React from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport {HOMEPAGE} from '../utils/constants';\n\nexport default function PrivateRoute({ authenticated, children }) {\n  return authenticated ? (\n    children\n  ) : (\n    <Navigate to={{ pathname: `${HOMEPAGE}/login` }} />\n  );\n};","import React from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { HOMEPAGE } from '../utils/constants';\n\nexport default function PublicRoute({ authenticated, children }) {\n  return !authenticated ?  children : <Navigate to={`${HOMEPAGE}/`} />;\n};","import React, { useState, useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { auth } from '../../services/firebase';\n\nfunction SignUp() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const handlePassChange = useCallback((e) => {\n    setPassword(e.target.value);\n  },[]);\n\n  const handleEmailChange = useCallback((e) => {\n    setEmail(e.target.value);\n  },[]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n\n    try {\n      await createUserWithEmailAndPassword(auth, email, password);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        <p>Fill in the form below to register new account.</p>\n        <div>\n          <input\n            placeholder=\"Email\"\n            name=\"email\"\n            type=\"email\"\n            onChange={handleEmailChange}\n            value={email}\n          />\n        </div>\n        <div>\n          <input\n            placeholder=\"Password\"\n            name=\"password\"\n            onChange={handlePassChange}\n            value={password}\n            type=\"password\"\n          />\n        </div>\n        <div>\n          {error && <p>{error}</p>}\n          <button type=\"submit\">Login</button>\n        </div>\n        <hr />\n        <p>\n          Already have an account? <Link to=\"/gbCourse5Hw/login\">Sign in</Link>\n        </p>\n      </form>\n    </div>\n  );\n};\nexport default SignUp;","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\nimport { auth } from '../../services/firebase';\n\nfunction LogIn() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const handlePassChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n\n    try {\n      await signInWithEmailAndPassword(auth, email, password);\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        <p>Fill in the form below to login to your account.</p>\n        <div>\n          <input\n            placeholder=\"Email\"\n            name=\"email\"\n            type=\"email\"\n            onChange={handleEmailChange}\n            value={email}\n          />\n        </div>\n        <div>\n          <input\n            placeholder=\"Password\"\n            name=\"password\"\n            onChange={handlePassChange}\n            value={password}\n            type=\"password\"\n          />\n        </div>\n        <div>\n          {error && <p>{error}</p>}\n          <button type=\"submit\">Login</button>\n        </div>\n        <hr />\n        <p>\n          Don't have an account? <Link to=\"/gbCourse5Hw/signup\">Sign up</Link>\n        </p>\n      </form>\n    </div>\n  );\n};\nexport default LogIn;","import React from 'react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useDispatch } from 'react-redux';\r\nimport { delTickerWithSaga } from '../../store/actions/delTicker';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ttable: {\r\n\t\tmaxWidth: '400px'\r\n\t},\r\n\tticker: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tborder: '1px solid black',\r\n\t\tmargin: '10px',\r\n\t},\r\n\ttickerName: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\twidth: '110px',\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'space-around',\r\n\t\tpadding: '5px',\r\n\t\tflexShrink: '0'\r\n\t},\r\n\ttickerTable: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row'\r\n\t},\r\n\ttickerData: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\tborderLeft: '1px solid black',\r\n        flexGrow: '1'\r\n\t},\r\n\ttickerDataCell: {\r\n\t\tborderBottom: '1px solid black',\r\n\t\tmargin: '0',\r\n\t\tpadding: '5px',\r\n\t\t'&:last-child': {\r\n\t\t\tborderBottom: 'none'\r\n\t\t}\r\n\t},\r\n    tickerHeaders: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\tborderLeft: '1px solid black',\r\n        flexGrow: '0'\r\n\t},\r\n\ttickerHeader: {\r\n\t\tborderBottom: '1px solid black',\r\n\t\tmargin: '0',\r\n\t\tpadding: '5px',\r\n\t\t'&:last-child': {\r\n\t\t\tborderBottom: 'none'\r\n\t\t}\r\n\t},\r\n}));\r\n\r\nfunction MyTickers(props) {\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst delTicker = (ticker, marketType) => {\r\n\t\tdispatch(delTickerWithSaga(ticker, marketType));\r\n\t};\r\n\r\n\tconst classes = useStyles();\r\n\r\n\tconst tickers = Object.keys(props.tickers || {});\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className={classes.table}>\r\n\t\t\t\t{tickers.map((ticker) =>\r\n\t\t\t\t\t<div key={ticker} className={classes.ticker}>\r\n\t\t\t\t\t\t<div className={classes.tickerName}>\r\n\t\t\t\t\t\t\t<p>{ticker}</p>\r\n                            <p>{props.tickers[ticker].description}</p>\r\n\t\t\t\t\t\t\t<button onClick={() => delTicker(ticker, props.type)}>del</button>\r\n\t\t\t\t\t\t</div>\r\n                        <div className={classes.tickerHeaders}>\r\n\t\t\t\t\t\t\t<p className={classes.tickerHeader}>Количество</p>\r\n\t\t\t\t\t\t\t<p className={classes.tickerHeader}>Цена,  {(((props.currency === 'rur') && <span>&#8381;</span>) || ((props.currency === 'usd') && <span>$</span>) || ((props.currency === 'eur') && <span>&euro;</span>))}</p>\r\n\t\t\t\t\t\t\t<p className={classes.tickerHeader}>Сумма,  {(((props.currency === 'rur') && <span>&#8381;</span>) || ((props.currency === 'usd') && <span>$</span>) || ((props.currency === 'eur') && <span>&euro;</span>))}</p>\r\n\t\t\t\t\t\t\t<p className={classes.tickerHeader}>Годовая доходность, {(((props.currency === 'rur') && <span>&#8381;</span>) || ((props.currency === 'usd') && <span>$</span>) || ((props.currency === 'eur') && <span>&euro;</span>))}</p>\r\n\t\t\t\t\t\t\t<p className={classes.tickerHeader}>Годовая доходность,  %</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={classes.tickerData}>\r\n\t\t\t\t\t\t\t<p className={classes.tickerDataCell}>{props.tickers[ticker].quantity}</p>\r\n\t\t\t\t\t\t\t<p className={classes.tickerDataCell}>{(((props.currency === 'rur') && <span>{(+props.tickers[ticker].rubCost).toFixed(2)}</span>) || ((props.currency === 'usd') && <span>{(+props.tickers[ticker].usdCost).toFixed(2)}</span>) || ((props.currency === 'eur') && <span>{(+props.tickers[ticker].eurCost).toFixed(2)}</span>))}</p>\r\n\t\t\t\t\t\t\t<p className={classes.tickerDataCell}>{(((props.currency === 'rur') && <span>{(+props.tickers[ticker].rubTotal).toFixed(2)}</span>) || ((props.currency === 'usd') && <span>{(+props.tickers[ticker].usdTotal).toFixed(2)}</span>) || ((props.currency === 'eur') && <span>{(+props.tickers[ticker].eurTotal).toFixed(2)}</span>))}</p>\r\n\t\t\t\t\t\t\t<p className={classes.tickerDataCell}>{(((props.currency === 'rur') && <span>{props.myProfit && props.myProfit[ticker] && (+props.myProfit[ticker].sumProfitRubAbs).toFixed(2)}</span>) || ((props.currency === 'usd') && <span>{props.myProfit && props.myProfit[ticker] && (+props.myProfit[ticker].sumProfitUsdAbs).toFixed(2)}</span>) || ((props.currency === 'eur') && <span>{props.myProfit && props.myProfit[ticker] && (+props.myProfit[ticker].sumProfitEurAbs).toFixed(2)}</span>))}</p>\r\n\t\t\t\t\t\t\t<p className={classes.tickerDataCell}>{(((props.currency === 'rur') && <span>{props.myProfit && props.myProfit[ticker] && (+props.myProfit[ticker].sumProfitRubRel).toFixed(2)}</span>) || ((props.currency === 'usd') && <span>{props.myProfit && props.myProfit[ticker] && (+props.myProfit[ticker].sumProfitUsdRel).toFixed(2)}</span>) || ((props.currency === 'eur') && <span>{props.myProfit && props.myProfit[ticker] && (+props.myProfit[ticker].sumProfitEurRel).toFixed(2)}</span>))}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\nconst MyTickersPure = React.memo(MyTickers);\r\nexport default  MyTickersPure;","export const CALCULATE_PORTFOLIO_COST = 'PROFILE::CALCULATE_PORTFOLIO_COST';\r\n\r\nexport const calculatePortfolioCost = ( portfolioCost ) => {\r\n    return {\r\n        type: CALCULATE_PORTFOLIO_COST,\r\n        portfolioCost\r\n    };\r\n};\r\n\r\nexport const CALCULATE_PORTFOLIO_COST_WITH_SAGA = 'PROFILE::CALCULATE_PORTFOLIO_COST_WITH_SAGA';\r\n\r\nexport const calculatePortfolioCostWithSaga = (stock, pif, etf, bonds, forex ) => {\r\n    return {\r\n        type: CALCULATE_PORTFOLIO_COST_WITH_SAGA,\r\n        stock,\r\n        pif,\r\n        etf,\r\n        bonds,\r\n        forex   \r\n    };\r\n};","import React, { useEffect, useState } from 'react';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport {  getLastBonds, getLastEtf, getLastForex, getLastPif, getLastStock, getMyProfileCost, getMyYearProfit, getPortfolio, getWeeklyPortfolioProfitAndCost } from '../../store/selectors/profileSelectors';\r\nimport { auth } from '../../services/firebase';\r\nimport MyTickers from '../MyTickers';\r\nimport { calculatePortfolioCostWithSaga } from '../../store/actions/calculatePortfolioCost';\r\nimport { calculateYearPortfolioProfit } from '../../Functions/functions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    App: {\r\n        margin: '0 auto'\r\n    },\r\n    mainContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        backgroundColor: '#EEE'\r\n    },\r\n}));\r\n\r\nfunction Profile() {\r\n    const [currency, setCurrency] = useState('rur');\r\n    const [yearPortfolioProfit, setYearPortfolioProfit] = useState({});\r\n    const portfolio = useSelector(getPortfolio);\r\n\r\n    const classes = useStyles();\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const handleCurrency = (event) => {\r\n        setCurrency(event.target.value);\r\n    };\r\n\r\n    const myPortfolioCost = useSelector(getMyProfileCost);\r\n    const weeklyResults = useSelector(getWeeklyPortfolioProfitAndCost);\r\n\r\n    const myYearProfit = useSelector(getMyYearProfit);\r\n\r\n\r\n    const myCurrentStock = useSelector(getLastStock);\r\n    const myCurrentPif = useSelector(getLastPif);\r\n    const myCurrentEtf = useSelector(getLastEtf);\r\n    const myCurrentBonds = useSelector(getLastBonds);\r\n    const myCurrentForex = useSelector(getLastForex);\r\n\r\n    useEffect(() => {\r\n        dispatch(calculatePortfolioCostWithSaga(myCurrentStock, myCurrentPif, myCurrentEtf, myCurrentBonds, myCurrentForex));\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [portfolio]);\r\n\r\n    useEffect(() => {\r\n        setYearPortfolioProfit(calculateYearPortfolioProfit(weeklyResults, 2021));\r\n    }, [weeklyResults]);\r\n\r\n    return (\r\n        <div>\r\n            <select required onChange={handleCurrency} className={classes.searchItem}>\r\n                <option value='rur'>rur</option>\r\n                <option value='usd'>usd</option>\r\n                <option value='eur'>eur</option>\r\n            </select>\r\n            <div>Валюта</div>\r\n            <MyTickers tickers={myCurrentForex} myProfit={myYearProfit.forex} type='forex' currency={currency}/>\r\n            <div>Акции</div>\r\n            <MyTickers tickers={myCurrentStock} myProfit={myYearProfit.stock} type='stock' currency={currency}/>\r\n            <div>Фонды</div>\r\n            <MyTickers tickers={myCurrentPif} myProfit={myYearProfit.pif} type='pif' currency={currency}/>\r\n            <MyTickers tickers={myCurrentEtf} myProfit={myYearProfit.etf} type='etf' currency={currency}/>\r\n            <div>Облигации</div>\r\n            <MyTickers tickers={myCurrentBonds} myProfit={myYearProfit.bonds} type='bonds' currency={currency}/>\r\n            <h1>{auth.currentUser ? auth.currentUser.email : ''}</h1>\r\n            <p>Стоимость портфеля, &#8381; <b>{myPortfolioCost ? (+myPortfolioCost.rubGrandTotal).toFixed(2) : ''}</b></p>\r\n            <p>Доходность абс, &#8381; <b>{yearPortfolioProfit ? (+yearPortfolioProfit.yearProfitRubAbs).toFixed(2) : ''}</b></p>\r\n            <p>Доходность %, &#8381; <b>{yearPortfolioProfit ? (+yearPortfolioProfit.yearProfitRubRel).toFixed(2) : ''}</b></p>\r\n            <p>Стоимость портфеля, $ <b>{myPortfolioCost ? (+myPortfolioCost.usdGrandTotal).toFixed(2) : ''}</b></p>\r\n            <p>Доходность абс, $; <b>{yearPortfolioProfit ? (+yearPortfolioProfit.yearProfitUsdAbs).toFixed(2) : ''}</b></p>\r\n            <p>Доходность %, $; <b>{yearPortfolioProfit ? (+yearPortfolioProfit.yearProfitUsdRel).toFixed(2) : ''}</b></p>\r\n            <p>Стоимость портфеля, &euro; <b>{myPortfolioCost ? (+myPortfolioCost.eurGrandTotal).toFixed(2) : ''}</b></p>\r\n            <p>Доходность абс, &euro; <b>{yearPortfolioProfit ? (+yearPortfolioProfit.yearProfitEurAbs).toFixed(2) : ''}</b></p>\r\n            <p>Доходность %, &euro; <b>{yearPortfolioProfit ? (+yearPortfolioProfit.yearProfitEurRel).toFixed(2) : ''}</b></p>\r\n        </div>\r\n    );\r\n}\r\nconst ProfilePure = React.memo(Profile);\r\nexport default ProfilePure;","import React, { useCallback, useEffect, useState } from 'react';\nimport { HashRouter as MyRouter, Link, Route, Routes } from 'react-router-dom';\nimport Main from '../Main';\nimport PrivateRoute from '../../hocs/PrivateRoute';\nimport PublicRoute from '../../hocs/PublicRoute';\nimport { auth } from '../../services/firebase';\nimport { HOMEPAGE } from '../../utils/constants';\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\nimport SignUp from '../SignUp';\nimport LogIn from '../LogIn';\nimport Profile from '../Profile';\n\nfunction Router() {\n    const [authed, setAuthed] = useState(false);\n\n    useEffect(() => {\n\n        const unsubscribe = onAuthStateChanged(auth, (user) => {\n            if (user) {\n                setAuthed(true);\n            } else {\n                setAuthed(false);\n            }\n        });\n        return unsubscribe;\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const signOutUser = useCallback(() => {\n\t\tsignOut(auth).then(() => {\n\t\t}).catch((error) => {\n\t\t});\n\t},[]);\n\n    return (\n        <MyRouter>\n            <header>\n                <Link to={`${HOMEPAGE}/`}>Main</Link>\n                <Link to={`${HOMEPAGE}/profile`}>Profile</Link>\n                <Link to={`${HOMEPAGE}/signup`}>Registration</Link>\n                <Link to={`${HOMEPAGE}/login`}>Login</Link>\n                <button onClick={signOutUser}>Sign Out</button>\n            </header>\n            <Routes>\n                <Route authenticated={authed} exact path={`${HOMEPAGE}/`}\n                    element = {\n                        <PrivateRoute authenticated={authed}>\n                            <Main />\n                        </PrivateRoute>\n                    }\n                />\n                \n                <Route authenticated={authed} exact path={`${HOMEPAGE}/profile`}\n                    element = {\n                        <PrivateRoute authenticated={authed}>\n                            <Profile />\n                        </PrivateRoute>\n                    }\n                />\n                \n                <Route authenticated={authed} path={`${HOMEPAGE}/signup`}\n                    element = {\n                        <PublicRoute authenticated={authed}>\n                            <SignUp />\n                        </PublicRoute>\n                    }\n                />\n                    \n                <Route authenticated={authed} path={`${HOMEPAGE}/login`}\n                    element = {\n                        <PublicRoute authenticated={authed}>\n                            <LogIn />\n                        </PublicRoute>\n                    }\n                />\n                <Route element={<h4>404</h4>}/>\n                    \n                \n            </Routes>\n        </MyRouter>\n    );\n}\n\nexport default Router;","const initialState = {\r\n\tuserData: {\r\n\r\n\t},\r\n\tcurrentUserData: {\r\n\t\t\r\n\t},\r\n\tfilteredTickers: {\r\n\r\n\t},\r\n};\r\n\r\nexport default initialState;","import { calculatePortfolio, getWekklyPortfolioProfitAndCost, getYearProfit } from '../../Functions/functions';\r\nimport { call, put } from '@redux-saga/core/effects';\r\n\r\nimport { calculatePortfolioCost } from '../actions/calculatePortfolioCost';\r\nimport { calculateYearProfit } from '../actions/calculateYearProfit';\r\nimport { calculateWeeklyPortfolioProfitAndCost } from '../actions/calculateWeeklyPortfolioProfitAndCost';\r\n\r\nexport const onCalculatePortfolioCostWithSaga = function* (action){\r\n    try {\r\n        const portfolioCost = yield call(calculatePortfolio, action.stock, action.pif, action.etf, action.bonds, action.forex);\r\n        yield put(calculatePortfolioCost(portfolioCost));\r\n    } catch (err) {\r\n        console.log(err);\r\n    };\r\n};\r\n\r\nexport const onCalculateYearProfitWithSaga = function* (action){\r\n    try {\r\n        const yearProfit = yield call(getYearProfit, action.allTickers);\r\n        yield put(calculateYearProfit(yearProfit));\r\n    } catch (err) {\r\n        console.log(err);\r\n    };\r\n};\r\n\r\nexport const onCalculateWeeklyPortfolioProfitAndCostWithSaga = function* (action){\r\n    try {\r\n        const wekklyPortfolioProfitAndCost = yield call(getWekklyPortfolioProfitAndCost, action.allTickers, action.dates);\r\n        yield put(calculateWeeklyPortfolioProfitAndCost(wekklyPortfolioProfitAndCost));\r\n    } catch (err) {\r\n        console.log(err);\r\n    };\r\n};","import { auth, db } from '../../services/firebase';\nimport { ref, set, remove } from '@firebase/database';\nimport { addTicker } from '../../Functions/functions';\nimport { call, put } from '@redux-saga/core/effects';\nimport { autoCompleteTickerWithSaga } from '../actions/autoComplete';\n\nexport const onAddTickerWithSaga = function* (action) {\n    try {\n        const newTicker = yield ref(db, `${auth.currentUser.uid}/tickers/${action.tickerType}/${action.ticker}/data/${action.date}`);\n        yield set(newTicker, {\n            ticker: action.ticker,\n            description: action.description,\n            quantity: action.quantity,\n            usdCost: action.usdCost,\n            usdTotal: action.usdTotal,\n            rubCost: action.rubCost,\n            rubTotal: action.rubTotal,\n            eurCost: action.eurCost,\n            eurTotal: action.eurTotal,\n            profitUsdAbs: action.profitUsdAbs,\n            profitUsdRel: action.profitUsdRel,\n            profitRubAbs: action.profitRubAbs,\n            profitRubRel: action.profitRubRel,\n            profitEurAbs: action.profitEurAbs,\n            profitEurRel: action.profitEurRel,\n            currency: action.currency,\n            bondNominal: action.bondNominal,\n            couponOrDividendUsd: action.couponOrDividendUsd,\n            couponOrDividendRub: action.couponOrDividendRub,\n            couponOrDividendEur: action.couponOrDividendEur\n\n        });\n        const tickerCurrent = yield ref(db, `${auth.currentUser.uid}/portfolio/${action.tickerType}/${action.ticker}/`);\n        yield set(tickerCurrent, { ticker: action.ticker, quantity: action.quantity, currency: action.currency, description: action.description });\n        const dates = yield ref(db, `${auth.currentUser.uid}/dates/${action.date}`);\n        yield set(dates, 'yes');\n        const prevData = yield {\n            ticker: action.ticker,\n            quantity: action.quantity,\n            usdCost: action.usdCost,\n            usdTotal: action.usdTotal,\n            rubCost: action.rubCost,\n            rubTotal: action.rubTotal,\n            eurCost: action.eurCost,\n            eurTotal: action.eurTotal\n        };\n        if (!action.isManual) {\n            yield put(autoCompleteTickerWithSaga(action.ticker, action.date, action.quantity, action.currency, prevData, action.bondNominal));\n        }\n\n    } catch (err) {\n        console.log(err);\n    };\n};\n\nexport const onDelTickerWithSaga = function* (action) {\n    try {\n        const tickerCurrent = yield ref(db, `${auth.currentUser.uid}/portfolio/${action.marketType}/${action.ticker}`);\n        yield remove(tickerCurrent);\n        const ticker = yield ref(db, `${auth.currentUser.uid}/tickers/${action.marketType}/${action.ticker}`);\n        yield remove(ticker);\n    } catch (err) {\n        console.log(err);\n    };\n};\n\nexport const onAutoCompleteTickersWithSaga = function* (action) {\n    try {\n        if (+(new Date(action.date)) < (+(new Date()) - 691200000)) {\n            const autoCompleteAction = yield call(addTicker, action.ticker, new Date(+(new Date(action.date)) + 604800000), action.quantity, action.currency, action.prevData, true, false, 0, {}, action.bondNominal, 0);\n            yield put(autoCompleteAction);\n        }\n    } catch (err) {\n        console.log(err);\n    };\n};","import { auth, db } from '../../services/firebase';\r\nimport { ref, onValue } from '@firebase/database';\r\n\r\nimport { store } from '../store';\r\nimport { initUserData } from '../actions/initUserData';\r\n\r\nexport const onInitUserDataWithSaga = function* () {\r\n    try {\r\n        const tickers = yield ref(db, `${auth.currentUser.uid}`);\r\n        yield onValue(tickers, (snapshot) => {\r\n            const data = snapshot.val();\r\n            store.dispatch(initUserData(data || {}));\r\n        });\r\n    } catch (err) {\r\n        console.log(err.message);\r\n    }\r\n};","import { takeLatest, takeEvery } from 'redux-saga/effects';\r\nimport { ADD_TICKER_WITH_SAGA } from './actions/addTicker';\r\nimport { AUTOCOMPLETE_TICKER_WITH_SAGA } from './actions/autoComplete';\r\nimport { CALCULATE_PORTFOLIO_COST_WITH_SAGA } from './actions/calculatePortfolioCost';\r\nimport { CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST_WITH_SAGA } from './actions/calculateWeeklyPortfolioProfitAndCost';\r\nimport { CALCULATE_YEAR_PROFIT_WITH_SAGA } from './actions/calculateYearProfit';\r\nimport { DEL_TICKER_WITH_SAGA } from './actions/delTicker';\r\n\r\nimport { INIT_INIT_USER_DATA_WITH_SAGA } from './actions/initUserData';\r\nimport { onCalculatePortfolioCostWithSaga, onCalculateWeeklyPortfolioProfitAndCostWithSaga, onCalculateYearProfitWithSaga } from './sagas/profileSaga';\r\nimport { onAddTickerWithSaga, onAutoCompleteTickersWithSaga, onDelTickerWithSaga } from './sagas/tickersSaga';\r\nimport { onInitUserDataWithSaga } from './sagas/userDataSaga';\r\n\r\nfunction* mySaga() {\r\n\tyield takeLatest(INIT_INIT_USER_DATA_WITH_SAGA, onInitUserDataWithSaga);\r\n\tyield takeEvery(ADD_TICKER_WITH_SAGA, onAddTickerWithSaga);\r\n\tyield takeLatest(DEL_TICKER_WITH_SAGA, onDelTickerWithSaga);\r\n\tyield takeEvery(AUTOCOMPLETE_TICKER_WITH_SAGA, onAutoCompleteTickersWithSaga);\r\n\tyield takeLatest(CALCULATE_PORTFOLIO_COST_WITH_SAGA, onCalculatePortfolioCostWithSaga);\r\n\tyield takeLatest(CALCULATE_YEAR_PROFIT_WITH_SAGA, onCalculateYearProfitWithSaga);\r\n\tyield takeLatest(CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST_WITH_SAGA, onCalculateWeeklyPortfolioProfitAndCostWithSaga);\r\n};\r\n\r\nexport default mySaga;","import { INIT_USER_DATA } from '../actions/initUserData';\nimport initialState from '../initialState';\n\nconst { userData } = initialState;\n\nfunction userDataReducer(state = userData, action) {\n    switch (action.type) {\n        case INIT_USER_DATA:\n            return {\n                ...action.userData\n            };\n\n        default: return state;\n    }\n};\n\nexport default userDataReducer;","\r\nimport { CALCULATE_PORTFOLIO_COST } from '../actions/calculatePortfolioCost';\r\nimport { CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST } from '../actions/calculateWeeklyPortfolioProfitAndCost';\r\nimport { CALCULATE_YEAR_PROFIT } from '../actions/calculateYearProfit';\r\nimport initialState from '../initialState';\r\n\r\nconst { currentUserData } = initialState;\r\n\r\nfunction currentUserDataReducer(state = currentUserData, action) {\r\n    switch (action.type) {\r\n        case CALCULATE_PORTFOLIO_COST:\r\n            return{\r\n                ...state,\r\n                portfolioCost: action.portfolioCost\r\n            }\r\n\r\n        case CALCULATE_YEAR_PROFIT:\r\n            return {\r\n                ...state,\r\n                yearProfit: action.yearProfit,\r\n            }\r\n\r\n        case CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST:\r\n            return {\r\n                ...state,\r\n                weeklyPortfolioProfitAndCost: action.weeklyPortfolioProfitAndCost,\r\n            }\r\n\r\n        default: return state;\r\n    }\r\n};\r\n\r\nexport default currentUserDataReducer;","\r\nimport { ADD_FILTERED_TICKERS } from '../actions/addFilteredTickers';\r\nimport initialState from '../initialState';\r\n\r\nconst { filteredTickers } = initialState;\r\n\r\nfunction filteredTickersReducer(state = filteredTickers, action) {\r\n    switch (action.type) {\r\n        case ADD_FILTERED_TICKERS:\r\n            return {\r\n                ...action.filteredTickers\r\n            };\r\n\r\n        default: return state;\r\n    }\r\n};\r\n\r\nexport default filteredTickersReducer;","import { createStore, combineReducers, applyMiddleware, compose } from 'redux';\r\nimport createSagaMiddleware from 'redux-saga';\r\n\r\nimport { persistStore, persistReducer } from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\n\r\nimport initialState from './initialState';\r\n\r\nimport mySaga from './sagas.js';\r\nimport userData from './reducers/userDataReducer';\r\nimport currentUserData from './reducers/currentUserDataReducer';\r\nimport filteredTickers from './reducers/filteredTickersReducer';\r\n\r\nexport const combine = combineReducers({ userData, currentUserData, filteredTickers });\r\n\r\nconst onErrorSaga = (error, stack) => { console.log('qqq' + error); console.log(stack) };\r\nconst options = { onError: onErrorSaga };\r\nconst sagaMiddleware = createSagaMiddleware(options);\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst persistConfig = {\r\n\tkey: 'root',\r\n\tstorage,\r\n};\r\n\r\nconst persistedReducer = persistReducer(persistConfig, combine);\r\n\r\nexport const store = createStore(\r\n\tpersistedReducer,\r\n\tinitialState,\r\n\tcomposeEnhancers(applyMiddleware(sagaMiddleware)));\r\n\r\nsagaMiddleware.run(mySaga);\r\n\r\nexport const persistor = persistStore(store);\r\n\r\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/es/integration/react';\n\nimport { ThemeProvider, createTheme } from '@material-ui/core/styles';\n\nimport Router from './Components/Router';\nimport { store } from './store/store';\nimport { persistor } from './store/store';\n\nconst mainTheme = createTheme({\n\tpalette: {\n\t\tprimary: {\n\t\t\tmain: \"#708238\",\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: \"#0098FF\",\n\t\t},\n\t},\n});\n\nfunction App() {\n\n\treturn (\n\t\t<Provider store={store}>\n\t\t\t<PersistGate persistor={persistor}>\n\t\t\t\t<ThemeProvider theme={mainTheme}>\n\t\t\t\t\t\t<Router />\n\t\t\t\t</ThemeProvider>\n\t\t\t</PersistGate>\n\t\t</Provider>\n\t);\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}