(this.webpackJsonpinvestor=this.webpackJsonpinvestor||[]).push([[0],{72:function(e,t,r){},84:function(e,t,r){"use strict";r.r(t);var c=r(4),a=r.n(c),n=r(43),s=r.n(n),i=(r(72),r(17)),o=r(57),l=r(64),u=r(95),d=r(10),b=r(26),j=r(14),O=r(0),f=r.n(O),p=r(5),x=r(96),h=r(2),m=Object(x.a)((function(e){return{searchListContainer:{maxWidth:"500px"},searchList:{listStyle:"none",padding:"0",margin:"0"},addButton:{border:"none","&:hover":{color:"#fff",backgroundColor:"#222"}}}}));var k=function(e){var t=m();return Object(h.jsx)("div",{className:t.searchListContainer,children:Object(h.jsx)("ul",{className:t.searchList,children:e.searchResult.map((function(r){return Object(h.jsx)("li",{children:Object(h.jsx)("button",{onClick:function(t){return e.submitTicker(t,r.ticker)},className:t.addButton,children:r.descr})},r.ticker+r.classcode)}))})})},y=r(3),v=r(15),C="TICKERS::ADD_FILTERED_TICKERS",D="TICKERS::ADD_TICKER_WITH_SAGA",g=function(e,t,r,c,a,n,s,i,o,l,u,d,b,j,O,f,p,x,h,m,k,y,v){return{type:D,ticker:e,description:t,date:r,quantity:c,usdCost:a,usdTotal:n,rubCost:s,rubTotal:i,eurCost:o,eurTotal:l,profitUsdAbs:u,profitUsdRel:d,profitRubAbs:b,profitRubRel:j,profitEurAbs:O,profitEurRel:f,currency:p,tickerType:x,isManual:h,bondNominal:m,couponOrDividendUsd:k,couponOrDividendRub:y,couponOrDividendEur:v}},N=r(45),T=r(20),R=r(62),E=(Object(R.a)({apiKey:"AIzaSyAS0Sazo-Bbg-TouSxSrenj5hTYa5bnjN8",authDomain:"investor-8a0c2.firebaseapp.com",projectId:"investor-8a0c2",storageBucket:"investor-8a0c2.appspot.com",messagingSenderId:"949350207446",appId:"1:949350207446:web:c6cf85c9033c3ed2491e77"}),Object(N.b)()),P=Object(T.b)(),A=function(e){return"https://api.bcs.ru/udfdatafeed/v1/symbols?symbol=".concat(e)},w=function(e,t,r){return+t&&+r?"https://api.bcs.ru/udfdatafeed/v1/history?symbol=".concat(e,"&resolution=d&from=").concat(Math.round(+new Date(t)/1e3),"&to=").concat(Math.round(+new Date(r)/1e3)):"https://api.bcs.ru/udfdatafeed/v1/history?symbol=".concat(e,"&resolution=d&from=").concat(Math.round(+new Date/1e3),"&to=").concat(Math.round(+new Date/1e3))},S=function(){var e=Object(p.a)(f.a.mark((function e(t,r,c,a,n,s,i,o,l,u){var d,b,j,O,p,x,h,m,k,y,v,C,D,N,R,S,F,U,I,_,L,q,H,$,B,M,W,G,K,Y,z,J,X,Q,V,Z,ee,te,re,ce=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(d=ce.length>10&&void 0!==ce[10]?ce[10]:0,b=+new Date(r);5!==new Date(b).getDay();)b+=864e5;return j=u,void 0===u&&(j=0),e.prev=6,C=1,D=1,N=1,R=n,S=0,F=0,U=0,I=0,_=0,L=0,q=0,H=0,$=0,B=w("RUR",b,b+828e5),e.next=23,fetch(B);case 23:return M=e.sent,e.next=26,M.json();case 26:return W=e.sent,G=W.c[0],K=w("EUR_RUB",b,b+828e5),e.next=31,fetch(K);case 31:return Y=e.sent,e.next=34,Y.json();case 34:if(z=e.sent,J=z.c[0],"rur"===a?C=1/G:"usd"===a?C=1:"eur"===a&&(C=J/G),"rur"===a?D=1:"usd"===a?D=G:"eur"===a&&(D=J),"rur"===a?N=1/J:"usd"===a?N=G/J:"eur"===a&&(N=1),q=d*C,H=d*D,$=d*N,i){e.next=70;break}return X=A(t),e.next=49,fetch(X);case 49:return Q=e.sent,e.next=52,Q.json();case 52:return y=e.sent,V=w(t,b,b+828e5),e.next=56,fetch(V);case 56:return Z=e.sent,e.next=59,Z.json();case 59:if("no_data"!==(v=e.sent).s&&!isNaN(v.c[0])){e.next=62;break}throw new Error("\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445");case 62:O="bonds"!==y.type?v.c[0]*C:v.c[0]*C*j/100,p="bonds"!==y.type?v.c[0]*C*c:v.c[0]*C*c*j/100,x="bonds"!==y.type?v.c[0]*D:v.c[0]*D*j/100,h="bonds"!==y.type?v.c[0]*D*c:v.c[0]*D*c*j/100,m="bonds"!==y.type?v.c[0]*N:v.c[0]*N*j/100,k="bonds"!==y.type?v.c[0]*N*c:v.c[0]*N*c*j/100,e.next=77;break;case 70:O=o*C,p=o*C*c,x=o*D,h=o*D*c,m=o*N,k=o*N*c,y=l;case 77:if(s){e.next=85;break}return ee=Object(T.d)(P,"".concat(E.currentUser.uid,"/tickers/").concat(y.type,"/").concat(t,"/data/").concat(new Date(b-6048e5).toISOString().slice(0,10))),e.next=82,Object(T.a)(ee);case 82:(te=e.sent).exists()&&(re=te.val(),R.ticker=re.ticker,R.rubCost=re.rubCost,R.usdCost=re.usdCost,R.eurCost=re.eurCost,R.quantity=re.quantity);case 85:return void 0===R.ticker?(S=0,F=0,U=0,I=0,_=0,L=0):(S=(O-R.usdCost)*R.quantity+q,F=(O-R.usdCost+q/R.quantity)/R.usdCost*100,U=(x-R.rubCost)*R.quantity+H,I=(x-R.rubCost+H/R.quantity)/R.rubCost*100,_=(m-R.eurCost)*R.quantity+$,L=(m-R.eurCost+$/R.quantity)/R.eurCost*100),e.abrupt("return",g(t,y.description,new Date(b).toISOString().slice(0,10),c,O,p,x,h,m,k,S,F,U,I,_,L,a,y.type,i,j,q,H,$));case 89:e.prev=89,e.t0=e.catch(6),console.log(e.t0.message+r);case 92:case"end":return e.stop()}}),e,null,[[6,89]])})));return function(t,r,c,a,n,s,i,o,l,u){return e.apply(this,arguments)}}(),F=function(){for(var e=0,t=0,r=0,c=arguments.length,a=new Array(c),n=0;n<c;n++)a[n]=arguments[n];return a.forEach((function(c){Object.values(c).forEach((function(c){e+=+c.rubTotal,t+=+c.usdTotal,r+=+c.eurTotal}))})),{rubGrandTotal:e,usdGrandTotal:t,eurGrandTotal:r}},U=function(e,t,r){var c={};return Object.keys(e).forEach((function(a){var n=Object.keys(e[a]);c=Object(v.a)(Object(v.a)({},c),{},Object(y.a)({},a,{})),n.forEach((function(n){var s=Object.keys(e[a][n].data);c=Object(v.a)(Object(v.a)({},c),{},Object(y.a)({},a,Object(v.a)(Object(v.a)({},c[a]),{},Object(y.a)({},n,{data:{}})))),s.filter((function(e){return new Date(e).getMonth()===r&&new Date(e).getFullYear()===t})).forEach((function(t){c=Object(v.a)(Object(v.a)({},c),{},Object(y.a)({},a,Object(v.a)(Object(v.a)({},c[a]),{},Object(y.a)({},n,{data:Object(v.a)(Object(v.a)({},c[a][n].data),{},Object(y.a)({},t,e[a][n].data[t]))}))))}))}))})),{type:C,filteredTickers:c}},I=function(e,t,r){var c={},a=Object.keys(e);return(void 0!==r?a.filter((function(e){return new Date(e).getMonth()===r&&new Date(e).getFullYear()===t})):a.filter((function(e){return new Date(e).getFullYear()===t}))).forEach((function(t){c=Object(v.a)(Object(v.a)({},c),{},Object(y.a)({},t,e[t]))})),c},_=function(e){var t={};return Object.values(e).forEach((function(r,c){var a=Object.keys(r);t=Object(v.a)(Object(v.a)({},t),{},Object(y.a)({},Object.keys(e)[c],{})),Object.values(r).forEach((function(r,n){var s=0,i=1,o=0,l=1,u=0,d=1;Object.values(r.data).forEach((function(e){s+=+e.profitUsdAbs,i*=1+ +e.profitUsdRel/100,o+=+e.profitRubAbs,l*=1+ +e.profitRubRel/100,u+=+e.profitEurAbs,d*=1+ +e.profitEurRel/100})),i=100*(i-1),l=100*(l-1),d=100*(d-1),t=Object(v.a)(Object(v.a)({},t),{},Object(y.a)({},Object.keys(e)[c],Object(v.a)(Object(v.a)({},t[Object.keys(e)[c]]),{},Object(y.a)({},a[n],{sumProfitUsdAbs:s,sumProfitUsdRel:i,sumProfitRubAbs:o,sumProfitRubRel:l,sumProfitEurAbs:u,sumProfitEurRel:d}))))}))})),t},L=function(e,t){var r={};if(t.no_data)return r;var c=void 0,a=void 0,n=void 0;return Object.keys(t).forEach((function(t){var s=0,i=0,o=0,l=0,u=0,d=0,b=0,j=0,O=0;Object.values(e).forEach((function(e,r){Object.values(e).forEach((function(e,r){void 0!==e.data[t]&&(s+=+e.data[t].usdTotal,i+=+e.data[t].profitUsdAbs,l+=+e.data[t].rubTotal,u+=+e.data[t].profitRubAbs,b+=+e.data[t].eurTotal,j+=+e.data[t].profitEurAbs)}))})),void 0!==c&&0!==c&&(o=i/c*100,d=u/a*100,O=j/n*100),c=s,a=l,n=b,r=Object(v.a)(Object(v.a)({},r),{},Object(y.a)({},t,{portfolioUsdTotal:s,portfolioUsdProfitAbs:i,portfolioUsdProfitRel:o,portfolioRubTotal:l,portfolioRubProfitAbs:u,portfolioRubProfitRel:d,portfolioEurTotal:b,portfolioEurProfitAbs:j,portfolioEurProfitRel:O}))})),r},q=function(e){var t={};return Object.keys(e).forEach((function(r){var c=Object.keys(e[r].data)[Object.keys(e[r].data).length-1];t=Object(v.a)(Object(v.a)({},t),{},Object(y.a)({},r,{quantity:e[r].data[c].quantity,rubCost:e[r].data[c].rubCost,rubTotal:e[r].data[c].rubTotal,usdCost:e[r].data[c].usdCost,usdTotal:e[r].data[c].usdTotal,eurCost:e[r].data[c].eurCost,eurTotal:e[r].data[c].eurTotal,currency:e[r].data[c].currency,description:e[r].data[c].description}))})),t},H=Object(x.a)((function(e){return{form:{maxWidth:"400px",border:"1px solid black",borderRadius:"10px",display:"flex",flexDirection:"column",margin:"10px"},formSubmit:{display:"block"},searchItem:{margin:"5px 10px",marginBottom:"5px"},hidden:{display:"none"}}}));var $=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),r=t[0],a=t[1],n=Object(c.useState)(""),s=Object(d.a)(n,2),o=s[0],l=s[1],u=Object(c.useState)(""),b=Object(d.a)(u,2),j=b[0],O=b[1],x=Object(c.useState)(""),m=Object(d.a)(x,2),y=m[0],v=m[1],C=Object(c.useState)([]),D=Object(d.a)(C,2),g=D[0],N=D[1],T=Object(c.useState)("rur"),R=Object(d.a)(T,2),E=R[0],P=R[1],A=Object(c.useState)(0),w=Object(d.a)(A,2),F=w[0],U=w[1],I=Object(c.useState)(!1),_=Object(d.a)(I,2),L=_[0],q=_[1],$=Object(c.useState)("bonds"),B=Object(d.a)($,2),M=B[0],W=B[1],G=Object(c.useState)(""),K=Object(d.a)(G,2),Y=K[0],z=K[1],J=Object(c.useState)(!0),X=Object(d.a)(J,2),Q=X[0],V=X[1],Z=Object(c.useState)(0),ee=Object(d.a)(Z,2),te=ee[0],re=ee[1],ce=Object(c.useState)(0),ae=Object(d.a)(ce,2),ne=ae[0],se=ae[1],ie=Object(i.b)(),oe=function(){var e=Object(p.a)(f.a.mark((function e(t){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),N([]),e.next=4,S(r,j,o,E,{},!1,L,F,{type:M,description:Y},te,ne);case 4:(c=e.sent)&&ie(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=H();return Object(h.jsxs)("form",{action:"",onSubmit:oe,className:le.form,label:"Ticker",children:["Ticker: ",Object(h.jsx)("input",{type:"text",disabled:Q,className:le.searchItem,value:r,onChange:function(e){a(e.target.value)},required:!0}),Object(h.jsxs)("select",{required:!0,onChange:function(e){P(e.target.value)},className:le.searchItem,children:[Object(h.jsx)("option",{value:"rur",children:"rur"}),Object(h.jsx)("option",{value:"usd",children:"usd"}),Object(h.jsx)("option",{value:"eur",children:"eur"})]}),"Quantity: ",Object(h.jsx)("input",{type:"number",className:le.searchItem,value:o,onChange:function(e){l(e.target.value)},required:!0}),"Bond nominal: ",Object(h.jsx)("input",{type:"number",className:le.searchItem,value:te,onChange:function(e){re(e.target.value)},required:!0}),"Coupon or dividend: ",Object(h.jsx)("input",{type:"number",className:le.searchItem,value:ne,onChange:function(e){se(e.target.value)}}),Object(h.jsxs)("div",{className:le.form+" "+(Q?le.hidden:""),children:["Manual course: ",Object(h.jsx)("input",{type:"number",className:le.searchItem,value:F,onChange:function(e){U(e.target.value)}}),"Manual description: ",Object(h.jsx)("input",{type:"text",className:le.searchItem,value:Y,onChange:function(e){z(e.target.value)}}),"Manual type:",Object(h.jsxs)("select",{required:!0,onChange:function(e){W(e.target.value)},className:le.searchItem,children:[Object(h.jsx)("option",{value:"bonds",children:"bonds"}),Object(h.jsx)("option",{value:"stock",children:"stock"}),Object(h.jsx)("option",{value:"pif",children:"pif"}),Object(h.jsx)("option",{value:"etf",children:"etf"}),Object(h.jsx)("option",{value:"forex",children:"forex"})]})]}),"Date: ",Object(h.jsx)("input",{type:"date",className:le.searchItem,value:j,onChange:function(e){O(e.target.value)},required:!0}),Object(h.jsx)("input",{type:"submit",className:le.formSubmit+" "+le.searchItem,value:"Add"}),Object(h.jsx)("input",{type:"button",className:le.formSubmit+" "+le.searchItem+" "+(Q?"":le.hidden),value:"Manual",onClick:function(){q(!0),V(!1)}}),Object(h.jsx)("input",{type:"button",className:le.formSubmit+" "+le.searchItem+" "+(Q?le.hidden:""),value:"Auto",onClick:function(){q(!1),V(!0)}}),"Search: ",Object(h.jsx)("input",{type:"text",disabled:!Q,className:le.searchItem,value:y,onChange:function(e){v(e.target.value);var t,r=(t=e.target.value,"https://api.bcs.ru/udfdatafeed/v1/search?query=".concat(t,"&limit=10&fulldescription=on"));fetch(r).then((function(e){return e.json()})).then((function(e){var t=[];e.forEach((function(e,r){t.push({ticker:e.symbol,descr:e.description,classcode:e.classcode})})),N(t)})).catch((function(e){console.log(e)}))}}),Object(h.jsx)(k,{className:le.searchItem,searchResult:g,submitTicker:function(e,t){e.preventDefault(),a(t)}})]})},B="TICKERS::DEL_TICKER_WITH_SAGA",M=function(e,t){return{type:B,ticker:e,marketType:t}},W=Object(x.a)((function(e){return{table:{maxWidth:"100%"},ticker:{display:"flex",flexDirection:"row",border:"1px solid black",margin:"10px",overflow:"auto"},tickerName:{display:"flex",flexDirection:"column",width:"110px",alignItems:"center",justifyContent:"space-around",padding:"5px",flexShrink:"0"},tickerTable:{display:"flex",flexDirection:"row"},tickerDate:{width:"100px",display:"flex",flexDirection:"column",borderLeft:"1px solid black","&:last-child":{borderRight:"1px solid black"}},tickerHeader:{width:"200px",display:"flex",flexDirection:"column",borderLeft:"1px solid black","&:last-child":{borderRight:"1px solid black"}},tickerDateCell:{borderBottom:"1px solid black",margin:"0",padding:"5px","&:last-child":{borderBottom:"none"}},green:{backgroundColor:"\t#66CC66"},red:{backgroundColor:"#FF6666"}}}));function G(e){var t=Object(c.useState)(0),r=Object(d.a)(t,2),a=r[0],n=r[1],s=Object(c.useState)(1),i=Object(d.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)(0),b=Object(d.a)(u,2),j=b[0],O=b[1],f=Object(c.useState)(1),p=Object(d.a)(f,2),x=p[0],m=p[1],k=Object(c.useState)(0),y=Object(d.a)(k,2),v=y[0],C=y[1],D=Object(c.useState)(1),g=Object(d.a)(D,2),N=g[0],T=g[1];Object(c.useEffect)((function(){var t=0,r=1,c=0,a=1,s=0,i=1;Object.values(e.ticker.data).forEach((function(e){t+=+e.profitUsdAbs,r*=1+e.profitUsdRel/100,c+=+e.profitRubAbs,a*=1+e.profitRubRel/100,s+=+e.profitEurAbs,i*=1+e.profitEurRel/100})),r=100*(r-1),a=100*(a-1),i=100*(i-1),n(t),l(r),O(c),m(a),C(s),T(i)}),[e]);var R=W();return Object(h.jsxs)("div",{className:R.tickerTable,children:[Object(h.jsxs)("div",{className:R.tickerHeader,children:[Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u0414\u0430\u0442\u0430"}),Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),"usd"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 $"}):"","rur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u20bd"}):"","eur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u20ac"}):"","usd"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0432 $, \u0430\u0431\u0441"}):"","usd"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0432 $, %"}):"","rur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0432 \u20bd, \u0430\u0431\u0441"}):"","rur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0432 \u20bd, %"}):"","eur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0432 \u20ac, \u0430\u0431\u0441"}):"","eur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0432 \u20ac, %"}):"","usd"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u0414\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u044b/\u041a\u0443\u043f\u043e\u043d\u044b \u0432 $, \u0430\u0431\u0441"}):"","rur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u0414\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u044b/\u041a\u0443\u043f\u043e\u043d\u044b \u0432 \u20bd, \u0430\u0431\u0441"}):"","eur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:"\u0414\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u044b/\u041a\u0443\u043f\u043e\u043d\u044b \u0432 \u20ac, \u0430\u0431\u0441"}):""]}),Object.values(e.ticker.data).map((function(t,r){return Object(h.jsxs)("div",{className:R.tickerDate,children:[Object(h.jsx)("p",{className:R.tickerDateCell,children:Object.keys(e.ticker.data)[r]}),Object(h.jsx)("p",{className:R.tickerDateCell,children:t.quantity}),"usd"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:(+t.usdCost).toFixed(4)}):"","usd"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:(+t.usdTotal).toFixed(2)}):"","rur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:(+t.rubCost).toFixed(4)}):"","rur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:(+t.rubTotal).toFixed(2)}):"","eur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:(+t.eurCost).toFixed(4)}):"","eur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:(+t.eurTotal).toFixed(2)}):"","usd"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell+" "+(t.profitUsdAbs>=0?R.green:R.red),children:(+t.profitUsdAbs).toFixed(2)+" $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell+" "+(t.profitUsdAbs>=0?R.green:R.red),children:(+t.profitUsdRel).toFixed(2)+" %"}):"","rur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell+" "+(t.profitRubAbs>=0?R.green:R.red),children:(+t.profitRubAbs).toFixed(2)+" \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell+" "+(t.profitRubAbs>=0?R.green:R.red),children:(+t.profitRubRel).toFixed(2)+" %"}):"","eur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell+" "+(t.profitEurAbs>=0?R.green:R.red),children:(+t.profitEurAbs).toFixed(2)+" \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell+" "+(t.profitEurAbs>=0?R.green:R.red),children:(+t.profitEurRel).toFixed(2)+" %"}):"","usd"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:(+t.couponOrDividendUsd).toFixed(2)}):"","rur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:(+t.couponOrDividendRub).toFixed(2)}):"","eur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell,children:(+t.couponOrDividendEur).toFixed(2)}):""]},t.ticker+Object.keys(e.ticker.data)[r])})),Object(h.jsxs)("div",{className:R.tickerDate,children:[Object(h.jsx)("p",{className:R.tickerDateCell,children:"-"}),Object(h.jsx)("p",{className:R.tickerDateCell,children:"-"}),Object(h.jsx)("p",{className:R.tickerDateCell,children:"-"}),Object(h.jsx)("p",{className:R.tickerDateCell,children:"-"}),"usd"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell+" "+(a>=0?R.green:R.red),children:a.toFixed(2)+" $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell+" "+(a>=0?R.green:R.red),children:o.toFixed(2)+" %"}):"","rur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell+" "+(j>=0?R.green:R.red),children:j.toFixed(2)+" \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell+" "+(j>=0?R.green:R.red),children:x.toFixed(2)+" %"}):"","eur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell+" "+(v>=0?R.green:R.red),children:v.toFixed(2)+" \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:R.tickerDateCell+" "+(v>=0?R.green:R.red),children:N.toFixed(2)+" %"}):""]})]})}var K=a.a.memo(G),Y=Object(x.a)((function(e){return{table:{maxWidth:"100%"},ticker:{display:"flex",flexDirection:"row",border:"1px solid black",margin:"10px",overflow:"auto"},description:{margin:"5px"},tickerName:{display:"flex",flexDirection:"column",width:"110px",alignItems:"center",justifyContent:"space-around",padding:"5px",flexShrink:"0"}}}));function z(e){var t=Object(i.b)(),r=Y(),c=Object.values(e.filteredTickers||{}),a=Object.keys(e.filteredTickers||{});return Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:r.table,children:c.map((function(c,n){return 0!==Object.keys(c.data).length&&Object(h.jsxs)("div",{className:r.ticker,children:[Object(h.jsxs)("div",{className:r.tickerName,children:[Object(h.jsx)("p",{className:r.description,children:a[n]}),Object(h.jsx)("p",{className:r.description,children:c.data[Object.keys(c.data)[Object.keys(c.data).length-1]].description}),Object(h.jsx)("p",{className:r.description,children:c.data[Object.keys(c.data)[Object.keys(c.data).length-1]].currency}),Object(h.jsx)("button",{onClick:function(){return function(e,r){t(M(e,r))}(a[n],e.type)},children:"del"})]}),Object(h.jsx)(K,{ticker:c,currency:e.currency})]},a[n])}))})})}var J=a.a.memo(z),X=Object(x.a)((function(e){return{table:{maxWidth:"100%"},ticker:{display:"flex",flexDirection:"row",border:"1px solid black",margin:"10px",overflow:"auto"},tickerName:{display:"flex",flexDirection:"column",width:"110px",alignItems:"center",justifyContent:"space-around",padding:"5px",flexShrink:"0"},tickerTable:{display:"flex",flexDirection:"row",margin:"10px"},tickerDate:{width:"100px",display:"flex",flexDirection:"column",borderLeft:"1px solid black","&:last-child":{borderRight:"1px solid black"}},tickerHeader:{width:"321px",display:"flex",flexDirection:"column",borderLeft:"1px solid black","&:last-child":{borderRight:"1px solid black"}},tickerDateCell:{borderBottom:"1px solid black",margin:"0",padding:"5px","&:last-child":{borderBottom:"none"}},green:{backgroundColor:"\t#66CC66"},red:{backgroundColor:"#FF6666"}}}));function Q(e){var t=X(),r=Object(c.useState)(0),a=Object(d.a)(r,2),n=a[0],s=a[1],i=Object(c.useState)(0),o=Object(d.a)(i,2),l=o[0],u=o[1],b=Object(c.useState)(1),j=Object(d.a)(b,2),O=j[0],f=j[1],p=Object(c.useState)(0),x=Object(d.a)(p,2),m=x[0],k=x[1],y=Object(c.useState)(0),v=Object(d.a)(y,2),C=v[0],D=v[1],g=Object(c.useState)(1),N=Object(d.a)(g,2),T=N[0],R=N[1],E=Object(c.useState)(0),P=Object(d.a)(E,2),A=P[0],w=P[1],S=Object(c.useState)(0),F=Object(d.a)(S,2),U=F[0],I=F[1],_=Object(c.useState)(1),L=Object(d.a)(_,2),q=L[0],H=L[1];return Object(c.useEffect)((function(){var t=0,r=0,c=1,a=0,n=0,i=1,o=0,l=0,d=1;Object.values(e.weeklyResult).forEach((function(e){t=+e.portfolioUsdTotal,r+=+e.portfolioUsdProfitAbs,c*=1+e.portfolioUsdProfitRel/100,a=+e.portfolioRubTotal,n+=+e.portfolioRubProfitAbs,i*=1+e.portfolioRubProfitRel/100,o=+e.portfolioEurTotal,l+=+e.portfolioEurProfitAbs,d*=1+e.portfolioEurProfitRel/100})),c=100*(c-1),i=100*(i-1),d=100*(d-1),s(t),u(r),f(c),k(a),D(n),R(i),w(o),I(l),H(d)}),[e]),Object(h.jsxs)("div",{className:t.tickerTable,children:[Object(h.jsxs)("div",{className:t.tickerHeader,children:[Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u0430\u0442\u0430"}),"usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0430\u0431\u0441 \u0432 $ "}):"","usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c % \u0432 $ "}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0430\u0431\u0441 \u0432 \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c % \u0432 \u20bd"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0430\u0431\u0441 \u0432 \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c % \u0432 \u20ac"}):""]}),Object.values(e.weeklyResult).map((function(r,c){return Object(h.jsxs)("div",{className:t.tickerDate,children:[Object(h.jsx)("p",{className:t.tickerDateCell,children:Object.keys(e.weeklyResult)[c]}),"usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:r.portfolioUsdTotal.toFixed(2)+" $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(r.portfolioUsdProfitAbs>=0?t.green:t.red),children:r.portfolioUsdProfitAbs.toFixed(2)+" $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(r.portfolioUsdProfitAbs>=0?t.green:t.red),children:r.portfolioUsdProfitRel.toFixed(2)+" %"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:r.portfolioRubTotal.toFixed(2)+" \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(r.portfolioRubProfitAbs>=0?t.green:t.red),children:r.portfolioRubProfitAbs.toFixed(2)+" \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(r.portfolioRubProfitAbs>=0?t.green:t.red),children:r.portfolioRubProfitRel.toFixed(2)+" %"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:r.portfolioEurTotal.toFixed(2)+" \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(r.portfolioEurProfitAbs>=0?t.green:t.red),children:r.portfolioEurProfitAbs.toFixed(2)+" \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(r.portfolioEurProfitAbs>=0?t.green:t.red),children:r.portfolioEurProfitRel.toFixed(2)+" %"}):""]},Object.keys(e.weeklyResult)[c])})),Object(h.jsxs)("div",{className:t.tickerDate,children:[Object(h.jsx)("p",{className:t.tickerDateCell,children:"-"}),"usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:n.toFixed(2)+" $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(l>=0?t.green:t.red),children:l.toFixed(2)+" $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(l>=0?t.green:t.red),children:O.toFixed(2)+" %"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:m.toFixed(2)+" \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(C>=0?t.green:t.red),children:C.toFixed(2)+" \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(C>=0?t.green:t.red),children:T.toFixed(2)+" %"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:A.toFixed(2)+" \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(U>=0?t.green:t.red),children:U.toFixed(2)+" \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(U>=0?t.green:t.red),children:q.toFixed(2)+" %"}):""]})]})}var V=a.a.memo(Q),Z="USER::INIT_USER_DATA",ee=function(e){return{type:Z,userData:e}},te="USER::INIT_USER_DATA_WITH_SAGA",re="",ce={};function ae(e){return e.userData.tickers?e.userData.tickers:ce}function ne(e){return e.filteredTickers.stock?e.filteredTickers.stock:ce}function se(e){return e.filteredTickers.pif?e.filteredTickers.pif:ce}function ie(e){return e.filteredTickers.etf?e.filteredTickers.etf:ce}function oe(e){return e.filteredTickers.bonds?e.filteredTickers.bonds:ce}function le(e){return e.filteredTickers.forex?e.filteredTickers.forex:ce}function ue(e){return e.userData.dates?e.userData.dates:ce}var de="TICKERS::AUTOCOMPLETE_TICKER_WITH_SAGA",be=function(e,t,r,c,a,n){return{type:de,ticker:e,date:t,quantity:r,currency:c,prevData:a,bondNominal:n}},je="PROFILE::CALCULATE_YEAR_PROFIT",Oe=function(e){return{type:je,yearProfit:e}},fe="PROFILE::CALCULATE_YEAR_PROFIT_WITH_SAGA",pe="PROFILE::CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST",xe="PROFILE::CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST_WITH_SAGA";function he(e){return e.userData.portfolio?e.userData.portfolio:ce}function me(e){return e.currentUserData.portfolioCost?e.currentUserData.portfolioCost:ce}function ke(e){return e.currentUserData.yearProfit?e.currentUserData.yearProfit:ce}function ye(e){return e.currentUserData.weeklyPortfolioProfitAndCost?e.currentUserData.weeklyPortfolioProfitAndCost:ce}function ve(e){return e.userData.tickers.stock?q(e.userData.tickers.stock):ce}function Ce(e){return e.userData.tickers.pif?q(e.userData.tickers.pif):ce}function De(e){return e.userData.tickers.etf?q(e.userData.tickers.etf):ce}function ge(e){return e.userData.tickers.bonds?q(e.userData.tickers.bonds):ce}function Ne(e){return e.userData.tickers.forex?q(e.userData.tickers.forex):ce}var Te=Object(x.a)((function(e){return{App:{margin:"0 auto"},mainContainer:{position:"relative",display:"flex",flexDirection:"column",backgroundColor:"#EEE"},searchItem:{position:"sticky",top:"0",maxWidth:"400px",margin:"5px 10px",marginBottom:"5px"},date:{top:"20px"}}}));function Re(){var e=Object(i.b)(),t=Object(i.c)(le),r=Object(i.c)(ne),a=Object(i.c)(se),n=Object(i.c)(ie),s=Object(i.c)(oe),o=Object(i.c)(ae),l=Object(i.c)(ue),u=Object(i.c)(ye),b=Object(c.useState)("rur"),j=Object(d.a)(b,2),O=j[0],f=j[1],p=Object(c.useState)((new Date).toISOString().slice(0,7)),x=Object(d.a)(p,2),m=x[0],k=x[1],y=Object(c.useState)({}),v=Object(d.a)(y,2),C=v[0],D=v[1];Object(c.useEffect)((function(){e({type:te})}),[]),Object(c.useEffect)((function(){Object.values(o).forEach((function(t){Object.values(t).forEach((function(r,c){var a={ticker:Object.keys(t)[c],quantity:Object.values(r.data)[Object.keys(r.data).length-1].quantity,usdCost:Object.values(r.data)[Object.keys(r.data).length-1].usdCost,usdTotal:Object.values(r.data)[Object.keys(r.data).length-1].usdTotal,rubCost:Object.values(r.data)[Object.keys(r.data).length-1].rubCost,rubTotal:Object.values(r.data)[Object.keys(r.data).length-1].rubTotal,eurCost:Object.values(r.data)[Object.keys(r.data).length-1].eurCost,eurTotal:Object.values(r.data)[Object.keys(r.data).length-1].eurTotal};e(be(Object.keys(t)[c],Object.keys(r.data)[Object.keys(r.data).length-1],Object.values(r.data)[Object.keys(r.data).length-1].quantity,Object.values(r.data)[Object.keys(r.data).length-1].currency,a,Object.values(r.data)[Object.keys(r.data).length-1].bondNominal))}))}))}),[]),Object(c.useEffect)((function(){e(U(o,new Date(m).getFullYear(),new Date(m).getMonth()))}),[m,o]),Object(c.useEffect)((function(){D(I(u,new Date(m).getFullYear(),new Date(m).getMonth()))}),[m]),Object(c.useEffect)((function(){e(function(e){return{type:fe,allTickers:e}}(o))}),[e]),Object(c.useEffect)((function(){e(function(e,t){return{type:xe,allTickers:e,dates:t}}(o,l))}),[l]);var g=Te();return Object(h.jsxs)("div",{className:g.App+" "+g.mainContainer,children:[Object(h.jsxs)("select",{required:!0,onChange:function(e){f(e.target.value)},className:g.searchItem,children:[Object(h.jsx)("option",{value:"rur",children:"rur"}),Object(h.jsx)("option",{value:"usd",children:"usd"}),Object(h.jsx)("option",{value:"eur",children:"eur"})]}),Object(h.jsx)("input",{type:"month",onChange:function(e){k(e.target.value)},value:m,className:g.searchItem+" "+g.date}),Object(h.jsx)($,{}),Object(h.jsx)("div",{children:"\u0412\u0430\u043b\u044e\u0442\u0430"}),Object(h.jsx)(J,{filteredTickers:t,type:"forex",currency:O,date:m}),Object(h.jsx)("div",{children:"\u0410\u043a\u0446\u0438\u0438"}),Object(h.jsx)(J,{filteredTickers:r,type:"stock",currency:O,date:m}),Object(h.jsx)("div",{children:"\u0424\u043e\u043d\u0434\u044b"}),Object(h.jsx)(J,{filteredTickers:a,type:"pif",currency:O,date:m}),Object(h.jsx)(J,{filteredTickers:n,type:"etf",currency:O,date:m}),Object(h.jsx)("div",{children:"\u041e\u0431\u043b\u0438\u0433\u0430\u0446\u0438\u0438"}),Object(h.jsx)(J,{filteredTickers:s,type:"bonds",currency:O,date:m}),Object(h.jsx)("div",{children:"\u0421\u0443\u043c\u043c\u0430"}),Object(h.jsx)(V,{weeklyResult:C,currency:O,date:m})]})}var Ee=a.a.memo(Re);function Pe(e){var t=e.authenticated,r=e.children;return t?r:Object(h.jsx)(j.a,{to:{pathname:"".concat(re,"/login")}})}function Ae(e){var t=e.authenticated,r=e.children;return t?Object(h.jsx)(j.a,{to:"".concat(re,"/")}):r}var we=r(35);var Se=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),r=t[0],a=t[1],n=Object(c.useState)(""),s=Object(d.a)(n,2),i=s[0],o=s[1],l=Object(c.useState)(""),u=Object(d.a)(l,2),j=u[0],O=u[1],x=Object(c.useCallback)((function(e){o(e.target.value)}),[]),m=Object(c.useCallback)((function(e){a(e.target.value)}),[]),k=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),O(""),e.prev=2,e.next=5,Object(we.a)(E,r,i);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),O(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:k,children:[Object(h.jsx)("p",{children:"Fill in the form below to register new account."}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{placeholder:"Email",name:"email",type:"email",onChange:m,value:r})}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{placeholder:"Password",name:"password",onChange:x,value:i,type:"password"})}),Object(h.jsxs)("div",{children:[j&&Object(h.jsx)("p",{children:j}),Object(h.jsx)("button",{type:"submit",children:"Login"})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("p",{children:["Already have an account? ",Object(h.jsx)(b.b,{to:"/gbCourse5Hw/login",children:"Sign in"})]})]})})};var Fe=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),r=t[0],a=t[1],n=Object(c.useState)(""),s=Object(d.a)(n,2),i=s[0],o=s[1],l=Object(c.useState)(""),u=Object(d.a)(l,2),j=u[0],O=u[1],x=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),O(""),e.prev=2,e.next=5,Object(we.c)(E,r,i);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),O(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:x,children:[Object(h.jsx)("p",{children:"Fill in the form below to login to your account."}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{placeholder:"Email",name:"email",type:"email",onChange:function(e){a(e.target.value)},value:r})}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{placeholder:"Password",name:"password",onChange:function(e){o(e.target.value)},value:i,type:"password"})}),Object(h.jsxs)("div",{children:[j&&Object(h.jsx)("p",{children:j}),Object(h.jsx)("button",{type:"submit",children:"Login"})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("p",{children:["Don't have an account? ",Object(h.jsx)(b.b,{to:"/gbCourse5Hw/signup",children:"Sign up"})]})]})})},Ue=Object(x.a)((function(e){return{table:{maxWidth:"400px"},ticker:{display:"flex",flexDirection:"row",border:"1px solid black",margin:"10px"},tickerName:{display:"flex",flexDirection:"column",width:"110px",alignItems:"center",justifyContent:"space-around",padding:"5px",flexShrink:"0"},tickerTable:{display:"flex",flexDirection:"row"},tickerData:{display:"flex",flexDirection:"column",borderLeft:"1px solid black",flexGrow:"1"},tickerDataCell:{borderBottom:"1px solid black",margin:"0",padding:"5px","&:last-child":{borderBottom:"none"}},tickerHeaders:{display:"flex",flexDirection:"column",borderLeft:"1px solid black",flexGrow:"0"},tickerHeader:{borderBottom:"1px solid black",margin:"0",padding:"5px","&:last-child":{borderBottom:"none"}}}}));function Ie(e){var t=Object(i.b)(),r=Ue(),c=Object.keys(e.tickers||{});return Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:r.table,children:c.map((function(c){return Object(h.jsxs)("div",{className:r.ticker,children:[Object(h.jsxs)("div",{className:r.tickerName,children:[Object(h.jsx)("p",{children:c}),Object(h.jsx)("p",{children:e.tickers[c].description}),Object(h.jsx)("button",{onClick:function(){return function(e,r){t(M(e,r))}(c,e.type)},children:"del"})]}),Object(h.jsxs)("div",{className:r.tickerHeaders,children:[Object(h.jsx)("p",{className:r.tickerHeader,children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),Object(h.jsxs)("p",{className:r.tickerHeader,children:["\u0426\u0435\u043d\u0430,  ","rur"===e.currency&&Object(h.jsx)("span",{children:"\u20bd"})||"usd"===e.currency&&Object(h.jsx)("span",{children:"$"})||"eur"===e.currency&&Object(h.jsx)("span",{children:"\u20ac"})]}),Object(h.jsxs)("p",{className:r.tickerHeader,children:["\u0421\u0443\u043c\u043c\u0430,  ","rur"===e.currency&&Object(h.jsx)("span",{children:"\u20bd"})||"usd"===e.currency&&Object(h.jsx)("span",{children:"$"})||"eur"===e.currency&&Object(h.jsx)("span",{children:"\u20ac"})]}),Object(h.jsxs)("p",{className:r.tickerHeader,children:["\u0413\u043e\u0434\u043e\u0432\u0430\u044f \u0434\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c, ","rur"===e.currency&&Object(h.jsx)("span",{children:"\u20bd"})||"usd"===e.currency&&Object(h.jsx)("span",{children:"$"})||"eur"===e.currency&&Object(h.jsx)("span",{children:"\u20ac"})]}),Object(h.jsx)("p",{className:r.tickerHeader,children:"\u0413\u043e\u0434\u043e\u0432\u0430\u044f \u0434\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c,  %"})]}),Object(h.jsxs)("div",{className:r.tickerData,children:[Object(h.jsx)("p",{className:r.tickerDataCell,children:e.tickers[c].quantity}),Object(h.jsx)("p",{className:r.tickerDataCell,children:"rur"===e.currency&&Object(h.jsx)("span",{children:(+e.tickers[c].rubCost).toFixed(2)})||"usd"===e.currency&&Object(h.jsx)("span",{children:(+e.tickers[c].usdCost).toFixed(2)})||"eur"===e.currency&&Object(h.jsx)("span",{children:(+e.tickers[c].eurCost).toFixed(2)})}),Object(h.jsx)("p",{className:r.tickerDataCell,children:"rur"===e.currency&&Object(h.jsx)("span",{children:(+e.tickers[c].rubTotal).toFixed(2)})||"usd"===e.currency&&Object(h.jsx)("span",{children:(+e.tickers[c].usdTotal).toFixed(2)})||"eur"===e.currency&&Object(h.jsx)("span",{children:(+e.tickers[c].eurTotal).toFixed(2)})}),Object(h.jsx)("p",{className:r.tickerDataCell,children:"rur"===e.currency&&Object(h.jsx)("span",{children:e.myProfit&&e.myProfit[c]&&(+e.myProfit[c].sumProfitRubAbs).toFixed(2)})||"usd"===e.currency&&Object(h.jsx)("span",{children:e.myProfit&&e.myProfit[c]&&(+e.myProfit[c].sumProfitUsdAbs).toFixed(2)})||"eur"===e.currency&&Object(h.jsx)("span",{children:e.myProfit&&e.myProfit[c]&&(+e.myProfit[c].sumProfitEurAbs).toFixed(2)})}),Object(h.jsx)("p",{className:r.tickerDataCell,children:"rur"===e.currency&&Object(h.jsx)("span",{children:e.myProfit&&e.myProfit[c]&&(+e.myProfit[c].sumProfitRubRel).toFixed(2)})||"usd"===e.currency&&Object(h.jsx)("span",{children:e.myProfit&&e.myProfit[c]&&(+e.myProfit[c].sumProfitUsdRel).toFixed(2)})||"eur"===e.currency&&Object(h.jsx)("span",{children:e.myProfit&&e.myProfit[c]&&(+e.myProfit[c].sumProfitEurRel).toFixed(2)})})]})]},c)}))})})}var _e=a.a.memo(Ie),Le="PROFILE::CALCULATE_PORTFOLIO_COST",qe=function(e){return{type:Le,portfolioCost:e}},He="PROFILE::CALCULATE_PORTFOLIO_COST_WITH_SAGA",$e=Object(x.a)((function(e){return{App:{margin:"0 auto"},mainContainer:{display:"flex",flexDirection:"column",backgroundColor:"#EEE"}}}));function Be(){var e=Object(c.useState)("rur"),t=Object(d.a)(e,2),r=t[0],a=t[1],n=Object(c.useState)({}),s=Object(d.a)(n,2),o=s[0],l=s[1],u=Object(i.c)(he),b=$e(),j=Object(i.b)(),O=Object(i.c)(me),f=Object(i.c)(ye),p=Object(i.c)(ke),x=Object(i.c)(ve),m=Object(i.c)(Ce),k=Object(i.c)(De),y=Object(i.c)(ge),v=Object(i.c)(Ne);return Object(c.useEffect)((function(){j({type:He,stock:x,pif:m,etf:k,bonds:y,forex:v})}),[u]),Object(c.useEffect)((function(){l(function(e,t){var r=I(e,t),c=0,a=1,n=0,s=1,i=0,o=1;return Object.values(r).forEach((function(e){c+=+e.portfolioUsdProfitAbs,a*=1+ +e.portfolioUsdProfitRel/100,n+=+e.portfolioRubProfitAbs,s*=1+ +e.portfolioRubProfitRel/100,i+=+e.portfolioEurProfitAbs,o*=1+ +e.portfolioEurProfitRel/100})),{yearProfitUsdAbs:c,yearProfitUsdRel:a=100*(a-1),yearProfitRubAbs:n,yearProfitRubRel:s=100*(s-1),yearProfitEurAbs:i,yearProfitEurRel:o=100*(o-1)}}(f,2021))}),[f]),Object(h.jsxs)("div",{children:[Object(h.jsxs)("select",{required:!0,onChange:function(e){a(e.target.value)},className:b.searchItem,children:[Object(h.jsx)("option",{value:"rur",children:"rur"}),Object(h.jsx)("option",{value:"usd",children:"usd"}),Object(h.jsx)("option",{value:"eur",children:"eur"})]}),Object(h.jsx)("div",{children:"\u0412\u0430\u043b\u044e\u0442\u0430"}),Object(h.jsx)(_e,{tickers:v,myProfit:p.forex,type:"forex",currency:r}),Object(h.jsx)("div",{children:"\u0410\u043a\u0446\u0438\u0438"}),Object(h.jsx)(_e,{tickers:x,myProfit:p.stock,type:"stock",currency:r}),Object(h.jsx)("div",{children:"\u0424\u043e\u043d\u0434\u044b"}),Object(h.jsx)(_e,{tickers:m,myProfit:p.pif,type:"pif",currency:r}),Object(h.jsx)(_e,{tickers:k,myProfit:p.etf,type:"etf",currency:r}),Object(h.jsx)("div",{children:"\u041e\u0431\u043b\u0438\u0433\u0430\u0446\u0438\u0438"}),Object(h.jsx)(_e,{tickers:y,myProfit:p.bonds,type:"bonds",currency:r}),Object(h.jsx)("h1",{children:E.currentUser?E.currentUser.email:""}),Object(h.jsxs)("p",{children:["\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f, \u20bd ",Object(h.jsx)("b",{children:O?(+O.rubGrandTotal).toFixed(2):""})]}),Object(h.jsxs)("p",{children:["\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0430\u0431\u0441, \u20bd ",Object(h.jsx)("b",{children:o?(+o.yearProfitRubAbs).toFixed(2):""})]}),Object(h.jsxs)("p",{children:["\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c %, \u20bd ",Object(h.jsx)("b",{children:o?(+o.yearProfitRubRel).toFixed(2):""})]}),Object(h.jsxs)("p",{children:["\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f, $ ",Object(h.jsx)("b",{children:O?(+O.usdGrandTotal).toFixed(2):""})]}),Object(h.jsxs)("p",{children:["\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0430\u0431\u0441, $; ",Object(h.jsx)("b",{children:o?(+o.yearProfitUsdAbs).toFixed(2):""})]}),Object(h.jsxs)("p",{children:["\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c %, $; ",Object(h.jsx)("b",{children:o?(+o.yearProfitUsdRel).toFixed(2):""})]}),Object(h.jsxs)("p",{children:["\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u043e\u0440\u0442\u0444\u0435\u043b\u044f, \u20ac ",Object(h.jsx)("b",{children:O?(+O.eurGrandTotal).toFixed(2):""})]}),Object(h.jsxs)("p",{children:["\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0430\u0431\u0441, \u20ac ",Object(h.jsx)("b",{children:o?(+o.yearProfitEurAbs).toFixed(2):""})]}),Object(h.jsxs)("p",{children:["\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c %, \u20ac ",Object(h.jsx)("b",{children:o?(+o.yearProfitEurRel).toFixed(2):""})]})]})}var Me=a.a.memo(Be);var We=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),r=t[0],a=t[1];Object(c.useEffect)((function(){return Object(we.b)(E,(function(e){a(!!e)}))}),[]);var n=Object(c.useCallback)((function(){Object(we.d)(E).then((function(){})).catch((function(e){}))}),[]);return Object(h.jsxs)(b.a,{children:[Object(h.jsxs)("header",{children:[Object(h.jsx)(b.b,{to:"".concat(re,"/"),children:"Main"}),Object(h.jsx)(b.b,{to:"".concat(re,"/profile"),children:"Profile"}),Object(h.jsx)(b.b,{to:"".concat(re,"/signup"),children:"Registration"}),Object(h.jsx)(b.b,{to:"".concat(re,"/login"),children:"Login"}),Object(h.jsx)("button",{onClick:n,children:"Sign Out"})]}),Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.b,{authenticated:r,exact:!0,path:"".concat(re,"/"),element:Object(h.jsx)(Pe,{authenticated:r,children:Object(h.jsx)(Ee,{})})}),Object(h.jsx)(j.b,{authenticated:r,exact:!0,path:"".concat(re,"/profile"),element:Object(h.jsx)(Pe,{authenticated:r,children:Object(h.jsx)(Me,{})})}),Object(h.jsx)(j.b,{authenticated:r,path:"".concat(re,"/signup"),element:Object(h.jsx)(Ae,{authenticated:r,children:Object(h.jsx)(Se,{})})}),Object(h.jsx)(j.b,{authenticated:r,path:"".concat(re,"/login"),element:Object(h.jsx)(Ae,{authenticated:r,children:Object(h.jsx)(Fe,{})})}),Object(h.jsx)(j.b,{element:Object(h.jsx)("h4",{children:"404"})})]})]})},Ge=r(31),Ke=r(65),Ye=r(54),ze=r(63),Je=r.n(ze),Xe={userData:{},currentUserData:{},filteredTickers:{}},Qe=r(33),Ve=r(25),Ze=f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Ve.a)(F,t.stock,t.pif,t.etf,t.bonds,t.forex);case 3:return r=e.sent,e.next=6,Object(Ve.b)(qe(r));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})),et=f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Ve.a)(_,t.allTickers);case 3:return r=e.sent,e.next=6,Object(Ve.b)(Oe(r));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})),tt=f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Ve.a)(L,t.allTickers,t.dates);case 3:return r=e.sent,e.next=6,Object(Ve.b)({type:pe,weeklyPortfolioProfitAndCost:r});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})),rt=f.a.mark((function e(t){var r,c,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.d)(P,"".concat(E.currentUser.uid,"/tickers/").concat(t.tickerType,"/").concat(t.ticker,"/data/").concat(t.date));case 3:return r=e.sent,e.next=6,Object(T.f)(r,{ticker:t.ticker,description:t.description,quantity:t.quantity,usdCost:t.usdCost,usdTotal:t.usdTotal,rubCost:t.rubCost,rubTotal:t.rubTotal,eurCost:t.eurCost,eurTotal:t.eurTotal,profitUsdAbs:t.profitUsdAbs,profitUsdRel:t.profitUsdRel,profitRubAbs:t.profitRubAbs,profitRubRel:t.profitRubRel,profitEurAbs:t.profitEurAbs,profitEurRel:t.profitEurRel,currency:t.currency,bondNominal:t.bondNominal,couponOrDividendUsd:t.couponOrDividendUsd,couponOrDividendRub:t.couponOrDividendRub,couponOrDividendEur:t.couponOrDividendEur});case 6:return e.next=8,Object(T.d)(P,"".concat(E.currentUser.uid,"/portfolio/").concat(t.tickerType,"/").concat(t.ticker,"/"));case 8:return c=e.sent,e.next=11,Object(T.f)(c,{ticker:t.ticker,quantity:t.quantity,currency:t.currency,description:t.description});case 11:return e.next=13,Object(T.d)(P,"".concat(E.currentUser.uid,"/dates/").concat(t.date));case 13:return a=e.sent,e.next=16,Object(T.f)(a,"yes");case 16:return e.next=18,{ticker:t.ticker,quantity:t.quantity,usdCost:t.usdCost,usdTotal:t.usdTotal,rubCost:t.rubCost,rubTotal:t.rubTotal,eurCost:t.eurCost,eurTotal:t.eurTotal};case 18:if(n=e.sent,t.isManual){e.next=22;break}return e.next=22,Object(Ve.b)(be(t.ticker,t.date,t.quantity,t.currency,n,t.bondNominal));case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.log(e.t0);case 27:case 28:case"end":return e.stop()}}),e,null,[[0,24]])})),ct=f.a.mark((function e(t){var r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.d)(P,"".concat(E.currentUser.uid,"/portfolio/").concat(t.marketType,"/").concat(t.ticker));case 3:return r=e.sent,e.next=6,Object(T.e)(r);case 6:return e.next=8,Object(T.d)(P,"".concat(E.currentUser.uid,"/tickers/").concat(t.marketType,"/").concat(t.ticker));case 8:return c=e.sent,e.next=11,Object(T.e)(c);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case 17:case"end":return e.stop()}}),e,null,[[0,13]])})),at=f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(+new Date(t.date)<+new Date-6912e5)){e.next=7;break}return e.next=4,Object(Ve.a)(S,t.ticker,new Date(+new Date(t.date)+6048e5),t.quantity,t.currency,t.prevData,!0,!1,0,{},t.bondNominal,0);case 4:return r=e.sent,e.next=7,Object(Ve.b)(r);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case 13:case"end":return e.stop()}}),e,null,[[0,9]])})),nt=f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.d)(P,"".concat(E.currentUser.uid));case 3:return t=e.sent,e.next=6,Object(T.c)(t,(function(e){var t=e.val();yt.dispatch(ee(t||{}))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),st=f.a.mark(it);function it(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Qe.b)(te,nt);case 2:return e.next=4,Object(Qe.a)(D,rt);case 4:return e.next=6,Object(Qe.b)(B,ct);case 6:return e.next=8,Object(Qe.a)(de,at);case 8:return e.next=10,Object(Qe.b)(He,Ze);case 10:return e.next=12,Object(Qe.b)(fe,et);case 12:return e.next=14,Object(Qe.b)(xe,tt);case 14:case"end":return e.stop()}}),st)}var ot=it,lt=Xe.userData;var ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;return t.type===Z?Object(v.a)({},t.userData):e},dt=Xe.currentUserData;var bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Le:return Object(v.a)(Object(v.a)({},e),{},{portfolioCost:t.portfolioCost});case je:return Object(v.a)(Object(v.a)({},e),{},{yearProfit:t.yearProfit});case pe:return Object(v.a)(Object(v.a)({},e),{},{weeklyPortfolioProfitAndCost:t.weeklyPortfolioProfitAndCost});default:return e}},jt=Xe.filteredTickers;var Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;return t.type===C?Object(v.a)({},t.filteredTickers):e},ft=Object(Ge.b)({userData:ut,currentUserData:bt,filteredTickers:Ot}),pt={onError:function(e,t){console.log("qqq"+e),console.log(t)}},xt=Object(Ke.a)(pt),ht=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ge.c,mt={key:"root",storage:Je.a},kt=Object(Ye.a)(mt,ft),yt=Object(Ge.d)(kt,Xe,ht(Object(Ge.a)(xt)));xt.run(ot);var vt=Object(Ye.b)(yt),Ct=Object(l.a)({palette:{primary:{main:"#708238"},secondary:{main:"#0098FF"}}});var Dt=function(){return Object(h.jsx)(i.a,{store:yt,children:Object(h.jsx)(o.a,{persistor:vt,children:Object(h.jsx)(u.a,{theme:Ct,children:Object(h.jsx)(We,{})})})})},gt=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,97)).then((function(t){var r=t.getCLS,c=t.getFID,a=t.getFCP,n=t.getLCP,s=t.getTTFB;r(e),c(e),a(e),n(e),s(e)}))};s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(Dt,{})}),document.getElementById("root")),gt()}},[[84,1,2]]]);
//# sourceMappingURL=main.28630a87.chunk.js.map