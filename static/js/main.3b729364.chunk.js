(this.webpackJsonpinvestor=this.webpackJsonpinvestor||[]).push([[0],{220:function(e,t,r){},364:function(e,t,r){"use strict";r.r(t);var c=r(0),a=r.n(c),n=r(72),s=r.n(n),i=(r(220),r(28)),o=r(182),l=r(205),u=r(381),d=r(10),b=r(40),j=r(23),O=r(5),p=r(1),f=r.n(p),x=r(382),h=r(2),m=Object(x.a)((function(e){return{searchListContainer:{maxWidth:"500px"},searchList:{listStyle:"none",padding:"0",margin:"0"},addButton:{border:"none","&:hover":{color:"#fff",backgroundColor:"#222"}}}}));var k=function(e){var t=m();return Object(h.jsx)("div",{className:t.searchListContainer,children:Object(h.jsx)("ul",{className:t.searchList,children:e.searchResult.map((function(r){return Object(h.jsx)("li",{children:Object(h.jsx)("button",{onClick:function(t){return e.submitTicker(t,r.ticker)},className:t.addButton,children:r.descr})},r.ticker+r.classcode)}))})})},y=r(4),v=r(22),C="TICKERS::ADD_FILTERED_TICKERS",g="TICKERS::ADD_TICKER_WITH_SAGA",D=function(e,t,r,c,a,n,s,i,o,l,u,d,b,j,O,p,f,x,h,m,k,y,v,C){return{type:g,ticker:e,description:t,date:r,dateTill:c,quantity:a,usdCost:n,usdTotal:s,rubCost:i,rubTotal:o,eurCost:l,eurTotal:u,profitUsdAbs:d,profitUsdRel:b,profitRubAbs:j,profitRubRel:O,profitEurAbs:p,profitEurRel:f,currency:x,tickerType:h,isManual:m,bondNominal:k,couponOrDividendUsd:y,couponOrDividendRub:v,couponOrDividendEur:C}},N=r(112),T=r(33),R=r(187),E=(Object(R.a)({apiKey:"AIzaSyAS0Sazo-Bbg-TouSxSrenj5hTYa5bnjN8",authDomain:"investor-8a0c2.firebaseapp.com",projectId:"investor-8a0c2",storageBucket:"investor-8a0c2.appspot.com",messagingSenderId:"949350207446",appId:"1:949350207446:web:c6cf85c9033c3ed2491e77"}),Object(N.b)()),S=Object(T.b)(),w=function(e){return"https://api.bcs.ru/udfdatafeed/v1/symbols?symbol=".concat(e)},P=function(e,t,r){return+t&&+r?"https://api.bcs.ru/udfdatafeed/v1/history?symbol=".concat(e,"&resolution=d&from=").concat(Math.round(+new Date(t)/1e3),"&to=").concat(Math.round(+new Date(r)/1e3)):"https://api.bcs.ru/udfdatafeed/v1/history?symbol=".concat(e,"&resolution=d&from=").concat(Math.round(+new Date/1e3),"&to=").concat(Math.round(+new Date/1e3))},A=function(){var e=Object(O.a)(f.a.mark((function e(t,r,c,a,n,s,i,o,l,u,d){var b,j,O,p,x,h,m,k,y,v,C,g,N,R,A,F,I,U,_,L,q,H,$,M,W,B,K,G,Y,z,V,J,X,Q,Z,ee,te,re,ce,ae,ne=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(b=ne.length>11&&void 0!==ne[11]?ne[11]:0,j=+new Date(r);5!==new Date(j).getDay();)j+=864e5;return O=d,void 0===d&&(O=0),e.prev=6,g=1,N=1,R=1,A=s,F=0,I=0,U=0,_=0,L=0,q=0,H=0,$=0,M=0,W=P("RUR",j,j+828e5),e.next=23,fetch(W);case 23:return B=e.sent,e.next=26,B.json();case 26:return K=e.sent,G=K.c[0],Y=P("EUR_RUB",j,j+828e5),e.next=31,fetch(Y);case 31:return z=e.sent,e.next=34,z.json();case 34:if(V=e.sent,J=V.c[0],"rur"===n?g=1/G:"usd"===n?g=1:"eur"===n&&(g=J/G),"rur"===n?N=1:"usd"===n?N=G:"eur"===n&&(N=J),"rur"===n?R=1/J:"usd"===n?R=G/J:"eur"===n&&(R=1),H=b*g,$=b*N,M=b*R,o){e.next=70;break}return X=w(t),e.next=49,fetch(X);case 49:return Q=e.sent,e.next=52,Q.json();case 52:return v=e.sent,Z=P(t,j,j+828e5),e.next=56,fetch(Z);case 56:return ee=e.sent,e.next=59,ee.json();case 59:if("no_data"!==(C=e.sent).s&&!isNaN(C.c[0])){e.next=62;break}throw new Error("\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445");case 62:p="bonds"!==v.type?C.c[0]*g:C.c[0]*g*O/100,x="bonds"!==v.type?C.c[0]*g*a:C.c[0]*g*a*O/100,h="bonds"!==v.type?C.c[0]*N:C.c[0]*N*O/100,m="bonds"!==v.type?C.c[0]*N*a:C.c[0]*N*a*O/100,k="bonds"!==v.type?C.c[0]*R:C.c[0]*R*O/100,y="bonds"!==v.type?C.c[0]*R*a:C.c[0]*R*a*O/100,e.next=77;break;case 70:p=l*g,x=l*g*a,h=l*N,m=l*N*a,k=l*R,y=l*R*a,v=u;case 77:if(i){e.next=85;break}return te=Object(T.d)(S,"".concat(E.currentUser.uid,"/tickers/").concat(v.type,"/").concat(t,"/data/").concat(new Date(j-6048e5).toISOString().slice(0,10))),e.next=82,Object(T.a)(te);case 82:(re=e.sent).exists()&&(ce=re.val(),A.ticker=ce.ticker,A.rubCost=ce.rubCost,A.usdCost=ce.usdCost,A.eurCost=ce.eurCost,A.quantity=ce.quantity);case 85:return void 0===A.ticker?(F=0,I=0,U=0,_=0,L=0,q=0):(ae=(p-A.usdCost)/A.usdCost*100>-90&&(p-A.usdCost)/A.usdCost*100<90,I=ae?(p-A.usdCost+H/A.quantity)/A.usdCost*100:0,F=ae?(p-A.usdCost)*A.quantity+H:0,_=ae?(h-A.rubCost+$/A.quantity)/A.rubCost*100:0,U=ae?(h-A.rubCost)*A.quantity+$:0,q=ae?(k-A.eurCost+M/A.quantity)/A.eurCost*100:0,L=ae?(k-A.eurCost)*A.quantity+M:0),e.abrupt("return",D(t,v.description,new Date(j).toISOString().slice(0,10),c,a,p,x,h,m,k,y,F,I,U,_,L,q,n,v.type,o,O,H,$,M));case 89:e.prev=89,e.t0=e.catch(6),console.log(e.t0.message+r);case 92:case"end":return e.stop()}}),e,null,[[6,89]])})));return function(t,r,c,a,n,s,i,o,l,u,d){return e.apply(this,arguments)}}(),F=function(){for(var e=0,t=0,r=0,c=arguments.length,a=new Array(c),n=0;n<c;n++)a[n]=arguments[n];return a.forEach((function(c){Object.values(c).forEach((function(c){e+=+c.rubTotal,t+=+c.usdTotal,r+=+c.eurTotal}))})),{rubGrandTotal:e,usdGrandTotal:t,eurGrandTotal:r}},I=function(e,t,r){var c={};return Object.keys(e).forEach((function(a){var n=Object.keys(e[a]);c=Object(v.a)(Object(v.a)({},c),{},Object(y.a)({},a,{})),n.forEach((function(n){var s=Object.keys(e[a][n].data);c=Object(v.a)(Object(v.a)({},c),{},Object(y.a)({},a,Object(v.a)(Object(v.a)({},c[a]),{},Object(y.a)({},n,{data:{}})))),s.filter((function(e){return new Date(e).getMonth()===r&&new Date(e).getFullYear()===t})).forEach((function(t){c=Object(v.a)(Object(v.a)({},c),{},Object(y.a)({},a,Object(v.a)(Object(v.a)({},c[a]),{},Object(y.a)({},n,{data:Object(v.a)(Object(v.a)({},c[a][n].data),{},Object(y.a)({},t,e[a][n].data[t]))}))))}))}))})),{type:C,filteredTickers:c}},U=function(e,t,r){var c={},a=Object.keys(e);return(void 0!==r?a.filter((function(e){return new Date(e).getMonth()===r&&new Date(e).getFullYear()===t})):a.filter((function(e){return new Date(e).getFullYear()===t}))).forEach((function(t){c=Object(v.a)(Object(v.a)({},c),{},Object(y.a)({},t,e[t]))})),c},_=function(e){var t={};return Object.values(e).forEach((function(r,c){var a=Object.keys(r);t=Object(v.a)(Object(v.a)({},t),{},Object(y.a)({},Object.keys(e)[c],{})),Object.values(r).forEach((function(r,n){var s=0,i=1,o=0,l=1,u=0,d=1;Object.values(r.data).forEach((function(e){s+=+e.profitUsdAbs,i*=1+ +e.profitUsdRel/100,o+=+e.profitRubAbs,l*=1+ +e.profitRubRel/100,u+=+e.profitEurAbs,d*=1+ +e.profitEurRel/100})),i=100*(i-1),l=100*(l-1),d=100*(d-1),t=Object(v.a)(Object(v.a)({},t),{},Object(y.a)({},Object.keys(e)[c],Object(v.a)(Object(v.a)({},t[Object.keys(e)[c]]),{},Object(y.a)({},a[n],{sumProfitUsdAbs:s,sumProfitUsdRel:i,sumProfitRubAbs:o,sumProfitRubRel:l,sumProfitEurAbs:u,sumProfitEurRel:d}))))}))})),t},L=function(e,t){var r={};if(t.no_data)return r;var c=void 0,a=void 0,n=void 0;return Object.keys(t).forEach((function(t){var s=0,i=0,o=0,l=0,u=0,d=0,b=0,j=0,O=0;Object.values(e).forEach((function(e,r){Object.values(e).forEach((function(e,r){void 0!==e.data[t]&&(s+=+e.data[t].usdTotal,i+=+e.data[t].profitUsdAbs,l+=+e.data[t].rubTotal,u+=+e.data[t].profitRubAbs,b+=+e.data[t].eurTotal,j+=+e.data[t].profitEurAbs)}))})),void 0!==c&&0!==c&&(o=i/c*100,d=u/a*100,O=j/n*100),c=s,a=l,n=b,r=Object(v.a)(Object(v.a)({},r),{},Object(y.a)({},t,{portfolioUsdTotal:s,portfolioUsdProfitAbs:i,portfolioUsdProfitRel:o,portfolioRubTotal:l,portfolioRubProfitAbs:u,portfolioRubProfitRel:d,portfolioEurTotal:b,portfolioEurProfitAbs:j,portfolioEurProfitRel:O}))})),r},q=function(e){for(var t=+new Date-864e5;5!==new Date(t).getDay();)t-=864e5;t=new Date(t).toISOString().slice(0,10);var r={};return Object.keys(e).forEach((function(c){var a=Object.keys(e[c].data)[Object.keys(e[c].data).length-1];e[c].data[t]&&(r=Object(v.a)(Object(v.a)({},r),{},Object(y.a)({},c,{quantity:e[c].data[a].quantity,rubCost:e[c].data[a].rubCost,rubTotal:e[c].data[a].rubTotal,usdCost:e[c].data[a].usdCost,usdTotal:e[c].data[a].usdTotal,eurCost:e[c].data[a].eurCost,eurTotal:e[c].data[a].eurTotal,currency:e[c].data[a].currency,description:e[c].data[a].description})))})),r},H=function(){var e=Object(O.a)(f.a.mark((function e(t){var r,c,a,n,s,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,c=w(t),e.next=5,fetch(c);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,r.type=n.type,r.description=n.description,s=P(t,+new Date-84e5,new Date),e.next=14,fetch(s);case 14:return i=e.sent,e.next=17,i.json();case 17:if("no_data"!==(o=e.sent).s&&!isNaN(o.c[0])){e.next=20;break}throw new Error("\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445");case 20:return r.cost=o.c[0],e.abrupt("return",r);case 24:return e.prev=24,e.t0=e.catch(1),console.log(e.t0.message),e.abrupt("return",Object(v.a)(Object(v.a)({},r),{},{noData:!0}));case 28:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(t){return e.apply(this,arguments)}}(),$=Object(x.a)((function(e){return{form:{maxWidth:"400px",border:"1px solid black",borderRadius:"10px",display:"flex",flexDirection:"column",margin:"10px",backgroundColor:"lightgray"},formSubmit:{display:"block"},searchItem:{margin:"5px 10px",marginBottom:"5px"},hidden:{display:"none"},fieldName:{marginLeft:"5px"}}}));var M=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),r=t[0],a=t[1],n=Object(c.useState)(""),s=Object(d.a)(n,2),o=s[0],l=s[1],u=Object(c.useState)(""),b=Object(d.a)(u,2),j=b[0],p=b[1],x=Object(c.useState)((new Date).toISOString().slice(0,10)),m=Object(d.a)(x,2),y=m[0],v=m[1],C=Object(c.useState)(""),g=Object(d.a)(C,2),D=g[0],N=g[1],T=Object(c.useState)([]),R=Object(d.a)(T,2),E=R[0],S=R[1],w=Object(c.useState)("rur"),P=Object(d.a)(w,2),F=P[0],I=P[1],U=Object(c.useState)(0),_=Object(d.a)(U,2),L=_[0],q=_[1],H=Object(c.useState)(!1),M=Object(d.a)(H,2),W=M[0],B=M[1],K=Object(c.useState)("bonds"),G=Object(d.a)(K,2),Y=G[0],z=G[1],V=Object(c.useState)(""),J=Object(d.a)(V,2),X=J[0],Q=J[1],Z=Object(c.useState)(!0),ee=Object(d.a)(Z,2),te=ee[0],re=ee[1],ce=Object(c.useState)(0),ae=Object(d.a)(ce,2),ne=ae[0],se=ae[1],ie=Object(c.useState)(0),oe=Object(d.a)(ie,2),le=oe[0],ue=oe[1],de=Object(i.b)(),be=function(){var e=Object(O.a)(f.a.mark((function e(t){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),S([]),e.next=4,A(r,j,y,o,F,{},!1,W,L,{type:Y,description:X},ne,le);case 4:(c=e.sent)&&de(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=$();return Object(h.jsxs)("form",{action:"",onSubmit:be,className:je.form,label:"Ticker",children:[Object(h.jsx)("span",{className:je.fieldName,children:"Ticker: "}),Object(h.jsx)("input",{type:"text",disabled:te,className:je.searchItem,value:r,onChange:function(e){a(e.target.value)},required:!0}),Object(h.jsxs)("select",{required:!0,onChange:function(e){I(e.target.value)},className:je.searchItem,children:[Object(h.jsx)("option",{value:"rur",children:"rur"}),Object(h.jsx)("option",{value:"usd",children:"usd"}),Object(h.jsx)("option",{value:"eur",children:"eur"})]}),Object(h.jsx)("span",{className:je.fieldName,children:"Quantity: "}),Object(h.jsx)("input",{type:"number",className:je.searchItem,value:o,onChange:function(e){l(e.target.value)},required:!0}),Object(h.jsx)("span",{className:je.fieldName,children:"Bond nominal: "}),Object(h.jsx)("input",{type:"number",className:je.searchItem,value:ne,onChange:function(e){se(e.target.value)},required:!0}),Object(h.jsx)("span",{className:je.fieldName,children:"Coupon or dividend: "}),Object(h.jsx)("input",{type:"number",className:je.searchItem,value:le,onChange:function(e){ue(e.target.value)}}),Object(h.jsxs)("div",{className:je.form+" "+(te?je.hidden:""),children:[Object(h.jsx)("span",{className:je.fieldName,children:"Manual course: "}),Object(h.jsx)("input",{type:"number",className:je.searchItem,value:L,onChange:function(e){q(e.target.value)}}),Object(h.jsx)("span",{className:je.fieldName,children:"Manual description: "}),Object(h.jsx)("input",{type:"text",className:je.searchItem,value:X,onChange:function(e){Q(e.target.value)}}),Object(h.jsx)("span",{className:je.fieldName,children:"Manual type:"}),Object(h.jsxs)("select",{required:!0,onChange:function(e){z(e.target.value)},className:je.searchItem,children:[Object(h.jsx)("option",{value:"bonds",children:"bonds"}),Object(h.jsx)("option",{value:"stock",children:"stock"}),Object(h.jsx)("option",{value:"pif",children:"pif"}),Object(h.jsx)("option",{value:"etf",children:"etf"}),Object(h.jsx)("option",{value:"forex",children:"forex"})]})]}),Object(h.jsx)("span",{className:je.fieldName,children:"Date from: "}),Object(h.jsx)("input",{type:"date",className:je.searchItem,value:j,onChange:function(e){p(e.target.value)},required:!0}),Object(h.jsx)("span",{className:je.fieldName,children:"Date till: "}),Object(h.jsx)("input",{type:"date",className:je.searchItem,value:y,onChange:function(e){v(e.target.value)},required:!0}),Object(h.jsx)("input",{type:"submit",className:je.formSubmit+" "+je.searchItem,value:"Add"}),Object(h.jsx)("input",{type:"button",className:je.formSubmit+" "+je.searchItem+" "+(te?"":je.hidden),value:"Manual",onClick:function(){B(!0),re(!1)}}),Object(h.jsx)("input",{type:"button",className:je.formSubmit+" "+je.searchItem+" "+(te?je.hidden:""),value:"Auto",onClick:function(){B(!1),re(!0)}}),Object(h.jsx)("span",{className:je.fieldName,children:"Search: "}),Object(h.jsx)("input",{type:"text",disabled:!te,className:je.searchItem,value:D,onChange:function(e){N(e.target.value);var t,r=(t=e.target.value,"https://api.bcs.ru/udfdatafeed/v1/search?query=".concat(t,"&limit=10&fulldescription=on"));fetch(r).then((function(e){return e.json()})).then((function(e){var t=[];e.forEach((function(e,r){t.push({ticker:e.symbol,descr:e.description,classcode:e.classcode})})),S(t)})).catch((function(e){console.log(e)}))}}),Object(h.jsx)(k,{className:je.searchItem,searchResult:E,submitTicker:function(e,t){e.preventDefault(),a(t)}})]})},W="TICKERS::DEL_TICKER_WITH_SAGA",B=function(e,t){return{type:W,ticker:e,marketType:t}},K="TICKERS::DEL_TICKER_DATE_WITH_SAGA",G="TICKERS::SELL_TICKER_WITH_SAGA",Y=Object(x.a)((function(e){return{table:{maxWidth:"100%"},ticker:{display:"flex",flexDirection:"row",border:"1px solid black",margin:"10px",overflow:"auto"},tickerName:{display:"flex",flexDirection:"column",width:"110px",alignItems:"center",justifyContent:"space-around",padding:"5px",flexShrink:"0"},tickerTable:{display:"flex",flexDirection:"row"},tickerDate:{width:"100px",display:"flex",flexDirection:"column",borderLeft:"1px solid black","&:last-child":{borderRight:"1px solid black"}},tickerHeader:{width:"200px",display:"flex",flexDirection:"column",borderLeft:"1px solid black","&:last-child":{borderRight:"1px solid black"}},tickerDateCell:{borderBottom:"1px solid black",margin:"0",padding:"5px","&:last-child":{borderBottom:"none"}},green:{backgroundColor:"\t#66CC66"},red:{backgroundColor:"#FF6666"}}}));function z(e){var t=Object(c.useState)(0),r=Object(d.a)(t,2),a=r[0],n=r[1],s=Object(c.useState)(1),o=Object(d.a)(s,2),l=o[0],u=o[1],b=Object(c.useState)(0),j=Object(d.a)(b,2),O=j[0],p=j[1],f=Object(c.useState)(1),x=Object(d.a)(f,2),m=x[0],k=x[1],y=Object(c.useState)(0),v=Object(d.a)(y,2),C=v[0],g=v[1],D=Object(c.useState)(1),N=Object(d.a)(D,2),T=N[0],R=N[1],E=Object(i.b)();Object(c.useEffect)((function(){var t=0,r=1,c=0,a=1,s=0,i=1;Object.values(e.ticker.data).forEach((function(e){t+=+e.profitUsdAbs,r*=1+e.profitUsdRel/100,c+=+e.profitRubAbs,a*=1+e.profitRubRel/100,s+=+e.profitEurAbs,i*=1+e.profitEurRel/100})),r=100*(r-1),a=100*(a-1),i=100*(i-1),n(t),u(r),p(c),k(a),g(s),R(i)}),[e]);var S=function(e,t,r){window.confirm("Are you sure you want to delete this?")&&E(function(e,t,r){return{type:K,marketType:e,ticker:t,date:r}}(e,t,r))},w=function(e,t,r){window.confirm("Are you sure you want to sell this?")&&E(function(e,t,r){return{type:G,marketType:e,ticker:t,date:r}}(e,t,r))},P=Y();return Object(h.jsxs)("div",{className:P.tickerTable,children:[Object(h.jsxs)("div",{className:P.tickerHeader,children:[Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u0414\u0430\u0442\u0430"}),Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),"usd"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 $"}):"","rur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u20bd"}):"","eur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u20ac"}):"","usd"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0432 $, \u0430\u0431\u0441"}):"","usd"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0432 $, %"}):"","rur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0432 \u20bd, \u0430\u0431\u0441"}):"","rur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0432 \u20bd, %"}):"","eur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0432 \u20ac, \u0430\u0431\u0441"}):"","eur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0432 \u20ac, %"}):"","usd"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u0414\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u044b/\u041a\u0443\u043f\u043e\u043d\u044b \u0432 $, \u0430\u0431\u0441"}):"","rur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u0414\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u044b/\u041a\u0443\u043f\u043e\u043d\u044b \u0432 \u20bd, \u0430\u0431\u0441"}):"","eur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:"\u0414\u0438\u0432\u0438\u0434\u0435\u043d\u0434\u044b/\u041a\u0443\u043f\u043e\u043d\u044b \u0432 \u20ac, \u0430\u0431\u0441"}):""]}),Object.values(e.ticker.data).map((function(t,r){return Object(h.jsxs)("div",{className:P.tickerDate,children:[Object(h.jsx)("p",{className:P.tickerDateCell,children:Object.keys(e.ticker.data)[r]}),Object(h.jsx)("p",{className:P.tickerDateCell,children:t.quantity}),"usd"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:(+t.usdCost).toFixed(4)}):"","usd"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:(+t.usdTotal).toFixed(2)}):"","rur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:(+t.rubCost).toFixed(4)}):"","rur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:(+t.rubTotal).toFixed(2)}):"","eur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:(+t.eurCost).toFixed(4)}):"","eur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:(+t.eurTotal).toFixed(2)}):"","usd"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell+" "+(t.profitUsdAbs>=0?P.green:P.red),children:(+t.profitUsdAbs).toFixed(2)+" $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell+" "+(t.profitUsdAbs>=0?P.green:P.red),children:(+t.profitUsdRel).toFixed(2)+" %"}):"","rur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell+" "+(t.profitRubAbs>=0?P.green:P.red),children:(+t.profitRubAbs).toFixed(2)+" \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell+" "+(t.profitRubAbs>=0?P.green:P.red),children:(+t.profitRubRel).toFixed(2)+" %"}):"","eur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell+" "+(t.profitEurAbs>=0?P.green:P.red),children:(+t.profitEurAbs).toFixed(2)+" \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell+" "+(t.profitEurAbs>=0?P.green:P.red),children:(+t.profitEurRel).toFixed(2)+" %"}):"","usd"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:(+t.couponOrDividendUsd).toFixed(2)}):"","rur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:(+t.couponOrDividendRub).toFixed(2)}):"","eur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell,children:(+t.couponOrDividendEur).toFixed(2)}):"",Object(h.jsx)("button",{onClick:function(){return S(e.type,t.ticker,Object.keys(e.ticker.data)[r])},children:"del"}),Object(h.jsx)("button",{onClick:function(){return w(e.type,t.ticker,Object.keys(e.ticker.data)[r])},children:"sell"})]},t.ticker+Object.keys(e.ticker.data)[r])})),Object(h.jsxs)("div",{className:P.tickerDate,children:[Object(h.jsx)("p",{className:P.tickerDateCell,children:"-"}),Object(h.jsx)("p",{className:P.tickerDateCell,children:"-"}),Object(h.jsx)("p",{className:P.tickerDateCell,children:"-"}),Object(h.jsx)("p",{className:P.tickerDateCell,children:"-"}),"usd"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell+" "+(a>=0?P.green:P.red),children:a.toFixed(2)+" $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell+" "+(a>=0?P.green:P.red),children:l.toFixed(2)+" %"}):"","rur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell+" "+(O>=0?P.green:P.red),children:O.toFixed(2)+" \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell+" "+(O>=0?P.green:P.red),children:m.toFixed(2)+" %"}):"","eur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell+" "+(C>=0?P.green:P.red),children:C.toFixed(2)+" \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:P.tickerDateCell+" "+(C>=0?P.green:P.red),children:T.toFixed(2)+" %"}):""]})]})}var V=a.a.memo(z),J="",X={},Q=Object(x.a)((function(e){return{table:{maxWidth:"100%"},ticker:{display:"flex",flexDirection:"row",border:"1px solid black",margin:"10px",overflow:"auto"},description:{margin:"5px"},tickerName:{display:"flex",flexDirection:"column",width:"110px",alignItems:"center",justifyContent:"space-around",padding:"5px",flexShrink:"0"}}}));function Z(e){var t=Object(i.b)(),r=Q(),c=Object.values(e.filteredTickers||{}),a=Object.keys(e.filteredTickers||{});return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:r.table,children:c.map((function(c,n){return 0!==Object.keys(c.data).length&&Object(h.jsxs)("div",{className:r.ticker,children:[Object(h.jsxs)("div",{className:r.tickerName,children:[Object(h.jsx)("p",{className:r.description,children:Object(h.jsx)(b.b,{to:"".concat(J,"/").concat(a[n]),children:a[n]},a[n])}),Object(h.jsx)("p",{className:r.description,children:c.data[Object.keys(c.data)[Object.keys(c.data).length-1]].description}),Object(h.jsx)("p",{className:r.description,children:c.data[Object.keys(c.data)[Object.keys(c.data).length-1]].currency}),Object(h.jsx)("button",{onClick:function(){return function(e,r){window.confirm("Are you sure you want to delete this?")&&t(B(e,r))}(a[n],e.type)},children:"del"})]}),Object(h.jsx)(V,{ticker:c,currency:e.currency,type:e.type})]},a[n])}))}),Object(h.jsx)(j.b,{})]})}var ee=a.a.memo(Z),te=Object(x.a)((function(e){return{table:{maxWidth:"100%"},ticker:{display:"flex",flexDirection:"row",border:"1px solid black",margin:"10px",overflow:"auto"},tickerName:{display:"flex",flexDirection:"column",width:"110px",alignItems:"center",justifyContent:"space-around",padding:"5px",flexShrink:"0"},tickerTable:{display:"flex",flexDirection:"row",margin:"10px"},tickerDate:{width:"100px",display:"flex",flexDirection:"column",borderLeft:"1px solid black","&:last-child":{borderRight:"1px solid black"}},tickerHeader:{width:"321px",display:"flex",flexDirection:"column",borderLeft:"1px solid black","&:last-child":{borderRight:"1px solid black"}},tickerDateCell:{borderBottom:"1px solid black",margin:"0",padding:"5px","&:last-child":{borderBottom:"none"}},green:{backgroundColor:"\t#66CC66"},red:{backgroundColor:"#FF6666"}}}));function re(e){var t=te(),r=Object(c.useState)(0),a=Object(d.a)(r,2),n=a[0],s=a[1],i=Object(c.useState)(0),o=Object(d.a)(i,2),l=o[0],u=o[1],b=Object(c.useState)(1),j=Object(d.a)(b,2),O=j[0],p=j[1],f=Object(c.useState)(0),x=Object(d.a)(f,2),m=x[0],k=x[1],y=Object(c.useState)(0),v=Object(d.a)(y,2),C=v[0],g=v[1],D=Object(c.useState)(1),N=Object(d.a)(D,2),T=N[0],R=N[1],E=Object(c.useState)(0),S=Object(d.a)(E,2),w=S[0],P=S[1],A=Object(c.useState)(0),F=Object(d.a)(A,2),I=F[0],U=F[1],_=Object(c.useState)(1),L=Object(d.a)(_,2),q=L[0],H=L[1];return Object(c.useEffect)((function(){var t=0,r=0,c=1,a=0,n=0,i=1,o=0,l=0,d=1;Object.values(e.weeklyResult).forEach((function(e){t=+e.portfolioUsdTotal,r+=+e.portfolioUsdProfitAbs,c*=1+e.portfolioUsdProfitRel/100,a=+e.portfolioRubTotal,n+=+e.portfolioRubProfitAbs,i*=1+e.portfolioRubProfitRel/100,o=+e.portfolioEurTotal,l+=+e.portfolioEurProfitAbs,d*=1+e.portfolioEurProfitRel/100})),c=100*(c-1),i=100*(i-1),d=100*(d-1),s(t),u(r),p(c),k(a),g(n),R(i),P(o),U(l),H(d)}),[e]),Object(h.jsxs)("div",{className:t.tickerTable,children:[Object(h.jsxs)("div",{className:t.tickerHeader,children:[Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u0430\u0442\u0430"}),"usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0430\u0431\u0441 \u0432 $ "}):"","usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c % \u0432 $ "}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0430\u0431\u0441 \u0432 \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c % \u0432 \u20bd"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0430\u0431\u0441 \u0432 \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c % \u0432 \u20ac"}):""]}),Object.values(e.weeklyResult).map((function(r,c){return Object(h.jsxs)("div",{className:t.tickerDate,children:[Object(h.jsx)("p",{className:t.tickerDateCell,children:Object.keys(e.weeklyResult)[c]}),"usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:r.portfolioUsdTotal.toFixed(2)+" $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(r.portfolioUsdProfitAbs>=0?t.green:t.red),children:r.portfolioUsdProfitAbs.toFixed(2)+" $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(r.portfolioUsdProfitAbs>=0?t.green:t.red),children:r.portfolioUsdProfitRel.toFixed(2)+" %"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:r.portfolioRubTotal.toFixed(2)+" \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(r.portfolioRubProfitAbs>=0?t.green:t.red),children:r.portfolioRubProfitAbs.toFixed(2)+" \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(r.portfolioRubProfitAbs>=0?t.green:t.red),children:r.portfolioRubProfitRel.toFixed(2)+" %"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:r.portfolioEurTotal.toFixed(2)+" \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(r.portfolioEurProfitAbs>=0?t.green:t.red),children:r.portfolioEurProfitAbs.toFixed(2)+" \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(r.portfolioEurProfitAbs>=0?t.green:t.red),children:r.portfolioEurProfitRel.toFixed(2)+" %"}):""]},Object.keys(e.weeklyResult)[c])})),Object(h.jsxs)("div",{className:t.tickerDate,children:[Object(h.jsx)("p",{className:t.tickerDateCell,children:"-"}),"usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:n.toFixed(2)+" $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(l>=0?t.green:t.red),children:l.toFixed(2)+" $"}):"","usd"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(l>=0?t.green:t.red),children:O.toFixed(2)+" %"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:m.toFixed(2)+" \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(C>=0?t.green:t.red),children:C.toFixed(2)+" \u20bd"}):"","rur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(C>=0?t.green:t.red),children:T.toFixed(2)+" %"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell,children:w.toFixed(2)+" \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(I>=0?t.green:t.red),children:I.toFixed(2)+" \u20ac"}):"","eur"===e.currency?Object(h.jsx)("p",{className:t.tickerDateCell+" "+(I>=0?t.green:t.red),children:q.toFixed(2)+" %"}):""]})]})}var ce=a.a.memo(re),ae="USER::INIT_USER_DATA",ne=function(e){return{type:ae,userData:e}},se="USER::INIT_USER_DATA_WITH_SAGA";function ie(e){return e.userData.tickers?e.userData.tickers:X}function oe(e){return e.filteredTickers.stock?e.filteredTickers.stock:X}function le(e){return e.filteredTickers.pif?e.filteredTickers.pif:X}function ue(e){return e.filteredTickers.etf?e.filteredTickers.etf:X}function de(e){return e.filteredTickers.bonds?e.filteredTickers.bonds:X}function be(e){return e.filteredTickers.forex?e.filteredTickers.forex:X}function je(e){return e.userData.dates?e.userData.dates:X}var Oe="TICKERS::AUTOCOMPLETE_TICKER_WITH_SAGA",pe=function(e,t,r,c,a,n,s,i){return{type:Oe,ticker:e,date:t,dateTill:r,quantity:c,currency:a,prevData:n,bondNominal:s,sold:i}},fe="PROFILE::CALCULATE_YEAR_PROFIT",xe=function(e){return{type:fe,yearProfit:e}},he="PROFILE::CALCULATE_YEAR_PROFIT_WITH_SAGA",me="PROFILE::CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST",ke="PROFILE::CALCULATE_WEEKLY_PORTFOLIO_PROFIT_AND_COST_WITH_SAGA";function ye(e){return e.userData.portfolio?e.userData.portfolio:X}function ve(e){return e.currentUserData.portfolioCost?e.currentUserData.portfolioCost:X}function Ce(e){return e.currentUserData.yearProfit?e.currentUserData.yearProfit:X}function ge(e){return e.currentUserData.weeklyPortfolioProfitAndCost?e.currentUserData.weeklyPortfolioProfitAndCost:X}function De(e){return e.userData.tickers&&e.userData.tickers.stock?q(e.userData.tickers.stock):X}function Ne(e){return e.userData.tickers&&e.userData.tickers.pif?q(e.userData.tickers.pif):X}function Te(e){return e.userData.tickers&&e.userData.tickers.etf?q(e.userData.tickers.etf):X}function Re(e){return e.userData.tickers&&e.userData.tickers.bonds?q(e.userData.tickers.bonds):X}function Ee(e){return e.userData.tickers&&e.userData.tickers.forex?q(e.userData.tickers.forex):X}var Se=Object(x.a)((function(e){return{App:{margin:"0 auto"},mainContainer:{position:"relative",display:"flex",flexDirection:"column",backgroundColor:"#EEE",margin:"10px"},chooseDisplayOptions:{display:"flex",justifyContent:"space-around",maxWidth:"240px",position:"sticky",top:"0",border:"1px solid black",borderRadius:"10px",margin:"10px",backgroundColor:"lightgray"},chooseCurrency:{maxWidth:"150px",margin:"5px 0",boxSizing:"border-box"},chooseMonth:{maxWidth:"150px",margin:"5px 0",boxSizing:"border-box"}}}));function we(){var e=Object(i.b)(),t=Object(i.c)(be),r=Object(i.c)(oe),a=Object(i.c)(le),n=Object(i.c)(ue),s=Object(i.c)(de),o=Object(i.c)(ie),l=Object(i.c)(je),u=Object(i.c)(ge),b=Object(c.useState)("rur"),j=Object(d.a)(b,2),O=j[0],p=j[1],f=Object(c.useState)((new Date).toISOString().slice(0,7)),x=Object(d.a)(f,2),m=x[0],k=x[1],y=Object(c.useState)({}),v=Object(d.a)(y,2),C=v[0],g=v[1];Object(c.useEffect)((function(){e({type:se})}),[]),Object(c.useEffect)((function(){Object.values(o).forEach((function(t){Object.values(t).forEach((function(r,c){var a={ticker:Object.keys(t)[c],quantity:Object.values(r.data)[Object.keys(r.data).length-1].quantity,usdCost:Object.values(r.data)[Object.keys(r.data).length-1].usdCost,usdTotal:Object.values(r.data)[Object.keys(r.data).length-1].usdTotal,rubCost:Object.values(r.data)[Object.keys(r.data).length-1].rubCost,rubTotal:Object.values(r.data)[Object.keys(r.data).length-1].rubTotal,eurCost:Object.values(r.data)[Object.keys(r.data).length-1].eurCost,eurTotal:Object.values(r.data)[Object.keys(r.data).length-1].eurTotal};e(pe(Object.keys(t)[c],Object.keys(r.data)[Object.keys(r.data).length-1],(new Date).toISOString().slice(0,10),Object.values(r.data)[Object.keys(r.data).length-1].quantity,Object.values(r.data)[Object.keys(r.data).length-1].currency,a,Object.values(r.data)[Object.keys(r.data).length-1].bondNominal,Object.values(r.data)[Object.keys(r.data).length-1].sold))}))}))}),[]),Object(c.useEffect)((function(){e(I(o,new Date(m).getFullYear(),new Date(m).getMonth()))}),[m,o]),Object(c.useEffect)((function(){g(U(u,new Date(m).getFullYear(),new Date(m).getMonth()))}),[m]),Object(c.useEffect)((function(){e(function(e){return{type:he,allTickers:e}}(o))}),[e]),Object(c.useEffect)((function(){e(function(e,t){return{type:ke,allTickers:e,dates:t}}(o,l))}),[l]);var D=Se();return Object(h.jsxs)("div",{className:D.App+" "+D.mainContainer,children:[Object(h.jsxs)("div",{className:D.chooseDisplayOptions,children:[Object(h.jsxs)("select",{required:!0,onChange:function(e){p(e.target.value)},className:D.chooseCurrency,children:[Object(h.jsx)("option",{value:"rur",children:"rur"}),Object(h.jsx)("option",{value:"usd",children:"usd"}),Object(h.jsx)("option",{value:"eur",children:"eur"})]}),Object(h.jsx)("input",{type:"month",onChange:function(e){k(e.target.value)},value:m,className:D.chooseMonth})]}),Object(h.jsx)(M,{}),Object(h.jsx)("div",{children:"Currency"}),Object(h.jsx)(ee,{filteredTickers:t,type:"forex",currency:O,date:m}),Object(h.jsx)("div",{children:"Stocks"}),Object(h.jsx)(ee,{filteredTickers:r,type:"stock",currency:O,date:m}),Object(h.jsx)("div",{children:"Funds"}),Object(h.jsx)(ee,{filteredTickers:a,type:"pif",currency:O,date:m}),Object(h.jsx)(ee,{filteredTickers:n,type:"etf",currency:O,date:m}),Object(h.jsx)("div",{children:"Bonds"}),Object(h.jsx)(ee,{filteredTickers:s,type:"bonds",currency:O,date:m}),Object(h.jsx)("div",{children:"Total"}),Object(h.jsx)(ce,{weeklyResult:C,currency:O,date:m})]})}var Pe=a.a.memo(we);function Ae(e){var t=e.authenticated,r=e.children;return t?r:Object(h.jsx)(j.a,{to:{pathname:"".concat(J,"/login")}})}function Fe(e){var t=e.authenticated,r=e.children;return t?Object(h.jsx)(j.a,{to:"".concat(J,"/")}):r}var Ie=r(73);var Ue=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),r=t[0],a=t[1],n=Object(c.useState)(""),s=Object(d.a)(n,2),i=s[0],o=s[1],l=Object(c.useState)(""),u=Object(d.a)(l,2),j=u[0],p=u[1],x=Object(c.useCallback)((function(e){o(e.target.value)}),[]),m=Object(c.useCallback)((function(e){a(e.target.value)}),[]),k=function(){var e=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),p(""),e.prev=2,e.next=5,Object(Ie.a)(E,r,i);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),p(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:k,children:[Object(h.jsx)("p",{children:"Fill in the form below to register new account."}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{placeholder:"Email",name:"email",type:"email",onChange:m,value:r})}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{placeholder:"Password",name:"password",onChange:x,value:i,type:"password"})}),Object(h.jsxs)("div",{children:[j&&Object(h.jsx)("p",{children:j}),Object(h.jsx)("button",{type:"submit",children:"Login"})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("p",{children:["Already have an account? ",Object(h.jsx)(b.b,{to:"".concat(J,"/login"),children:"Sign in"})]})]})})};var _e=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),r=t[0],a=t[1],n=Object(c.useState)(""),s=Object(d.a)(n,2),i=s[0],o=s[1],l=Object(c.useState)(""),u=Object(d.a)(l,2),j=u[0],p=u[1],x=function(){var e=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),p(""),e.prev=2,e.next=5,Object(Ie.c)(E,r,i);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),p(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:x,children:[Object(h.jsx)("p",{children:"Fill in the form below to login to your account."}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{placeholder:"Email",name:"email",type:"email",onChange:function(e){a(e.target.value)},value:r})}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{placeholder:"Password",name:"password",onChange:function(e){o(e.target.value)},value:i,type:"password"})}),Object(h.jsxs)("div",{children:[j&&Object(h.jsx)("p",{children:j}),Object(h.jsx)("button",{type:"submit",children:"Login"})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("p",{children:["Don't have an account? ",Object(h.jsx)(b.b,{to:"".concat(J,"/signup"),children:"Sign up"})]})]})})},Le=r(375),qe=r(376),He=r(380),$e=r(202),Me=r(203),We=r(102),Be=r(99),Ke=r(208),Ge=Object(x.a)((function(e){return{table:{maxWidth:"400px"},ticker:{display:"flex",flexDirection:"row",border:"1px solid black",margin:"10px"},tickerName:{display:"flex",flexDirection:"column",width:"110px",alignItems:"center",justifyContent:"space-around",padding:"5px",flexShrink:"0"},tickerTable:{display:"flex",flexDirection:"row"},tickerData:{display:"flex",flexDirection:"column",borderLeft:"1px solid black",flexGrow:"1"},tickerDataCell:{borderBottom:"1px solid black",margin:"0",padding:"5px","&:last-child":{borderBottom:"none"}},tickerHeaders:{display:"flex",flexDirection:"column",borderLeft:"1px solid black",flexGrow:"0"},tickerHeader:{borderBottom:"1px solid black",margin:"0",padding:"5px","&:last-child":{borderBottom:"none"}}}}));function Ye(e){var t=Object(i.b)(),r=Ge(),c=Object.keys(e.tickers||{});return Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:r.table,children:c.map((function(c){return Object(h.jsxs)("div",{className:r.ticker,children:[Object(h.jsxs)("div",{className:r.tickerName,children:[Object(h.jsx)("p",{children:c}),Object(h.jsx)("p",{children:e.tickers[c].description}),Object(h.jsx)("button",{onClick:function(){return function(e,r){window.confirm("Are you sure you want to delete this?")&&t(B(e,r))}(c,e.type)},children:"del"})]}),Object(h.jsxs)("div",{className:r.tickerHeaders,children:[Object(h.jsx)("p",{className:r.tickerHeader,children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),Object(h.jsxs)("p",{className:r.tickerHeader,children:["\u0426\u0435\u043d\u0430,  ","rur"===e.currency&&Object(h.jsx)("span",{children:"\u20bd"})||"usd"===e.currency&&Object(h.jsx)("span",{children:"$"})||"eur"===e.currency&&Object(h.jsx)("span",{children:"\u20ac"})]}),Object(h.jsxs)("p",{className:r.tickerHeader,children:["\u0421\u0443\u043c\u043c\u0430,  ","rur"===e.currency&&Object(h.jsx)("span",{children:"\u20bd"})||"usd"===e.currency&&Object(h.jsx)("span",{children:"$"})||"eur"===e.currency&&Object(h.jsx)("span",{children:"\u20ac"})]}),Object(h.jsxs)("p",{className:r.tickerHeader,children:["\u0413\u043e\u0434\u043e\u0432\u0430\u044f \u0434\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c, ","rur"===e.currency&&Object(h.jsx)("span",{children:"\u20bd"})||"usd"===e.currency&&Object(h.jsx)("span",{children:"$"})||"eur"===e.currency&&Object(h.jsx)("span",{children:"\u20ac"})]}),Object(h.jsx)("p",{className:r.tickerHeader,children:"\u0413\u043e\u0434\u043e\u0432\u0430\u044f \u0434\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c,  %"})]}),Object(h.jsxs)("div",{className:r.tickerData,children:[Object(h.jsx)("p",{className:r.tickerDataCell,children:e.tickers[c].quantity}),Object(h.jsx)("p",{className:r.tickerDataCell,children:"rur"===e.currency&&Object(h.jsx)("span",{children:(+e.tickers[c].rubCost).toFixed(2)})||"usd"===e.currency&&Object(h.jsx)("span",{children:(+e.tickers[c].usdCost).toFixed(2)})||"eur"===e.currency&&Object(h.jsx)("span",{children:(+e.tickers[c].eurCost).toFixed(2)})}),Object(h.jsx)("p",{className:r.tickerDataCell,children:"rur"===e.currency&&Object(h.jsx)("span",{children:(+e.tickers[c].rubTotal).toFixed(2)})||"usd"===e.currency&&Object(h.jsx)("span",{children:(+e.tickers[c].usdTotal).toFixed(2)})||"eur"===e.currency&&Object(h.jsx)("span",{children:(+e.tickers[c].eurTotal).toFixed(2)})}),Object(h.jsx)("p",{className:r.tickerDataCell,children:"rur"===e.currency&&Object(h.jsx)("span",{children:e.myProfit&&e.myProfit[c]&&(+e.myProfit[c].sumProfitRubAbs).toFixed(2)})||"usd"===e.currency&&Object(h.jsx)("span",{children:e.myProfit&&e.myProfit[c]&&(+e.myProfit[c].sumProfitUsdAbs).toFixed(2)})||"eur"===e.currency&&Object(h.jsx)("span",{children:e.myProfit&&e.myProfit[c]&&(+e.myProfit[c].sumProfitEurAbs).toFixed(2)})}),Object(h.jsx)("p",{className:r.tickerDataCell,children:"rur"===e.currency&&Object(h.jsx)("span",{children:e.myProfit&&e.myProfit[c]&&(+e.myProfit[c].sumProfitRubRel).toFixed(2)})||"usd"===e.currency&&Object(h.jsx)("span",{children:e.myProfit&&e.myProfit[c]&&(+e.myProfit[c].sumProfitUsdRel).toFixed(2)})||"eur"===e.currency&&Object(h.jsx)("span",{children:e.myProfit&&e.myProfit[c]&&(+e.myProfit[c].sumProfitEurRel).toFixed(2)})})]})]},c)}))})})}var ze=a.a.memo(Ye),Ve="PROFILE::CALCULATE_PORTFOLIO_COST",Je=function(e){return{type:Ve,portfolioCost:e}},Xe="PROFILE::CALCULATE_PORTFOLIO_COST_WITH_SAGA",Qe=Object(x.a)((function(e){return{mainContainer:{display:"flex",backgroundColor:"#EEE",margin:"10px"},rightPart:{display:"flex",flexDirection:"column"},chart:{width:"1000px",height:"500px",marginTop:"50px"},portfolioSummaryContainer:{display:"flex",flexDirection:"column",alignSelf:"center",marginTop:"50px",alignItems:"center"},portfolioSummary:{display:"flex"},portfolioSummaryHeaders:{display:"flex",flexDirection:"column",textAlign:"right",marginRight:"10px"},portfolioSummaryValues:{display:"flex",flexDirection:"column",textAlign:"left"}}}));function Ze(){var e=Object(c.useState)("rur"),t=Object(d.a)(e,2),r=t[0],a=t[1],n=Object(c.useState)({}),s=Object(d.a)(n,2),o=s[0],l=s[1],u=Object(c.useState)([]),b=Object(d.a)(u,2),j=b[0],O=b[1],p=Object(c.useState)([]),f=Object(d.a)(p,2),x=f[0],m=f[1],k=Object(c.useState)([]),y=Object(d.a)(k,2),v=y[0],C=y[1],g=Object(c.useState)([]),D=Object(d.a)(g,2),N=D[0],T=D[1],R=Object(c.useState)({}),S=Object(d.a)(R,2),w=S[0],P=S[1],A=Object(c.useState)((new Date).toISOString().slice(0,4)),F=Object(d.a)(A,2),I=F[0],_=F[1],L=Object(i.c)(ye),q=Qe(),H=Object(i.b)(),$=Object(i.c)(ve),M=Object(i.c)(ge),W=Object(i.c)(Ce),B=Object(i.c)(De),K=Object(i.c)(Ne),G=Object(i.c)(Te),Y=Object(i.c)(Re),z=Object(i.c)(Ee);return Object(c.useEffect)((function(){H({type:Xe,stock:B,pif:K,etf:G,bonds:Y,forex:z})}),[L]),Object(c.useEffect)((function(){l(function(e,t){var r=U(e,t),c=0,a=1,n=0,s=1,i=0,o=1;return Object.values(r).forEach((function(e){c+=+e.portfolioUsdProfitAbs,a*=1+ +e.portfolioUsdProfitRel/100,n+=+e.portfolioRubProfitAbs,s*=1+ +e.portfolioRubProfitRel/100,i+=+e.portfolioEurProfitAbs,o*=1+ +e.portfolioEurProfitRel/100})),{yearProfitUsdAbs:c,yearProfitUsdRel:a=100*(a-1),yearProfitRubAbs:n,yearProfitRubRel:s=100*(s-1),yearProfitEurAbs:i,yearProfitEurRel:o=100*(o-1)}}(M,+I))}),[M,I]),Object(c.useEffect)((function(){P(U(M,+I))}),[M,I]),Object(c.useEffect)((function(){O(Object.entries(w).map((function(e,t,r){return{date:e[0],value:100*(r.slice(0,t+1).reduce((function(e,t){return e*(1+t[1].portfolioRubProfitRel/100)}),1)-1)}}))),m(Object.entries(w).map((function(e,t,r){return{date:e[0],value:100*(r.slice(0,t+1).reduce((function(e,t){return e*(1+t[1].portfolioUsdProfitRel/100)}),1)-1)}}))),C(Object.entries(w).map((function(e,t,r){return{date:e[0],value:100*(r.slice(0,t+1).reduce((function(e,t){return e*(1+t[1].portfolioEurProfitRel/100)}),1)-1)}})))}),[w]),Object(c.useEffect)((function(){switch(r){case"rur":T(j);break;case"usd":T(x);break;case"eur":T(v)}}),[j,r]),Object(h.jsxs)("div",{className:q.mainContainer,children:[Object(h.jsxs)("div",{className:q.leftPart,children:[Object(h.jsxs)("select",{required:!0,onChange:function(e){a(e.target.value)},className:q.searchItem,children:[Object(h.jsx)("option",{value:"rur",children:"rur"}),Object(h.jsx)("option",{value:"usd",children:"usd"}),Object(h.jsx)("option",{value:"eur",children:"eur"})]}),Object(h.jsxs)("select",{required:!0,onChange:function(e){_(e.target.value)},value:I,className:q.searchItem,children:[Object(h.jsx)("option",{value:"2020",children:"2020"}),Object(h.jsx)("option",{value:"2021",children:"2021"}),Object(h.jsx)("option",{value:"2022",children:"2022"})]}),Object(h.jsx)("div",{children:"Currency"}),Object(h.jsx)(ze,{tickers:z,myProfit:W.forex,type:"forex",currency:r}),Object(h.jsx)("div",{children:"Stocks"}),Object(h.jsx)(ze,{tickers:B,myProfit:W.stock,type:"stock",currency:r}),Object(h.jsx)("div",{children:"Funds"}),Object(h.jsx)(ze,{tickers:K,myProfit:W.pif,type:"pif",currency:r}),Object(h.jsx)(ze,{tickers:G,myProfit:W.etf,type:"etf",currency:r}),Object(h.jsx)("div",{children:"Bonds"}),Object(h.jsx)(ze,{tickers:Y,myProfit:W.bonds,type:"bonds",currency:r}),Object(h.jsx)("h1",{children:E.currentUser?E.currentUser.email:""})]}),Object(h.jsxs)("div",{className:q.rightPart,children:[Object(h.jsx)("div",{className:q.chart,children:Object(h.jsx)(Le.a,{width:"100%",height:"100%",children:Object(h.jsxs)(qe.a,{width:500,height:300,data:N,margin:{top:5,right:30,left:20,bottom:5},children:[Object(h.jsx)(He.a,{strokeDasharray:"3 3"}),Object(h.jsx)($e.a,{dataKey:"date"}),Object(h.jsx)(Me.a,{}),Object(h.jsx)(We.a,{}),Object(h.jsx)(Be.a,{}),Object(h.jsx)(Ke.a,{type:"monotone",dataKey:"value",stroke:"#8884d8",activeDot:{r:8}})]})})}),Object(h.jsxs)("div",{className:q.portfolioSummaryContainer,children:[Object(h.jsx)("h3",{children:"Portfolio summary"}),Object(h.jsxs)("div",{className:q.portfolioSummary,children:[Object(h.jsxs)("div",{className:q.portfolioSummaryHeaders,children:[Object(h.jsx)("span",{children:"Portfolio total, \u20bd"}),Object(h.jsx)("span",{children:"Profit abs, \u20bd"}),Object(h.jsx)("span",{children:"Profit rel, \u20bd"}),Object(h.jsx)("span",{children:"Portfolio total, $"}),Object(h.jsx)("span",{children:"Profit abs, $"}),Object(h.jsx)("span",{children:"Profit rel, $"}),Object(h.jsx)("span",{children:"Portfolio total, \u20ac"}),Object(h.jsx)("span",{children:"Profit abs, \u20ac"}),Object(h.jsx)("span",{children:"Profit rel, \u20ac"})]}),Object(h.jsxs)("div",{className:q.portfolioSummaryValues,children:[Object(h.jsx)("span",{children:Object(h.jsxs)("b",{children:[$?(+$.rubGrandTotal).toFixed(2):"",", \u20bd"]})}),Object(h.jsx)("span",{children:Object(h.jsxs)("b",{children:[o?(+o.yearProfitRubAbs).toFixed(2):"",", \u20bd"]})}),Object(h.jsx)("span",{children:Object(h.jsxs)("b",{children:[o?(+o.yearProfitRubRel).toFixed(2):"",", %"]})}),Object(h.jsx)("span",{children:Object(h.jsxs)("b",{children:[$?(+$.usdGrandTotal).toFixed(2):"",", $"]})}),Object(h.jsx)("span",{children:Object(h.jsxs)("b",{children:[o?(+o.yearProfitUsdAbs).toFixed(2):"",", $"]})}),Object(h.jsx)("span",{children:Object(h.jsxs)("b",{children:[o?(+o.yearProfitUsdRel).toFixed(2):"",", %"]})}),Object(h.jsx)("span",{children:Object(h.jsxs)("b",{children:[$?(+$.eurGrandTotal).toFixed(2):"",", \u20ac"]})}),Object(h.jsx)("span",{children:Object(h.jsxs)("b",{children:[o?(+o.yearProfitEurAbs).toFixed(2):"",", \u20ac"]})}),Object(h.jsx)("span",{children:Object(h.jsxs)("b",{children:[o?(+o.yearProfitEurRel).toFixed(2):"",", %"]})})]})]})]})]})]})}var et=a.a.memo(Ze),tt=Object(x.a)((function(e){return{header:{margin:"0 auto"},chart:{width:"1000px",height:"500px"}}}));var rt=function(){var e=tt(),t=Object(j.i)().ticker,r=Object(c.useState)(),a=Object(d.a)(r,2),n=a[0],s=a[1],o=Object(c.useState)(),l=Object(d.a)(o,2),u=l[0],b=l[1],p=Object(c.useState)(),x=Object(d.a)(p,2),m=x[0],k=x[1],y=Object(c.useState)([]),v=Object(d.a)(y,2),C=v[0],g=v[1],D=Object(c.useState)([]),N=Object(d.a)(D,2),T=N[0],R=N[1],E=Object(c.useState)([]),S=Object(d.a)(E,2),w=S[0],P=S[1],A=Object(c.useState)([]),F=Object(d.a)(A,2),I=F[0],U=F[1],_=Object(c.useState)("rur"),L=Object(d.a)(_,2),q=L[0],$=L[1],M=Object(c.useState)(0),W=Object(d.a)(M,2),B=W[0],K=W[1],G=Object(i.c)(ie);return Object(c.useEffect)((function(){Object(O.a)(f.a.mark((function e(){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:r=e.sent,s(r.type),b(r.description),r.noData?k("No data"):k(r.cost);case 7:case"end":return e.stop()}}),e)})))()}),[]),Object(c.useEffect)((function(){var e=G.bonds[t]?G.bonds[t].data:G.stock[t]?G.stock[t].data:G.etf[t]?G.etf[t].data:G.pif[t]?G.pif[t].data:G.forex[t]?G.forex[t].data:{};R(Object.entries(e).map((function(e,t){return{date:e[0],value:e[1].rubCost}}))),P(Object.entries(e).map((function(e,t){return{date:e[0],value:e[1].usdCost}}))),U(Object.entries(e).map((function(e,t){return{date:e[0],value:e[1].eurCost}})))}),[]),Object(c.useEffect)((function(){switch(q){case"rur":g(T),T.length&&K(((T[T.length-1].value-T[0].value)/T[0].value*100).toFixed(2));break;case"usd":g(w),w.length&&K(((w[w.length-1].value-w[0].value)/w[0].value*100).toFixed(2));break;case"eur":g(I),I.length&&K(((I[I.length-1].value-I[0].value)/I[0].value*100).toFixed(2))}}),[T,q]),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{className:e.header,children:t}),Object(h.jsx)("p",{children:n}),Object(h.jsx)("p",{children:u}),Object(h.jsx)("p",{children:m}),Object(h.jsxs)("p",{children:[B," %"]}),Object(h.jsxs)("select",{required:!0,onChange:function(e){$(e.target.value)},className:e.chooseCurrency,children:[Object(h.jsx)("option",{value:"rur",children:"rur"}),Object(h.jsx)("option",{value:"usd",children:"usd"}),Object(h.jsx)("option",{value:"eur",children:"eur"})]}),Object(h.jsx)("div",{className:e.chart,children:Object(h.jsx)(Le.a,{width:"100%",height:"100%",children:Object(h.jsxs)(qe.a,{width:500,height:300,data:C,margin:{top:5,right:30,left:20,bottom:5},children:[Object(h.jsx)(He.a,{strokeDasharray:"3 3"}),Object(h.jsx)($e.a,{dataKey:"date"}),Object(h.jsx)(Me.a,{}),Object(h.jsx)(We.a,{}),Object(h.jsx)(Be.a,{}),Object(h.jsx)(Ke.a,{type:"monotone",dataKey:"value",stroke:"#8884d8",activeDot:{r:8}})]})})})]})},ct=Object(x.a)((function(e){return{header:{display:"flex",justifyContent:"space-between",width:"450px"},link:{textDecoration:"none",margin:"5px 10px",padding:"2px 5px",border:"1px solid black",borderRadius:"5px",backgroundColor:"lightgray",color:"black"}}}));var at=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),r=t[0],a=t[1],n=ct();Object(c.useEffect)((function(){return Object(Ie.b)(E,(function(e){a(!!e)}))}),[]);var s=Object(c.useCallback)((function(){Object(Ie.d)(E).then((function(){})).catch((function(e){}))}),[]);return Object(h.jsxs)(b.a,{children:[Object(h.jsxs)("header",{className:n.header,children:[Object(h.jsx)(b.b,{to:"".concat(J,"/"),className:n.link,children:"Main"}),Object(h.jsx)(b.b,{to:"".concat(J,"/profile"),className:n.link,children:"Profile"}),Object(h.jsx)(b.b,{to:"".concat(J,"/signup"),className:n.link,children:"Registration"}),Object(h.jsx)(b.b,{to:"".concat(J,"/login"),className:n.link,children:"Login"}),Object(h.jsx)("button",{onClick:s,className:n.link,children:"Sign Out"})]}),Object(h.jsxs)(j.e,{children:[Object(h.jsx)(j.c,{authenticated:r,exact:!0,path:"".concat(J,"/"),element:Object(h.jsx)(Ae,{authenticated:r,children:Object(h.jsx)(Pe,{})})}),Object(h.jsx)(j.c,{authenticated:r,path:":ticker",element:Object(h.jsx)(Ae,{authenticated:r,children:Object(h.jsx)(rt,{})})}),Object(h.jsx)(j.c,{authenticated:r,exact:!0,path:"".concat(J,"/profile"),element:Object(h.jsx)(Ae,{authenticated:r,children:Object(h.jsx)(et,{})})}),Object(h.jsx)(j.c,{authenticated:r,path:"".concat(J,"/signup"),element:Object(h.jsx)(Fe,{authenticated:r,children:Object(h.jsx)(Ue,{})})}),Object(h.jsx)(j.c,{authenticated:r,path:"".concat(J,"/login"),element:Object(h.jsx)(Fe,{authenticated:r,children:Object(h.jsx)(_e,{})})}),Object(h.jsx)(j.c,{element:Object(h.jsx)("h4",{children:"404"})})]})]})},nt=r(52),st=r(207),it=r(144),ot=r(204),lt=r.n(ot),ut={userData:{},currentUserData:{},filteredTickers:{}},dt=r(58),bt=r(47),jt=f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(bt.a)(F,t.stock,t.pif,t.etf,t.bonds,t.forex);case 3:return r=e.sent,e.next=6,Object(bt.b)(Je(r));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})),Ot=f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(bt.a)(_,t.allTickers);case 3:return r=e.sent,e.next=6,Object(bt.b)(xe(r));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})),pt=f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(bt.a)(L,t.allTickers,t.dates);case 3:return r=e.sent,e.next=6,Object(bt.b)({type:me,weeklyPortfolioProfitAndCost:r});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})),ft=f.a.mark((function e(t){var r,c,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.d)(S,"".concat(E.currentUser.uid,"/tickers/").concat(t.tickerType,"/").concat(t.ticker,"/data/").concat(t.date));case 3:return r=e.sent,e.next=6,Object(T.f)(r,{ticker:t.ticker,description:t.description,quantity:t.quantity,usdCost:t.usdCost,usdTotal:t.usdTotal,rubCost:t.rubCost,rubTotal:t.rubTotal,eurCost:t.eurCost,eurTotal:t.eurTotal,profitUsdAbs:t.profitUsdAbs,profitUsdRel:t.profitUsdRel,profitRubAbs:t.profitRubAbs,profitRubRel:t.profitRubRel,profitEurAbs:t.profitEurAbs,profitEurRel:t.profitEurRel,currency:t.currency,bondNominal:t.bondNominal,couponOrDividendUsd:t.couponOrDividendUsd,couponOrDividendRub:t.couponOrDividendRub,couponOrDividendEur:t.couponOrDividendEur});case 6:return e.next=8,Object(T.d)(S,"".concat(E.currentUser.uid,"/portfolio/").concat(t.tickerType,"/").concat(t.ticker,"/"));case 8:return c=e.sent,e.next=11,Object(T.f)(c,{ticker:t.ticker,quantity:t.quantity,currency:t.currency,description:t.description});case 11:return e.next=13,Object(T.d)(S,"".concat(E.currentUser.uid,"/dates/").concat(t.date));case 13:return a=e.sent,e.next=16,Object(T.f)(a,"yes");case 16:return e.next=18,{ticker:t.ticker,quantity:t.quantity,usdCost:t.usdCost,usdTotal:t.usdTotal,rubCost:t.rubCost,rubTotal:t.rubTotal,eurCost:t.eurCost,eurTotal:t.eurTotal};case 18:if(n=e.sent,t.isManual){e.next=22;break}return e.next=22,Object(bt.b)(pe(t.ticker,t.date,t.dateTill,t.quantity,t.currency,n,t.bondNominal));case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.log(e.t0);case 27:case 28:case"end":return e.stop()}}),e,null,[[0,24]])})),xt=f.a.mark((function e(t){var r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.d)(S,"".concat(E.currentUser.uid,"/portfolio/").concat(t.marketType,"/").concat(t.ticker));case 3:return r=e.sent,e.next=6,Object(T.e)(r);case 6:return e.next=8,Object(T.d)(S,"".concat(E.currentUser.uid,"/tickers/").concat(t.marketType,"/").concat(t.ticker));case 8:return c=e.sent,e.next=11,Object(T.e)(c);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case 17:case"end":return e.stop()}}),e,null,[[0,13]])})),ht=f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.d)(S,"".concat(E.currentUser.uid,"/tickers/").concat(t.marketType,"/").concat(t.ticker,"/data/").concat(t.date));case 3:return r=e.sent,e.next=6,Object(T.e)(r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})),mt=f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.d)(S,"".concat(E.currentUser.uid,"/tickers/").concat(t.marketType,"/").concat(t.ticker,"/data/").concat(t.date));case 3:return r=e.sent,e.next=6,Object(T.a)(r).then((function(e){var t=Object(v.a)(Object(v.a)({},e.val()),{},{sold:!0});Object(T.f)(r,t)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})),kt=f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(+new Date(t.date)<+new Date(t.dateTill)-604801e3)||t.sold){e.next=7;break}return e.next=4,Object(bt.a)(A,t.ticker,new Date(+new Date(t.date)+6048e5),t.dateTill,t.quantity,t.currency,t.prevData,!0,!1,0,{},t.bondNominal,0);case 4:return r=e.sent,e.next=7,Object(bt.b)(r);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0,t.ticker);case 12:case 13:case"end":return e.stop()}}),e,null,[[0,9]])})),yt=f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.d)(S,"".concat(E.currentUser.uid));case 3:return t=e.sent,e.next=6,Object(T.c)(t,(function(e){var t=e.val();_t.dispatch(ne(t||{}))}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),vt=f.a.mark(Ct);function Ct(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dt.b)(se,yt);case 2:return e.next=4,Object(dt.a)(g,ft);case 4:return e.next=6,Object(dt.b)(W,xt);case 6:return e.next=8,Object(dt.b)(K,ht);case 8:return e.next=10,Object(dt.b)(G,mt);case 10:return e.next=12,Object(dt.a)(Oe,kt);case 12:return e.next=14,Object(dt.b)(Xe,jt);case 14:return e.next=16,Object(dt.b)(he,Ot);case 16:return e.next=18,Object(dt.b)(ke,pt);case 18:case"end":return e.stop()}}),vt)}var gt=Ct,Dt=ut.userData;var Nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0;return t.type===ae?Object(v.a)({},t.userData):e},Tt=ut.currentUserData;var Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ve:return Object(v.a)(Object(v.a)({},e),{},{portfolioCost:t.portfolioCost});case fe:return Object(v.a)(Object(v.a)({},e),{},{yearProfit:t.yearProfit});case me:return Object(v.a)(Object(v.a)({},e),{},{weeklyPortfolioProfitAndCost:t.weeklyPortfolioProfitAndCost});default:return e}},Et=ut.filteredTickers;var St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;return t.type===C?Object(v.a)({},t.filteredTickers):e},wt=Object(nt.b)({userData:Nt,currentUserData:Rt,filteredTickers:St}),Pt={onError:function(e,t){console.log("qqq"+e),console.log(t)}},At=Object(st.a)(Pt),Ft=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||nt.c,It={key:"root",storage:lt.a},Ut=Object(it.a)(It,wt),_t=Object(nt.d)(Ut,ut,Ft(Object(nt.a)(At)));At.run(gt);var Lt=Object(it.b)(_t),qt=Object(l.a)({palette:{primary:{main:"#708238"},secondary:{main:"#0098FF"}}});var Ht=function(){return Object(h.jsx)(i.a,{store:_t,children:Object(h.jsx)(o.a,{persistor:Lt,children:Object(h.jsx)(u.a,{theme:qt,children:Object(h.jsx)(at,{})})})})},$t=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,384)).then((function(t){var r=t.getCLS,c=t.getFID,a=t.getFCP,n=t.getLCP,s=t.getTTFB;r(e),c(e),a(e),n(e),s(e)}))};s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(Ht,{})}),document.getElementById("root")),$t()}},[[364,1,2]]]);
//# sourceMappingURL=main.3b729364.chunk.js.map